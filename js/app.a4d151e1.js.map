{"version":3,"file":"js/app.a4d151e1.js","mappings":"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","sources":["webpack://pcb_analyzer/./src/App.vue?e492","webpack://pcb_analyzer/./src/App.vue","webpack://pcb_analyzer/./src/App.vue?7ccd","webpack://pcb_analyzer/./src/utils/FormatUtils.ts","webpack://pcb_analyzer/./src/utils/GeometryUtils.ts","webpack://pcb_analyzer/./src/utils/ParsingUtils.ts","webpack://pcb_analyzer/./src/utils/PCBDrawerUtils.ts","webpack://pcb_analyzer/./src/utils/ScrollUtils.ts","webpack://pcb_analyzer/./src/models/abstract/PCBElement.ts","webpack://pcb_analyzer/./src/models/abstract/PCBComponent.ts","webpack://pcb_analyzer/./src/models/abstract/PCBGeneral.ts","webpack://pcb_analyzer/./src/models/abstract/PCBLayer.ts","webpack://pcb_analyzer/./src/models/abstract/PCBNet.ts","webpack://pcb_analyzer/./src/models/abstract/PCBNonFunctional.ts","webpack://pcb_analyzer/./src/models/abstract/PCBPlate.ts","webpack://pcb_analyzer/./src/models/abstract/PCBShape.ts","webpack://pcb_analyzer/./src/services/PCBDrawer.ts","webpack://pcb_analyzer/./src/types/PCBTypes.ts","webpack://pcb_analyzer/./src/components/canvas/PCBCanvas/PCBControls/PCBControls.vue?5de2","webpack://pcb_analyzer/./src/components/canvas/PCBCanvas/PCBControls/PCBControls.vue","webpack://pcb_analyzer/./src/components/canvas/PCBCanvas/PCBControls/PCBControls.vue?49c2","webpack://pcb_analyzer/./src/components/canvas/PCBCanvas/PCBInfo/PCBInfo.vue?1c51","webpack://pcb_analyzer/./src/components/canvas/PCBCanvas/PCBInfo/PCBInfo.vue","webpack://pcb_analyzer/./src/components/canvas/PCBCanvas/PCBInfo/PCBInfo.vue?3509","webpack://pcb_analyzer/./src/components/canvas/PCBCanvas/PCBCanvas.vue?a188","webpack://pcb_analyzer/./src/components/canvas/PCBCanvas/PCBCanvas.vue","webpack://pcb_analyzer/./src/components/canvas/PCBCanvas/PCBCanvas.vue?f58b","webpack://pcb_analyzer/./src/services/PCBFileTypeDetector.ts","webpack://pcb_analyzer/./src/components/forms/PCBUploadForm/PCBUploadForm.vue?4409","webpack://pcb_analyzer/./src/components/forms/PCBUploadForm/PCBUploadForm.vue","webpack://pcb_analyzer/./src/components/forms/PCBUploadForm/PCBUploadForm.vue?f1e2","webpack://pcb_analyzer/./src/components/lists/PCBComponentsList/PCBComponentItem/PCBComponentItem.vue?4ce5","webpack://pcb_analyzer/./src/components/lists/PCBComponentsList/PCBComponentItem/PCBComponentItem.vue","webpack://pcb_analyzer/./src/components/lists/PCBComponentsList/PCBComponentItem/PCBComponentItem.vue?9357","webpack://pcb_analyzer/./src/components/lists/PCBComponentsList/PCBComponentsList.vue?f5bc","webpack://pcb_analyzer/./src/components/lists/PCBComponentsList/PCBComponentsList.vue","webpack://pcb_analyzer/./src/components/lists/PCBComponentsList/PCBComponentsList.vue?11e0","webpack://pcb_analyzer/./src/components/lists/PCBLayersList/PCBLayerItem/PCBLayerItem.vue?03ec","webpack://pcb_analyzer/./src/components/lists/PCBLayersList/PCBLayerItem/PCBLayerItem.vue","webpack://pcb_analyzer/./src/components/lists/PCBLayersList/PCBLayerItem/PCBLayerItem.vue?d414","webpack://pcb_analyzer/./src/components/lists/PCBLayersList/PCBLayersList.vue?6d12","webpack://pcb_analyzer/./src/components/lists/PCBLayersList/PCBLayersList.vue","webpack://pcb_analyzer/./src/components/lists/PCBLayersList/PCBLayersList.vue?3a78","webpack://pcb_analyzer/./src/components/lists/PCBPlatesList/PCBPlateItem/PCBPlateItem.vue?355f","webpack://pcb_analyzer/./src/components/lists/PCBPlatesList/PCBPlateItem/PCBPlateItem.vue","webpack://pcb_analyzer/./src/components/lists/PCBPlatesList/PCBPlateItem/PCBPlateItem.vue?67e0","webpack://pcb_analyzer/./src/components/lists/PCBPlatesList/PCBPlatesList.vue?19d0","webpack://pcb_analyzer/./src/components/lists/PCBPlatesList/PCBPlatesList.vue","webpack://pcb_analyzer/./src/components/lists/PCBPlatesList/PCBPlatesList.vue?9ea8","webpack://pcb_analyzer/./src/components/lists/PCBNetsList/PCBNetItem/PCBNetItem.vue?e5cb","webpack://pcb_analyzer/./src/components/lists/PCBNetsList/PCBNetItem/PCBNetItem.vue","webpack://pcb_analyzer/./src/components/lists/PCBNetsList/PCBNetItem/PCBNetItem.vue?d556","webpack://pcb_analyzer/./src/components/lists/PCBNetsList/PCBNetsList.vue?adb0","webpack://pcb_analyzer/./src/components/lists/PCBNetsList/PCBNetsList.vue","webpack://pcb_analyzer/./src/components/lists/PCBNetsList/PCBNetsList.vue?d44c","webpack://pcb_analyzer/./src/components/aside/PCBAside/PCBAsideEmptyState/PCBAsideEmptyState.vue?6ef9","webpack://pcb_analyzer/./src/components/aside/PCBAside/PCBAsideEmptyState/PCBAsideEmptyState.vue","webpack://pcb_analyzer/./src/components/aside/PCBAside/PCBAsideEmptyState/PCBAsideEmptyState.vue?d0df","webpack://pcb_analyzer/./src/components/aside/PCBAside/PCBAside.vue?a874","webpack://pcb_analyzer/./src/components/aside/PCBAside/PCBAside.vue","webpack://pcb_analyzer/./src/components/aside/PCBAside/PCBAside.vue?b244","webpack://pcb_analyzer/./src/components/loaders/CircularRoller/CircularRoller.vue","webpack://pcb_analyzer/./src/components/loaders/CircularRoller/CircularRoller.vue?2df4","webpack://pcb_analyzer/./src/services/PCBFileReader.ts","webpack://pcb_analyzer/./src/types/ShapeTypes.ts","webpack://pcb_analyzer/./src/services/abstract/ContentParser.ts","webpack://pcb_analyzer/./src/services/parsers/GerberArchiveParser.ts","webpack://pcb_analyzer/./src/services/parsers/IPC2581XmlParser.ts","webpack://pcb_analyzer/./src/services/parsers/GerberFileParser.ts","webpack://pcb_analyzer/./src/services/parsers/ContentParserFactory.ts","webpack://pcb_analyzer/./src/models/IPC2581/IPC2581Component.ts","webpack://pcb_analyzer/./src/models/IPC2581/IPC2581General.ts","webpack://pcb_analyzer/./src/models/IPC2581/IPC2581Layer.ts","webpack://pcb_analyzer/./src/models/IPC2581/IPC2581Net.ts","webpack://pcb_analyzer/./src/models/IPC2581/IPC2581NonFunctional.ts","webpack://pcb_analyzer/./src/models/IPC2581/IPC2581Pin.ts","webpack://pcb_analyzer/./src/models/IPC2581/IPC2581Plate.ts","webpack://pcb_analyzer/./src/services/adapters/IPC2581Adapter/IPC2581ContentParser.ts","webpack://pcb_analyzer/./src/services/adapters/IPC2581Adapter/IPC2581EcadParser.ts","webpack://pcb_analyzer/./src/models/geometry/primitive/EllipseCurve.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Arc.ts","webpack://pcb_analyzer/./src/models/geometry/primitive/QuadraticBezierCurve.ts","webpack://pcb_analyzer/./src/models/geometry/primitive/Path.ts","webpack://pcb_analyzer/./src/models/geometry/primitive/RectChamPath.ts","webpack://pcb_analyzer/./src/models/geometry/primitive/RectRoundPath.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Circle.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Polyline.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Contour.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Diamond.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Donut.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Ellipse.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Hexagon.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Line.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Octagon.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Oval.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/RectCenter.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/RectCham.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/RectCorner.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/RectRound.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Thermal.ts","webpack://pcb_analyzer/./src/models/geometry/shapes/Triangle.ts","webpack://pcb_analyzer/./src/types/IPC2581XMLTypes.ts","webpack://pcb_analyzer/./src/services/adapters/IPC2581Adapter/IPC2581ShapeFactory.ts","webpack://pcb_analyzer/./src/services/adapters/IPC2581Adapter/IPC2581ShapeParser.ts","webpack://pcb_analyzer/./src/services/adapters/IPC2581Adapter/IPC2581ComponentParser.ts","webpack://pcb_analyzer/./src/services/adapters/IPC2581Adapter/IPC2581Adapter.ts","webpack://pcb_analyzer/./src/types/GerberTypes.ts","webpack://pcb_analyzer/./src/models/Gerber/GerberComponent.ts","webpack://pcb_analyzer/./src/models/Gerber/GerberGeneral.ts","webpack://pcb_analyzer/./src/models/Gerber/GerberLayer.ts","webpack://pcb_analyzer/./src/models/Gerber/GerberNet.ts","webpack://pcb_analyzer/./src/models/Gerber/GerberNonFunctional.ts","webpack://pcb_analyzer/./src/models/Gerber/GerberPlate.ts","webpack://pcb_analyzer/./src/services/abstract/PCBAdapter.ts","webpack://pcb_analyzer/./src/services/adapters/GerberAdapter/GerberLineClassifier.ts","webpack://pcb_analyzer/./src/services/adapters/GerberAdapter/GerberShapeFactory.ts","webpack://pcb_analyzer/./src/services/adapters/GerberAdapter/GerberElementFactory.ts","webpack://pcb_analyzer/./src/services/adapters/GerberAdapter/GerberFileParser.ts","webpack://pcb_analyzer/./src/services/adapters/GerberAdapter/DrillFileParser.ts","webpack://pcb_analyzer/./src/services/adapters/GerberAdapter/GerberJobFileParser.ts","webpack://pcb_analyzer/./src/services/adapters/GerberAdapter/GerberAdapter.ts","webpack://pcb_analyzer/./src/services/adapters/AdapterFactory.ts","webpack://pcb_analyzer/./src/views/PCBView.vue?bed3","webpack://pcb_analyzer/./src/views/PCBView.vue","webpack://pcb_analyzer/./src/views/PCBView.vue?ba56","webpack://pcb_analyzer/./src/router/index.ts","webpack://pcb_analyzer/./src/store/index.ts","webpack://pcb_analyzer/./src/assets/icons/PCBComponent.vue","webpack://pcb_analyzer/./src/assets/icons/PCBComponent.vue?cd15","webpack://pcb_analyzer/./src/assets/icons/PCBLayer.vue","webpack://pcb_analyzer/./src/assets/icons/PCBLayer.vue?7c14","webpack://pcb_analyzer/./src/assets/icons/PCBNet.vue","webpack://pcb_analyzer/./src/assets/icons/PCBNet.vue?412b","webpack://pcb_analyzer/./src/assets/icons/PCBPlate.vue","webpack://pcb_analyzer/./src/assets/icons/PCBPlate.vue?77a3","webpack://pcb_analyzer/./src/plugins/vuetify.ts","webpack://pcb_analyzer/./src/plugins/webfontloader.ts","webpack://pcb_analyzer/./src/main.ts","webpack://pcb_analyzer/webpack/bootstrap","webpack://pcb_analyzer/webpack/runtime/chunk loaded","webpack://pcb_analyzer/webpack/runtime/compat get default export","webpack://pcb_analyzer/webpack/runtime/create fake namespace object","webpack://pcb_analyzer/webpack/runtime/define property getters","webpack://pcb_analyzer/webpack/runtime/ensure chunk","webpack://pcb_analyzer/webpack/runtime/get javascript chunk filename","webpack://pcb_analyzer/webpack/runtime/get mini-css chunk filename","webpack://pcb_analyzer/webpack/runtime/global","webpack://pcb_analyzer/webpack/runtime/hasOwnProperty shorthand","webpack://pcb_analyzer/webpack/runtime/load script","webpack://pcb_analyzer/webpack/runtime/make namespace object","webpack://pcb_analyzer/webpack/runtime/node module decorator","webpack://pcb_analyzer/webpack/runtime/publicPath","webpack://pcb_analyzer/webpack/runtime/jsonp chunk loading","webpack://pcb_analyzer/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_router_view = _resolveComponent(\"router-view\")!\n  const _component_v_main = _resolveComponent(\"v-main\")!\n  const _component_v_app = _resolveComponent(\"v-app\")!\n\n  return (_openBlock(), _createBlock(_component_v_app, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_main, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_router_view)\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","<template>\n  <v-app>\n    <v-main>\n      <router-view/>\n    </v-main>\n  </v-app>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: 'App',\n\n  data() {\n    return {\n      //\n    };\n  },\n});\n</script>\n","import { render } from \"./App.vue?vue&type=template&id=7e520221&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export class FormatUtils {\n  public static formatFileSize(sizeInBytes: number): string {\n    if (sizeInBytes < 1024) {\n      return `${sizeInBytes} B`;\n    } if (sizeInBytes < 1024 * 1024) {\n      return `${(sizeInBytes / 1024).toFixed(2)} KB`;\n    } if (sizeInBytes < 1024 * 1024 * 1024) {\n      return `${(sizeInBytes / (1024 * 1024)).toFixed(2)} MB`;\n    }\n    return `${(sizeInBytes / (1024 * 1024 * 1024)).toFixed(2)} GB`;\n  }\n}\n","import { BoundingBox, Point } from '@/types/ShapeTypes';\n\nexport class GeometryUtils {\n  public static applyOffsetToPoint(point: Point, offset: Point): Point {\n    if (!offset) return point;\n\n    const isOffsetZero = offset.x === 0 && offset.y === 0;\n    if (isOffsetZero) return point;\n\n    return { x: point.x + offset.x, y: point.y + offset.y };\n  }\n\n  public static applyOffsetToPoints(points: Point[], offset: Point): Point[] {\n    if (!offset) return points;\n\n    const isOffsetZero = offset.x === 0 && offset.y === 0;\n    if (isOffsetZero) return points;\n\n    return points.map(({ x, y }) => ({ x: x + offset.x, y: y + offset.y }));\n  }\n\n  public static convertDegreesToRad(angle: number): number {\n    return (angle * Math.PI) / 180.0;\n  }\n\n  public static getDiagonalLines(circlePoints: Point[], offset: number): [Point, Point][] {\n    const separatedLines: [Point, Point][] = [];\n\n    for (let i = 0, mid = Math.round(circlePoints.length / 2); i < mid; i += 1) {\n      separatedLines.push([circlePoints[i], circlePoints[i + mid - 1]]);\n    }\n\n    const parallelLines = separatedLines\n      .map((line) => [GeometryUtils.getParallelLine(line, offset), GeometryUtils.getParallelLine(line, -offset)])\n      .flat();\n\n    return parallelLines;\n  }\n\n  public static getDistance(p1: Point, p2: Point): number {\n    const sideX = Math.abs(p1.x - p2.x);\n    const sideY = Math.abs(p1.y - p2.y);\n    const distance = Math.sqrt(sideX ** 2 + sideY ** 2);\n\n    return distance;\n  }\n\n  public static getParallelLine(line: [Point, Point], offset: number): [Point, Point] {\n    if (offset === 0) return line;\n\n    const [from, to] = line;\n    const [dx, dy] = [from.x - to.x, from.y - to.y];\n    const scale = offset / (dx * dx + dy * dy) ** 0.5;\n    const [ox, oy] = [-dy * scale, dx * scale];\n    const fromParallel: Point = { x: ox + from.x, y: oy + from.y };\n    const toParallel: Point = { x: ox + to.x, y: oy + to.y };\n\n    return [fromParallel, toParallel];\n  }\n\n  public static getPointAngle(center: Point, point: Point): number {\n    const dx = point.x - center.x;\n    const dy = point.y - center.y;\n    const angle = Math.atan2(dy, dx);\n\n    return angle;\n  }\n\n  public static getBoundingBox(points: Point[]): BoundingBox {\n    if (points.length === 0) {\n      return {\n        xMin: 0, xMax: 0, yMin: 0, yMax: 0,\n      };\n    }\n\n    const firstPoint = points[0];\n    let xMin = firstPoint.x;\n    let xMax = firstPoint.x;\n    let yMin = firstPoint.y;\n    let yMax = firstPoint.y;\n\n    for (let i = 1; i < points.length; i += 1) {\n      const { x, y } = points[i];\n      xMin = Math.min(xMin, x);\n      xMax = Math.max(xMax, x);\n      yMin = Math.min(yMin, y);\n      yMax = Math.max(yMax, y);\n    }\n\n    return {\n      xMin, xMax, yMin, yMax,\n    };\n  }\n\n  public static getOptimalPointForArc(radius: number): number {\n    if (radius <= 0) return 0;\n    const points = 4 + Math.sqrt(radius) * 6;\n    const roundedPoints = Math.round(points / 2) * 2;\n    return Math.min(12, Math.max(4, roundedPoints));\n  }\n\n  public static getMiddlePoint(p1: Point, p2: Point): Point {\n    return { x: (p1.x + p2.x) / 2, y: (p1.y + p2.y) / 2 };\n  }\n\n  public static inverseLerp(x: number, y: number, a: number): number {\n    return (a - x) / (y - x);\n  }\n\n  public static mirrorPoints(points: Point[], center: Point, isMirrored: boolean): Point[] {\n    if (!isMirrored) return points;\n    return points.map(({ x, y }) => ({ x: 2 * center.x - x, y }));\n  }\n\n  public static rotatePoint(point: Point, center: Point, angleRad: number): Point {\n    return {\n      x: Math.cos(angleRad) * (point.x - center.x) - Math.sin(angleRad) * (point.y - center.y) + center.x,\n      y: Math.sin(angleRad) * (point.x - center.x) + Math.cos(angleRad) * (point.y - center.y) + center.y,\n    };\n  }\n\n  public static rotatePoints(points: Point[], center: Point, angleDeg: number): Point[] {\n    if (!angleDeg || angleDeg === 0) return points;\n\n    const angleRad = GeometryUtils.convertDegreesToRad(angleDeg);\n\n    return points.map((point) => GeometryUtils.rotatePoint(point, center, angleRad));\n  }\n}\n","import { PCBElementInfo } from '@/models/abstract';\nimport { IPC2581NonstandardAttribute } from '@/types/IPC2581XMLTypes';\n\nexport class ParsingUtils {\n  public static parseBoolean(v: string | boolean): boolean {\n    if (typeof v === 'boolean') return v;\n    if (typeof v === 'string') return v.toLowerCase() === 'true';\n    return false;\n  }\n\n  public static parseXMLID(id: string | undefined): string {\n    if (!id) return '';\n    return id.split(':').pop() || '';\n  }\n\n  static parseNonstandardAttribute(attributes: IPC2581NonstandardAttribute[] | undefined): PCBElementInfo {\n    if (!attributes) return {};\n    return Object.fromEntries(attributes.filter((attr) => Boolean(attr.value)).map((attr) => [attr.name, attr.value]));\n  }\n}\n","import {\n  BufferGeometry, Color, Float32BufferAttribute, LineBasicMaterial, LineSegments,\n} from 'three';\nimport { LineSegments2 } from 'three/examples/jsm/lines/LineSegments2';\nimport { LineSegmentsGeometry } from 'three/examples/jsm/lines/LineSegmentsGeometry';\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial';\n\nimport { PCBColor } from '@/types/PCBTypes';\nimport { Point } from '@/types/ShapeTypes';\n\nexport class PCBDrawerUtils {\n  // Vertex and geometry constants\n  public static readonly COLOR_VERTEX_LEN = 4;\n  public static readonly POSITION_VERTEX_LEN = 3;\n  public static readonly POSITION_FACE_LEN = 6;\n\n  // Default values\n  public static readonly DEFAULT_ALPHA = 1;\n  public static readonly DEFAULT_COLOR = new Color('#000');\n  public static readonly DEFAULT_SCALE = 1;\n  public static readonly DEFAULT_THICKNESS = 1;\n  public static readonly DEFAULT_OPACITY = 1;\n\n  // Colors\n  public static readonly SELECTED_COLOR = new Color('#1867c0');\n\n  // Other\n  public static readonly UNSELECTED_OPACITY = 0.2;\n\n  public static adaptPointsToSegments(points: Point[]): Point[] {\n    if (points.length <= 1) return [...points];\n\n    const segments: Point[] = [points[0]];\n\n    for (let i = 1; i < points.length - 1; i += 1) {\n      segments.push(points[i], points[i]);\n    }\n\n    if (points.length > 1) {\n      segments.push(points[points.length - 1]);\n    }\n\n    return segments;\n  }\n\n  public static createThreeColor(color: PCBColor): Color {\n    return new Color().setRGB(color.r / 255, color.g / 255, color.b / 255);\n  }\n\n  public static convertPointsToVertices(points: Point[]): number[] {\n    return points.map(({ x, y }) => [x, y, 0]).flat();\n  }\n\n  public static convertPointsLenToFacesLen(len: number): number {\n    return Math.ceil((len * PCBDrawerUtils.POSITION_VERTEX_LEN) / PCBDrawerUtils.POSITION_FACE_LEN);\n  }\n\n  public static getPointAlfaChannelIndex(pointIndex: number): number {\n    return (pointIndex + 1) * PCBDrawerUtils.COLOR_VERTEX_LEN - 1;\n  }\n\n  public static createLineSegments(points: Point[], color: Color = PCBDrawerUtils.DEFAULT_COLOR): LineSegments {\n    const geometry = new BufferGeometry();\n    const vertices = PCBDrawerUtils.convertPointsToVertices(points);\n    const alfa = PCBDrawerUtils.DEFAULT_ALPHA;\n    const colors = points.map(() => [color.r, color.g, color.b, alfa]).flat();\n\n    geometry.setAttribute('position', new Float32BufferAttribute(vertices, PCBDrawerUtils.POSITION_VERTEX_LEN));\n    geometry.setAttribute('color', new Float32BufferAttribute(colors, PCBDrawerUtils.COLOR_VERTEX_LEN));\n\n    const material = new LineBasicMaterial({ vertexColors: true, transparent: true });\n    const line = new LineSegments(geometry, material);\n\n    return line;\n  }\n\n  public static createLineSegments2(\n    points: Point[],\n    thickness: number,\n    offsetWidth: number,\n    color: Color = PCBDrawerUtils.DEFAULT_COLOR,\n  ): LineSegments2 {\n    const geometry = new LineSegmentsGeometry();\n    geometry.setPositions(PCBDrawerUtils.convertPointsToVertices(points));\n\n    const material = new LineMaterial({\n      color: color.getHex(),\n      transparent: true,\n      linewidth: thickness,\n    });\n    material.resolution.set(offsetWidth, offsetWidth);\n\n    const line = new LineSegments2(geometry, material);\n    line.scale.set(PCBDrawerUtils.DEFAULT_SCALE, PCBDrawerUtils.DEFAULT_SCALE, PCBDrawerUtils.DEFAULT_SCALE);\n\n    return line;\n  }\n\n  public static changeLineSegmentsColor(line: LineSegments, color: Color): void {\n    const { geometry } = line;\n    const colors = geometry.attributes.color.array;\n    const { r, g, b } = color;\n\n    for (let i = 0; i < colors.length; i += PCBDrawerUtils.COLOR_VERTEX_LEN) {\n      colors[i] = r;\n      colors[i + 1] = g;\n      colors[i + 2] = b;\n    }\n\n    geometry.attributes.color.needsUpdate = true;\n  }\n}\n","export class ScrollUtils {\n  public static scrollToHiddenItem = (\n    virtualScrollRef: any,\n    targetIndex: number,\n    options = { itemHeight: 30 },\n  ): void => {\n    if (!virtualScrollRef || targetIndex < 0) return;\n\n    const containerHeight = virtualScrollRef.$el.clientHeight;\n    const { scrollTop } = virtualScrollRef.$el;\n    const itemHeight = virtualScrollRef.itemSize || options.itemHeight;\n\n    const itemTop = targetIndex * itemHeight;\n    const itemBottom = itemTop + itemHeight;\n    const viewportTop = scrollTop;\n    const viewportBottom = scrollTop + containerHeight;\n    const isVisible = itemTop >= viewportTop && itemBottom <= viewportBottom;\n\n    if (isVisible) return;\n\n    const itemsPerView = Math.floor(containerHeight / itemHeight);\n    const centerOffset = Math.floor(itemsPerView / 2);\n    const scrollToIndex = Math.max(0, targetIndex - centerOffset);\n    virtualScrollRef.scrollToIndex(scrollToIndex);\n  };\n}\n","import { v4 as uuidv4 } from 'uuid';\nimport { Point } from '@/types/ShapeTypes';\nimport { IPCBShape } from './PCBShape';\n\ntype PCBElemenValue = string | number | Date;\nexport type PCBElementInfo = { [key: string]: PCBElemenValue | { [key: string]: PCBElemenValue } };\n\nexport abstract class PCBElement implements IPCBShape {\n  private readonly idSource: string;\n  private visible: boolean;\n\n  protected constructor() {\n    this.idSource = uuidv4();\n    this.visible = true;\n  }\n\n  public get id(): string {\n    return this.idSource;\n  }\n\n  public setVisibility(isVisible: boolean): void {\n    this.visible = isVisible;\n  }\n\n  public getVisibility(): boolean {\n    return this.visible;\n  }\n\n  public abstract get name(): string;\n\n  public abstract getInfo(): PCBElementInfo;\n\n  public abstract getPoints(): Point[][];\n\n  public abstract getThickness(): number[];\n}\n","import { Point } from '@/types/ShapeTypes';\nimport { PCBElement, PCBElementInfo } from './PCBElement';\nimport { PCBShape } from './PCBShape';\n\nexport abstract class PCBComponent extends PCBElement {\n  private readonly info: PCBElementInfo;\n  protected readonly shapes: PCBShape<any, any>[];\n  protected points: Point[][];\n\n  constructor(info: PCBElementInfo, shapes: PCBShape<any, any>[]) {\n    super();\n    this.info = info;\n    this.shapes = shapes;\n    this.points = [];\n  }\n\n  public override get name(): string {\n    return this.getInfo().C as string;\n  }\n\n  public override getInfo(): PCBElementInfo {\n    return this.info;\n  }\n\n  public override getPoints(): Point[][] {\n    if (this.points.length > 0) return this.points;\n\n    this.points = this.shapes.flatMap((shape) => shape.getPoints()) || [];\n    return this.points;\n  }\n\n  public override getThickness(): number[] {\n    return this.shapes.flatMap((shape) => shape.getThickness());\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\nimport { PCBElement, PCBElementInfo } from './PCBElement';\nimport { PCBShape } from './PCBShape';\n\nexport abstract class PCBGeneral extends PCBElement {\n  private readonly info: PCBElementInfo;\n  private readonly shapes: PCBShape<any, any>[] | null;\n  private points: Point[][];\n\n  constructor(info: PCBElementInfo, shapes: PCBShape<any, any>[] | null) {\n    super();\n    this.info = info;\n    this.shapes = shapes;\n    this.points = [];\n  }\n\n  /* eslint-disable-next-line class-methods-use-this */\n  public override get name(): string {\n    return 'General';\n  }\n\n  public override getPoints(): Point[][] {\n    if (this.points.length > 0) return this.points;\n\n    const points = this.shapes?.flatMap((shape) => shape.getPoints()) || [];\n    this.points = points;\n\n    return points;\n  }\n\n  public override getInfo(): PCBElementInfo {\n    return this.info;\n  }\n\n  public override getThickness(): number[] {\n    return this.shapes?.flatMap((shape) => shape.getThickness()) || [];\n  }\n}\n","import { PCBColor } from '@/types/PCBTypes';\nimport { Point } from '@/types/ShapeTypes';\nimport { PCBElement, PCBElementInfo } from './PCBElement';\nimport { PCBNet } from './PCBNet';\nimport { PCBComponent } from './PCBComponent';\nimport { PCBNonFunctional } from './PCBNonFunctional';\n\nexport abstract class PCBLayer extends PCBElement {\n  private readonly layerName: string;\n  private readonly nets: PCBNet[];\n  private readonly components: PCBComponent[];\n  private readonly nonFunctionals: PCBNonFunctional[];\n  private order: number;\n  private color: PCBColor;\n  private info: PCBElementInfo;\n\n  constructor(layerName: string) {\n    super();\n    this.layerName = layerName;\n    this.color = { r: 0, g: 0, b: 0 };\n    this.info = {};\n    this.order = 0;\n    this.nets = [];\n    this.components = [];\n    this.nonFunctionals = [];\n  }\n\n  public override get name(): string {\n    return this.layerName;\n  }\n\n  public setColor(color: PCBColor): void {\n    this.color = { ...color };\n  }\n\n  public getColor(): PCBColor {\n    return this.color;\n  }\n\n  public getOrder(): number {\n    return this.order;\n  }\n\n  public setOrder(order: number): void {\n    this.order = order;\n  }\n\n  public override getInfo(): PCBElementInfo {\n    return this.info;\n  }\n\n  public setInfo(info: PCBElementInfo): void {\n    this.info = { ...this.info, ...info };\n  }\n\n  public addNet(net: PCBNet): void {\n    this.nets.push(net);\n  }\n\n  public getNets(): readonly PCBNet[] {\n    return this.nets;\n  }\n\n  public addComponent(component: PCBComponent): void {\n    this.components.push(component);\n  }\n\n  public getComponents(): readonly PCBComponent[] {\n    return this.components;\n  }\n\n  public addNonFunctional(nonFunctional: PCBNonFunctional): void {\n    this.nonFunctionals.push(nonFunctional);\n  }\n\n  public getNonFunctional(): readonly PCBNonFunctional[] {\n    return this.nonFunctionals;\n  }\n\n  public getElements(): readonly (PCBNet | PCBComponent | PCBNonFunctional)[] {\n    return [...this.nets, ...this.components, ...this.nonFunctionals];\n  }\n\n  public isEmpty(): boolean {\n    return [this.nets, this.components, this.nonFunctionals].every((arr) => arr.length === 0);\n  }\n\n  public getPoints(): Point[][] {\n    return this.getElements()\n      .map((element) => element.getPoints())\n      .flat();\n  }\n\n  public getThickness(): number[] {\n    return this.getElements()\n      .map((element) => element.getThickness())\n      .flat();\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\nimport { PCBElement, PCBElementInfo } from './PCBElement';\nimport { PCBShape } from './PCBShape';\n\nexport abstract class PCBNet extends PCBElement {\n  private readonly info: PCBElementInfo;\n  private readonly shape: PCBShape<any, any>;\n  private points: Point[][];\n\n  constructor(info: PCBElementInfo, shape: PCBShape<any, any>) {\n    super();\n    this.info = info;\n    this.shape = shape;\n    this.points = [];\n  }\n\n  public override getPoints(): Point[][] {\n    if (this.points.length > 0) return this.points;\n\n    const points = this.shape.getPoints() || [];\n    this.points = points;\n\n    return points;\n  }\n\n  public override getInfo(): PCBElementInfo {\n    return this.info;\n  }\n\n  public override getThickness(): number[] {\n    return this.shape.getThickness() || [];\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\nimport { PCBElement, PCBElementInfo } from './PCBElement';\nimport { PCBShape } from './PCBShape';\n\nexport abstract class PCBNonFunctional extends PCBElement {\n  private readonly info: PCBElementInfo;\n  private readonly shape: PCBShape<any, any>;\n  private points: Point[][];\n\n  constructor(info: PCBElementInfo, shape: PCBShape<any, any>) {\n    super();\n    this.info = info;\n    this.shape = shape;\n    this.points = [];\n  }\n\n  public override getPoints(): Point[][] {\n    if (this.points.length > 0) return this.points;\n\n    const points = this.shape.getPoints() || [];\n    this.points = points;\n\n    return points;\n  }\n\n  public override getInfo(): PCBElementInfo {\n    return this.info;\n  }\n\n  public override getThickness(): number[] {\n    return this.shape.getThickness() || [];\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\nimport { PCBPLateType } from '@/types/PCBTypes';\n\nimport { PCBGeneral } from './PCBGeneral';\nimport { PCBLayer } from './PCBLayer';\nimport { PCBComponent } from './PCBComponent';\nimport { PCBNet } from './PCBNet';\n\nexport abstract class PCBPlate {\n  private readonly plateName: string;\n  private general: PCBGeneral | null = null;\n  private layers: Map<string, PCBLayer> = new Map();\n\n  constructor(name: string) {\n    this.plateName = name;\n  }\n\n  public get name(): string {\n    return this.plateName;\n  }\n\n  public abstract get type(): PCBPLateType;\n\n  public addLayer(layer: PCBLayer): void {\n    if (!this.layers.has(layer.name)) {\n      this.layers.set(layer.name, layer);\n    }\n  }\n\n  public getLayer(name: string): PCBLayer | undefined {\n    return this.layers.get(name);\n  }\n\n  public setGeneral(general: PCBGeneral): void {\n    this.general = general;\n  }\n\n  public getGeneral(): PCBGeneral | null {\n    return this.general;\n  }\n\n  public getLayers(): PCBLayer[] {\n    return Array.from(this.layers.values());\n  }\n\n  public getNets(): PCBNet[] {\n    return Array.from(this.layers.values())\n      .map((layer) => layer.getNets())\n      .flat();\n  }\n\n  public getComponents(): PCBComponent[] {\n    return Array.from(this.layers.values())\n      .map((layer) => layer.getComponents())\n      .flat();\n  }\n\n  public getPoints(): Point[][] {\n    const allPoints: Point[][] = [];\n    this.layers.forEach((layer) => {\n      const layerPoints = layer.getPoints();\n      allPoints.push(...layerPoints);\n    });\n\n    allPoints.push(...(this.general?.getPoints() || []));\n\n    return allPoints;\n  }\n\n  public removeLayer(name: string): boolean {\n    return this.layers.delete(name);\n  }\n\n  public forEachLayer(callback: (layer: PCBLayer) => void): void {\n    this.layers.forEach(callback);\n  }\n\n  public findLayer(callback: (layer: PCBLayer) => boolean): PCBLayer | undefined {\n    return Array.from(this.layers.values()).find(callback);\n  }\n}\n","import { Point, ShapeStyles } from '@/types/ShapeTypes';\n\nexport interface IPCBShape {\n  getPoints(): Point[][];\n  getThickness(): number[];\n}\nexport abstract class PCBShape<C, S> implements IPCBShape {\n  static readonly DEFAULT_SHAPE_STYLES: ShapeStyles = {\n    lineWidth: 1,\n    rotation: 0,\n    mirror: false,\n    xOffset: 0,\n    yOffset: 0,\n  };\n  protected readonly coords: C;\n  protected readonly styles: ShapeStyles & S;\n\n  constructor(coords: C, styles: Partial<ShapeStyles> & S) {\n    this.coords = coords;\n    this.styles = { ...PCBShape.DEFAULT_SHAPE_STYLES, ...styles };\n  }\n\n  public abstract getPoints(): Point[][];\n\n  public abstract getThickness(): number[];\n}\n","/* eslint-disable no-param-reassign */\nimport {\n  Box3,\n  Clock,\n  Color,\n  Intersection,\n  LineSegments,\n  Material,\n  Matrix4,\n  Object3D,\n  PerspectiveCamera,\n  Quaternion,\n  Raycaster,\n  Scene,\n  Sphere,\n  Spherical,\n  Vector2,\n  Vector3,\n  Vector4,\n  WebGLRenderer,\n} from 'three';\nimport { LineSegments2 } from 'three/examples/jsm/lines/LineSegments2';\nimport { throttle } from 'lodash';\nimport CameraControls from 'camera-controls';\n\nimport { GeometryUtils, PCBDrawerUtils } from '@/utils';\nimport { BoundingBox, Point } from '@/types/ShapeTypes';\nimport {\n  PCBComponent, PCBElement, PCBGeneral, PCBLayer, PCBNet, PCBPlate,\n} from '@/models/abstract';\nimport {\n  IMeshRangeData,\n  IMouseEventWithLayer,\n  IPCBDrawerGeneral,\n  IPCBDrawerLayer,\n  IPCBDrawerLayerElement,\n  IPCBDrawerParameters,\n  IResizeObserverEntry,\n  PCBDrawerLayers,\n  PCBDrawerMeshRangeData,\n  PointTransformFunction,\n} from '@/types/PCBDrawerTypes';\n\nconst subsetOfTHREE = {\n  Box3,\n  Matrix4,\n  Quaternion,\n  Raycaster,\n  Sphere,\n  Spherical,\n  Vector2,\n  Vector3,\n  Vector4,\n};\n\nCameraControls.install({ THREE: subsetOfTHREE });\n\nexport class PCBDrawer extends EventTarget {\n  private static readonly LAST_LAYER_INDEX = 31;\n  private static readonly SELECTED_LINE_WIDTH = 2;\n\n  private clock!: Clock;\n  private parameters!: IPCBDrawerParameters;\n  private scene!: Scene;\n  private camera!: PerspectiveCamera;\n  private renderer!: WebGLRenderer;\n  private raycaster!: Raycaster;\n  private controls!: CameraControls;\n  private readonly container: HTMLElement;\n  private resizeObserver: ResizeObserver | null = null;\n\n  private boardSizes: BoundingBox = {\n    xMin: 0,\n    xMax: 0,\n    yMin: 0,\n    yMax: 0,\n  };\n  // change?\n  private curScaleAndCenterPoints: PointTransformFunction | null = null;\n  // remove?\n  private generalElementData: IPCBDrawerGeneral | null = null;\n  private layersElementsData: PCBDrawerLayers = {};\n  private layersMeshesData: Record<string, LineSegments[]> = {};\n  private meshElementsMap: WeakMap<Object3D, PCBElement[]> = new WeakMap();\n  private meshRangeData: PCBDrawerMeshRangeData = {};\n  // Array?\n  private selectedElementMeshes: LineSegments2[] = [];\n\n  constructor(container: HTMLElement) {\n    super();\n    this.container = container;\n    this.initializeComponents();\n  }\n\n  private initializeComponents(): void {\n    this.clock = new Clock();\n    this.parameters = this.createDefaultParameters();\n    this.scene = new Scene();\n    this.camera = this.createCamera();\n    this.renderer = this.createRenderer();\n    this.raycaster = new Raycaster();\n    this.controls = this.createControls();\n    this.initResizeObserver();\n    this.setupEventHandlers();\n  }\n\n  public destroy(): void {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n      this.resizeObserver = null;\n    }\n    this.controls.removeAllEventListeners();\n    this.controls.dispose();\n  }\n\n  public draw(): void {\n    const delta = this.clock.getDelta();\n    this.controls.update(delta);\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  public setPCB(pcbPlate: PCBPlate): void {\n    console.time('allPoints');\n    const platePoints = pcbPlate.getPoints().flat();\n    console.timeEnd('allPoints');\n    console.log('allPCBPoints', platePoints);\n\n    this.boardSizes = GeometryUtils.getBoundingBox(platePoints);\n    this.curScaleAndCenterPoints = this.createPointTransform(this.boardSizes);\n\n    this.generalElementData = this.parseGeneral(pcbPlate.getGeneral());\n    this.layersElementsData = this.parsePCBLayers(pcbPlate.getLayers());\n  }\n\n  public drawPCB(): void {\n    this.clearScene();\n    this.drawLayers(this.layersElementsData);\n    this.drawGeneral(this.generalElementData);\n    this.enableLayer(PCBDrawer.LAST_LAYER_INDEX);\n    this.draw();\n  }\n\n  public clear(): void {\n    this.clearScene();\n    this.curScaleAndCenterPoints = null;\n    this.generalElementData = null;\n    this.layersElementsData = {};\n    this.layersMeshesData = {};\n    this.meshElementsMap = new WeakMap();\n    this.meshRangeData = {};\n    this.selectedElementMeshes = [];\n    this.draw();\n  }\n\n  public changeLayerColor(layer: PCBLayer): void {\n    const color = PCBDrawerUtils.createThreeColor(layer.getColor());\n    const meshes = this.layersMeshesData[layer.name];\n    meshes.forEach((mesh) => {\n      PCBDrawerUtils.changeLineSegmentsColor(mesh, color);\n    });\n\n    this.draw();\n  }\n\n  public selectLayer(layer: PCBLayer | null): void {\n    // review\n    if (!layer || layer.isEmpty() || !layer.getVisibility()) {\n      this.resetLayersOpacity();\n    } else {\n      this.highlightLayerOpacity(layer);\n    }\n    this.draw();\n  }\n\n  public selectElement(element: PCBElement | null): void {\n    this.removeSelectedElement();\n    this.resetLayersOpacity();\n\n    if (!element || !element.getVisibility()) {\n      this.draw();\n      return;\n    }\n\n    this.drawSelectedElement(element);\n    this.focusOnMesh(this.selectedElementMeshes[0]);\n    this.draw();\n  }\n\n  public toggleLayerVisibility(layer: PCBLayer, visible: boolean): void {\n    const action = visible ? 'enable' : 'disable';\n    const layerIndex = this.layersElementsData[layer.name].index;\n    this.raycaster.layers[action](layerIndex);\n    this.camera.layers[action](layerIndex);\n    this.draw();\n  }\n\n  public toggleElementVisibility(element: PCBElement, visible: boolean): void {\n    const rangeData = this.meshRangeData[element.id];\n    if (!rangeData) return;\n    this.toggleMeshesVisibility(rangeData, visible);\n    this.draw();\n  }\n\n  public resetLayersVisibility(): void {\n    this.raycaster.layers.enableAll();\n    this.camera.layers.enableAll();\n    this.draw();\n  }\n\n  public resetElementsVisibility(elements: PCBElement[]): void {\n    elements.forEach((element) => {\n      const elemMeshes = this.meshRangeData[element.id];\n      if (!elemMeshes) return;\n      this.toggleMeshesVisibility(elemMeshes, true);\n    });\n    this.draw();\n  }\n\n  public zoomCamera(value: number): void {\n    this.controls.dolly(value);\n    this.draw();\n  }\n\n  public rotateCameraZ(angle: number): void {\n    this.scene.rotateZ(angle);\n    this.draw();\n  }\n\n  public resetCamera(): void {\n    this.controls.reset();\n    this.rotateCameraZ(this.scene.rotation.z * -1);\n    this.draw();\n  }\n\n  private createDefaultParameters(): IPCBDrawerParameters {\n    const containerWidth = this.container.offsetWidth;\n    const containerHeight = this.container.offsetHeight;\n\n    return {\n      angle: 45,\n      aspect: containerWidth / containerHeight,\n      near: 1,\n      far: 1000,\n      background: 0xf4f4f4,\n      cameraZPos: 200,\n    };\n  }\n\n  private createCamera(): PerspectiveCamera {\n    const camera = new PerspectiveCamera(\n      this.parameters.angle,\n      this.parameters.aspect,\n      this.parameters.near,\n      this.parameters.far,\n    );\n    camera.position.set(0, 0, this.parameters.cameraZPos);\n    camera.lookAt(0, 0, 0);\n    return camera;\n  }\n\n  private createRenderer(): WebGLRenderer {\n    const renderer = new WebGLRenderer({ antialias: true });\n    const containerWidth = this.container.offsetWidth;\n    const containerHeight = this.container.offsetHeight;\n\n    renderer.setSize(containerWidth, containerHeight);\n    renderer.setClearColor(this.parameters.background);\n    this.container.appendChild(renderer.domElement);\n    return renderer;\n  }\n\n  private createControls(): CameraControls {\n    const controls = new CameraControls(this.camera, this.renderer.domElement);\n    controls.smoothTime = 0;\n    controls.draggingSmoothTime = 0;\n    controls.dollyToCursor = true;\n    controls.minDistance = this.parameters.near;\n    controls.maxDistance = this.parameters.far;\n    controls.mouseButtons.left = CameraControls.ACTION.NONE;\n    controls.mouseButtons.right = CameraControls.ACTION.TRUCK;\n    controls.touches.one = CameraControls.ACTION.NONE;\n    return controls;\n  }\n\n  private setupEventHandlers(): void {\n    const bindedDraw = this.draw.bind(this);\n    this.controls.addEventListener('control', bindedDraw);\n    this.controls.addEventListener('controlstart', bindedDraw);\n    this.controls.addEventListener('controlend', bindedDraw);\n    this.controls.addEventListener('update', this.recalculateLinesThickness.bind(this));\n\n    this.renderer.domElement.addEventListener('click', this.handleClick.bind(this));\n  }\n\n  private drawLayers(layers: PCBDrawerLayers): void {\n    Object.entries(layers).forEach(([layerKey, layer]) => {\n      this.drawLayer(layerKey, layer);\n    });\n  }\n\n  private drawLayer(layerKey: string, layer: IPCBDrawerLayer): void {\n    const allPoints = layer.elements.map(({ points }: IPCBDrawerLayerElement) => points).flat();\n    const line = this.drawPoints(allPoints, layer.color, layer.index);\n    this.enableLayer(layer.index);\n\n    if (!Array.isArray(this.layersMeshesData[layerKey])) {\n      this.layersMeshesData[layerKey] = [];\n    }\n\n    this.layersMeshesData[layerKey].push(line);\n    this.meshElementsMap.set(\n      line,\n      layer.elements.map((element: IPCBDrawerLayerElement) => element.points.map(() => element.element)).flat(),\n    );\n    this.setElementsMeshesData(layer.elements, line);\n  }\n\n  private drawGeneral(general: IPCBDrawerGeneral | null): void {\n    if (!general) return;\n    this.drawPoints(general.points, general.color, general.index);\n  }\n\n  private drawPoints(points: Point[], color: Color, index: number): LineSegments {\n    const line = PCBDrawerUtils.createLineSegments(points, color);\n    line.layers.set(index);\n    line.renderOrder = index;\n    this.scene.add(line);\n    return line;\n  }\n\n  private setElementsMeshesData(elements: IPCBDrawerLayerElement[], mesh: LineSegments): void {\n    let rangeAcc = 0;\n\n    elements.forEach(({ element, points }) => {\n      if (!(element instanceof PCBNet || element instanceof PCBComponent)) {\n        rangeAcc += points.length;\n        return;\n      }\n\n      if (!this.meshRangeData[element.id]) {\n        this.meshRangeData[element.id] = [];\n      }\n\n      this.meshRangeData[element.id].push({\n        mesh,\n        range: [rangeAcc, rangeAcc + points.length] as const,\n      });\n      rangeAcc += points.length;\n    });\n  }\n\n  private adaptElementsPoints({ element, points, thickness }: IPCBDrawerLayerElement): IPCBDrawerLayerElement {\n    return {\n      element,\n      points: PCBDrawerUtils.adaptPointsToSegments(this.curScaleAndCenterPoints!(points)),\n      thickness: this.scaleThickness(thickness),\n    };\n  }\n\n  private parseGeneral(general: PCBGeneral | null): IPCBDrawerGeneral | null {\n    if (!general) return null;\n\n    const points = general.getPoints();\n    if (points.length === 0) return null;\n\n    return {\n      points: points.map((p) => PCBDrawerUtils.adaptPointsToSegments(this.curScaleAndCenterPoints!(p))).flat(),\n      color: PCBDrawerUtils.DEFAULT_COLOR,\n      index: PCBDrawer.LAST_LAYER_INDEX,\n    };\n  }\n\n  private parsePCBLayerElements(elements: readonly PCBElement[]): IPCBDrawerLayerElement[] {\n    return elements\n      .map((element) => element.getPoints().map((points, i) => ({\n        element,\n        points,\n        thickness: element.getThickness()?.[i] || PCBDrawerUtils.DEFAULT_THICKNESS,\n      })))\n      .flat()\n      .map((element) => this.adaptElementsPoints(element));\n  }\n\n  private parsePCBLayers(layers: PCBLayer[]): PCBDrawerLayers {\n    const layersData: PCBDrawerLayers = Object.create(null);\n    const layersToDraw = layers\n      .filter((l) => !l.isEmpty())\n      .sort((l1, l2) => l2.getOrder() - l1.getOrder());\n\n    layersToDraw.forEach((layer, index) => {\n      const layerElements: IPCBDrawerLayerElement[] = this.parsePCBLayerElements(layer.getElements());\n      layersData[layer.name] = {\n        elements: layerElements,\n        color: PCBDrawerUtils.createThreeColor(layer.getColor()),\n        index,\n      };\n    });\n\n    return layersData;\n  }\n\n  private recalculateLinesThickness() {\n    const thicknessScale = Math.abs(this.parameters.cameraZPos / this.camera.position.z);\n    this.selectedElementMeshes.forEach((line) => {\n      line.material.linewidth = PCBDrawer.SELECTED_LINE_WIDTH * thicknessScale;\n    });\n  }\n\n  private createSelectedMesh(element: PCBElement): LineSegments2 {\n    const adaptedPoints = element\n      .getPoints()\n      .map((points) => this.curScaleAndCenterPoints!(PCBDrawerUtils.adaptPointsToSegments(points)));\n\n    const mesh = PCBDrawerUtils.createLineSegments2(\n      adaptedPoints.flat(),\n      this.renderer.domElement.offsetWidth,\n      PCBDrawer.SELECTED_LINE_WIDTH,\n      PCBDrawerUtils.SELECTED_COLOR,\n    );\n\n    return mesh;\n  }\n\n  private drawSelectedElement(element: PCBElement): void {\n    if (element.getPoints().length === 0) return;\n\n    this.selectedElementMeshes.push(this.createSelectedMesh(element));\n    this.selectedElementMeshes.forEach((mesh) => {\n      mesh.layers.set(PCBDrawer.LAST_LAYER_INDEX);\n      mesh.renderOrder = PCBDrawer.LAST_LAYER_INDEX;\n      this.scene.add(mesh);\n    });\n\n    this.recalculateLinesThickness();\n  }\n\n  private removeSelectedElement(): void {\n    if (this.selectedElementMeshes.length === 0) return;\n\n    this.selectedElementMeshes.forEach((mesh) => {\n      this.scene.remove(mesh);\n    });\n    this.selectedElementMeshes = [];\n  }\n\n  private handleClick(event: MouseEvent): void {\n    this.removeSelectedElement();\n\n    const mouseEvent = event as IMouseEventWithLayer;\n    const { domElement } = this.renderer;\n    const rect = domElement.getBoundingClientRect();\n    const x = ((mouseEvent.clientX - rect.left) / domElement.offsetWidth) * 2 - 1;\n    const y = -((mouseEvent.clientY - rect.top) / domElement.offsetHeight) * 2 + 1;\n\n    this.updateRaycasterThreshold();\n    this.raycaster.setFromCamera(new Vector2(x, y), this.camera);\n    const intersects = this.raycaster.intersectObjects(this.scene.children);\n    const element = this.getFirstIntersectedElement(intersects as Intersection<LineSegments>[]);\n\n    this.dispatchEvent(new CustomEvent('elementClick', { detail: element }));\n\n    if (element) {\n      this.drawSelectedElement(element);\n    }\n\n    this.draw();\n  }\n\n  private updateRaycasterThreshold(): void {\n    const cameraZPos = Math.abs(this.camera.position.z);\n    const MIN_DISTANCE = this.parameters.near;\n    const MAX_DISTANCE = 500;\n    const MIN_THRESHOLD = 0.005;\n    const threshold = Math.max(GeometryUtils.inverseLerp(MIN_DISTANCE, MAX_DISTANCE, cameraZPos), MIN_THRESHOLD);\n\n    this.raycaster.params.Line!.threshold = threshold;\n    this.raycaster.params.Points!.threshold = threshold;\n    this.raycaster.params.Mesh!.threshold = threshold;\n  }\n\n  private getFirstIntersectedElement(intersects: Intersection<LineSegments | LineSegments2>[]): PCBElement | null {\n    if (intersects.length === 0) return null;\n\n    for (let i = 0; i < intersects.length; i += 1) {\n      const intersect = intersects[i];\n\n      if (intersect.object instanceof LineSegments) {\n        const alfaIndex = PCBDrawerUtils.getPointAlfaChannelIndex(intersect.index!);\n        const colors = intersect.object.geometry.attributes.color.array;\n        const isVisible = colors[alfaIndex] !== 0;\n        /* eslint-disable no-continue */\n        if (!isVisible) continue;\n\n        const allElements = this.meshElementsMap.get(intersect.object) || [];\n        const element = allElements[intersect.index!];\n\n        if (element) return element;\n      }\n\n      if (intersect.object instanceof LineSegments2) {\n        if (!intersect.object.visible || !intersect.faceIndex) continue;\n\n        const allElements = this.meshElementsMap.get(intersect.object) || [];\n        const element = allElements[intersect.faceIndex];\n\n        if (element) return element;\n      }\n    }\n\n    return null;\n  }\n\n  private enableLayer(index: number): void {\n    this.raycaster.layers.enable(index);\n    this.camera.layers.enable(index);\n  }\n\n  private scaleThickness(thickness: number): number {\n    if (!thickness) return PCBDrawerUtils.DEFAULT_THICKNESS;\n\n    const boardWidth = this.boardSizes.xMax - this.boardSizes.xMin;\n    const screenWidth = this.renderer.domElement.offsetWidth;\n    const thicknessInPx = (screenWidth / boardWidth) * thickness;\n\n    return thicknessInPx;\n  }\n\n  private clearScene(): void {\n    while (this.scene.children.length > 0) {\n      this.scene.remove(this.scene.children[0]);\n    }\n  }\n\n  private createPointTransform(sizes: BoundingBox): PointTransformFunction {\n    const scale = this.parameters.far / this.parameters.cameraZPos;\n\n    const COEFF_PADDING = 40;\n    const paddings = this.renderer.domElement.offsetWidth / COEFF_PADDING;\n    const xScale = this.renderer.domElement.offsetWidth / scale - paddings;\n    const yScale = this.renderer.domElement.offsetHeight / scale - paddings;\n\n    const width = sizes.xMax - sizes.xMin;\n    const height = sizes.yMax - sizes.yMin;\n\n    const [curScale, maxSize] = width > height ? [xScale, width] : [yScale, height];\n\n    const scaledWidth = GeometryUtils.inverseLerp(0, maxSize, width) * curScale;\n    const scaledHeight = GeometryUtils.inverseLerp(0, maxSize, height) * curScale;\n\n    return (points: Point[]): Point[] => points.map((point) => {\n      const x = GeometryUtils.inverseLerp(0, maxSize, point.x - sizes.xMin) * curScale - scaledWidth / 2;\n      const y = GeometryUtils.inverseLerp(0, maxSize, point.y - sizes.yMin) * curScale - scaledHeight / 2;\n\n      return { x, y };\n    });\n  }\n\n  private resize(width: number, height: number): void {\n    this.renderer.setSize(width, height);\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n    this.draw();\n  }\n\n  private initResizeObserver(): void {\n    const THROTTLE_DELAY = 400;\n    const throttledResize = throttle((width: number, height: number) => this.resize(width, height), THROTTLE_DELAY);\n\n    this.resizeObserver = new ResizeObserver((entries) => {\n      entries.forEach((entry: IResizeObserverEntry) => {\n        const { width, height } = entry.contentRect;\n        throttledResize(width, height);\n      });\n    });\n\n    this.resizeObserver.observe(this.container);\n  }\n\n  private highlightLayerOpacity(layer: PCBLayer): void {\n    this.setLayersOpacity((layerName) => (\n      layerName === layer.name ? PCBDrawerUtils.DEFAULT_OPACITY : PCBDrawerUtils.UNSELECTED_OPACITY\n    ));\n  }\n\n  private resetLayersOpacity(): void {\n    this.setLayersOpacity(() => PCBDrawerUtils.DEFAULT_OPACITY);\n  }\n\n  private setLayersOpacity(getOpacity: (layerName: string) => number): void {\n    Object.entries(this.layersMeshesData).forEach(([layerName, meshes]) => {\n      const opacity = getOpacity(layerName);\n      meshes.forEach((mesh) => {\n        (mesh.material as Material).opacity = opacity;\n      });\n    });\n  }\n\n  private focusOnMesh(mesh: Object3D): void {\n    if (!mesh) return;\n\n    const PADDING = 5;\n    this.controls.fitToBox(mesh, false, {\n      paddingTop: PADDING,\n      paddingLeft: PADDING,\n      paddingBottom: PADDING,\n      paddingRight: PADDING,\n    });\n  }\n\n  /* eslint-disable class-methods-use-this */\n  private toggleMeshVisibility(element: IMeshRangeData, visible: boolean): void {\n    const { mesh, range } = element;\n    const colors = mesh.geometry.attributes.color.array;\n    const [start, end] = range!;\n\n    for (let i = start; i < end; i += 1) {\n      const alfaIndex = PCBDrawerUtils.getPointAlfaChannelIndex(i);\n      colors[alfaIndex] = Number(visible);\n    }\n\n    mesh.geometry.attributes.color.needsUpdate = true;\n  }\n\n  private toggleMeshesVisibility(elemMeshes: IMeshRangeData[], isVisible: boolean): void {\n    if (elemMeshes.length === 0) return;\n    elemMeshes.forEach((meshData) => this.toggleMeshVisibility(meshData, isVisible));\n  }\n}\n","export type PCBColor = { r: number; g: number; b: number };\n\nexport enum PCBControlsEvents {\n  ZoomIn = 'zoomIn',\n  ZoomOut = 'zoomOut',\n  RotateLeft = 'rotateLeft',\n  RotateRight = 'rotateRight',\n  ResetView = 'resetView',\n}\n\nexport enum PCBElementsType {\n  Layer = 'layer',\n  Component = 'component',\n  Net = 'net',\n  NonFunctional = 'nonFunctional',\n}\n\nexport enum PCBPLateType {\n  IPC2581 = 'IPC2581',\n  GERBER = 'GERBER',\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\n\nimport { PCBControlsEvents } from '@/types/PCBTypes';\n\ninterface ControlButton {\n  icon: string;\n  event: PCBControlsEvents;\n  ariaLabel: string;\n  title: string;\n  variant?: 'flat' | 'text';\n}\n\ninterface Emits {\n  (e: 'click', type: PCBControlsEvents): void;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBControls',\n  emits: [\"click\"],\n  setup(__props, { emit: __emit }) {\n\nconst emit = __emit;\n\nconst controls: readonly ControlButton[] = [\n  {\n    icon: 'mdi-magnify-plus-outline',\n    event: PCBControlsEvents.ZoomIn,\n    ariaLabel: 'Zoom in',\n    title: 'Zoom in',\n    variant: 'flat',\n  },\n  {\n    icon: 'mdi-magnify-minus-outline',\n    event: PCBControlsEvents.ZoomOut,\n    ariaLabel: 'Zoom out',\n    title: 'Zoom out',\n    variant: 'text',\n  },\n  {\n    icon: 'mdi-rotate-left',\n    event: PCBControlsEvents.RotateLeft,\n    ariaLabel: 'Rotate left',\n    title: 'Rotate left',\n    variant: 'text',\n  },\n  {\n    icon: 'mdi-rotate-right',\n    event: PCBControlsEvents.RotateRight,\n    ariaLabel: 'Rotate right',\n    title: 'Rotate right',\n    variant: 'text',\n  },\n  {\n    icon: 'mdi-crop-free',\n    event: PCBControlsEvents.ResetView,\n    ariaLabel: 'Reset view',\n    title: 'Reset view',\n    variant: 'text',\n  },\n] as const;\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, {\n    variant: \"flat\",\n    class: \"pcb-controls\"\n  }, {\n    default: _withCtx(() => [\n      (_openBlock(), _createElementBlock(_Fragment, null, _renderList(controls, (control) => {\n        return _createVNode(_component_v_btn, {\n          size: \"small\",\n          key: control.event,\n          icon: control.icon,\n          variant: control.variant || 'text',\n          \"aria-label\": control.ariaLabel,\n          title: control.title,\n          onClick: ($event: any) => (emit('click', control.event))\n        }, null, 8, [\"icon\", \"variant\", \"aria-label\", \"title\", \"onClick\"])\n      }), 64))\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <v-card\n    variant=\"flat\"\n    class=\"pcb-controls\"\n  >\n    <v-btn\n      v-for=\"control in controls\"\n      size=\"small\"\n      :key=\"control.event\"\n      :icon=\"control.icon\"\n      :variant=\"control.variant || 'text'\"\n      :aria-label=\"control.ariaLabel\"\n      :title=\"control.title\"\n      @click=\"emit('click', control.event)\"\n    />\n  </v-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineEmits } from 'vue';\nimport { PCBControlsEvents } from '@/types/PCBTypes';\n\ninterface ControlButton {\n  icon: string;\n  event: PCBControlsEvents;\n  ariaLabel: string;\n  title: string;\n  variant?: 'flat' | 'text';\n}\n\ninterface Emits {\n  (e: 'click', type: PCBControlsEvents): void;\n}\n\nconst emit = defineEmits<Emits>();\n\nconst controls: readonly ControlButton[] = [\n  {\n    icon: 'mdi-magnify-plus-outline',\n    event: PCBControlsEvents.ZoomIn,\n    ariaLabel: 'Zoom in',\n    title: 'Zoom in',\n    variant: 'flat',\n  },\n  {\n    icon: 'mdi-magnify-minus-outline',\n    event: PCBControlsEvents.ZoomOut,\n    ariaLabel: 'Zoom out',\n    title: 'Zoom out',\n    variant: 'text',\n  },\n  {\n    icon: 'mdi-rotate-left',\n    event: PCBControlsEvents.RotateLeft,\n    ariaLabel: 'Rotate left',\n    title: 'Rotate left',\n    variant: 'text',\n  },\n  {\n    icon: 'mdi-rotate-right',\n    event: PCBControlsEvents.RotateRight,\n    ariaLabel: 'Rotate right',\n    title: 'Rotate right',\n    variant: 'text',\n  },\n  {\n    icon: 'mdi-crop-free',\n    event: PCBControlsEvents.ResetView,\n    ariaLabel: 'Reset view',\n    title: 'Reset view',\n    variant: 'text',\n  },\n] as const;\n</script>\n\n<style lang=\"scss\">\n.pcb-controls {\n  position: absolute;\n  bottom: 8px;\n  right: 8px;\n  z-index: 1;\n  display: flex;\n  flex-direction: row;\n  padding: 4px;\n  gap: 4px;\n}\n</style>\n","import script from \"./PCBControls.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBControls.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBControls.vue?vue&type=style&index=0&id=5f491c09&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-info-content\" }\nconst _hoisted_2 = { class: \"text-caption text-grey-darken-4\" }\nconst _hoisted_3 = { key: 0 }\nconst _hoisted_4 = {\n  key: 1,\n  class: \"text-caption text-grey-darken-1 text-end\"\n}\n\n\nimport { PCBElementInfo } from '@/models/abstract';\n\ninterface Props {\n  infoData: PCBElementInfo;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBInfo',\n  props: {\n    infoData: {}\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_card = _resolveComponent(\"v-card\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, { class: \"pcb-info\" }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.infoData, (value, key) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"pcb-info-content__row\",\n            key: key\n          }, [\n            _createElementVNode(\"span\", _hoisted_2, _toDisplayString(key) + \":\", 1),\n            (typeof value === 'object')\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(value, (subValue, subKey) => {\n                    return (_openBlock(), _createElementBlock(\"span\", {\n                      class: \"text-grey-darken-1 text-end text-caption d-block\",\n                      key: subKey\n                    }, _toDisplayString(subKey) + \":\" + _toDisplayString(subValue), 1))\n                  }), 128))\n                ]))\n              : (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(value), 1))\n          ]))\n        }), 128))\n      ])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <v-card class=\"pcb-info\">\n    <div class=\"pcb-info-content\">\n      <div\n        v-for=\"(value, key) in infoData\"\n        class=\"pcb-info-content__row\"\n        :key=\"key\"\n      >\n        <span class=\"text-caption text-grey-darken-4\">{{ key }}:</span>\n        <span v-if=\"typeof value === 'object'\">\n          <span\n            v-for=\"(subValue, subKey) in value\"\n            class=\"text-grey-darken-1 text-end text-caption d-block\"\n            :key=\"subKey\"\n          >\n            {{ subKey }}:{{ subValue }}\n          </span>\n        </span>\n        <span\n          v-else\n          class=\"text-caption text-grey-darken-1 text-end\"\n        >\n          {{ value }}\n        </span>\n      </div>\n    </div>\n  </v-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineProps } from 'vue';\nimport { PCBElementInfo } from '@/models/abstract';\n\ninterface Props {\n  infoData: PCBElementInfo;\n}\n\ndefineProps<Props>();\n</script>\n\n<style lang=\"scss\">\n.pcb-info {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  z-index: 1;\n  padding: 8px;\n  width: 300px;\n  max-height: calc(100vh - 200px);\n  overflow: auto;\n\n  &-content {\n    &__row {\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 4px;\n      gap: 8px;\n      border-bottom: 1px solid rgb(var(--v-theme-container-border-color));\n\n      &:last-child {\n        border-bottom: none;\n        margin-bottom: 0;\n      }\n\n      span {\n        word-break: break-all;\n      }\n    }\n  }\n}\n</style>\n","import script from \"./PCBInfo.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBInfo.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBInfo.vue?vue&type=style&index=0&id=34e53a36&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { setBlockTracking as _setBlockTracking, createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-canvas-container\" }\n\nimport {\n  ref,\n} from 'vue';\nimport { PCBElementInfo } from '@/models/abstract';\nimport { PCBControls } from './PCBControls';\nimport { PCBInfo } from './PCBInfo';\n\ninterface Props {\n  elementInfo: PCBElementInfo | null;\n}\n\ninterface Emits {\n  (e: 'click', event: string): void;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBCanvas',\n  props: {\n    elementInfo: {}\n  },\n  emits: [\"click\"],\n  setup(__props: any, { expose: __expose, emit: __emit }) {\n\nconst emit = __emit;\n\n\nconst pcbCanvas = ref<HTMLElement | null>(null);\n\n__expose({\n  pcbCanvas,\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[0] || (\n      _setBlockTracking(-1, true),\n      (_cache[0] = _createElementVNode(\"div\", {\n        class: \"pcb-canvas\",\n        ref_key: \"pcbCanvas\",\n        ref: pcbCanvas\n      }, null, 512)).cacheIndex = 0,\n      _setBlockTracking(1),\n      _cache[0]\n    ),\n    _createVNode(_unref(PCBControls), {\n      onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.$emit('click', $event)))\n    }),\n    (_ctx.elementInfo && Object.keys(_ctx.elementInfo).length > 0)\n      ? (_openBlock(), _createBlock(_unref(PCBInfo), {\n          key: 0,\n          infoData: _ctx.elementInfo\n        }, null, 8, [\"infoData\"]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"pcb-canvas-container\">\n    <div\n      class=\"pcb-canvas\"\n      ref=\"pcbCanvas\"\n      v-once\n    >\n    </div>\n    <PCBControls @click=\"$emit('click', $event)\"/>\n    <PCBInfo\n      v-if=\"elementInfo && Object.keys(elementInfo).length > 0\"\n      :infoData=\"elementInfo\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  defineProps, defineEmits, defineExpose, ref,\n} from 'vue';\nimport { PCBElementInfo } from '@/models/abstract';\nimport { PCBControls } from './PCBControls';\nimport { PCBInfo } from './PCBInfo';\n\ninterface Props {\n  elementInfo: PCBElementInfo | null;\n}\n\ninterface Emits {\n  (e: 'click', event: string): void;\n}\n\nconst emit = defineEmits<Emits>();\ndefineProps<Props>();\n\nconst pcbCanvas = ref<HTMLElement | null>(null);\n\ndefineExpose({\n  pcbCanvas,\n});\n</script>\n\n<style lang=\"scss\">\n.pcb-canvas-container {\n  flex: 1;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n\n  .pcb-canvas {\n    width: 100%;\n    height: 100%;\n  }\n}\n</style>\n","import script from \"./PCBCanvas.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBCanvas.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBCanvas.vue?vue&type=style&index=0&id=41b8906c&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","export enum PCBFileType {\n  IPC2581 = 'IPC2581',\n  GERBER_ARCHIVE = 'GERBER_ARCHIVE',\n  GERBER_FILE = 'GERBER_FILE',\n  UNKNOWN = 'UNKNOWN',\n}\n\nexport class PCBFileTypeDetector {\n  private static readonly TYPE_PATTERNS = {\n    [PCBFileType.IPC2581]: {\n      extensions: ['.xml', '.cvg'],\n    },\n    [PCBFileType.GERBER_ARCHIVE]: {\n      extensions: ['.zip'],\n    },\n    [PCBFileType.GERBER_FILE]: {\n      extensions: ['.gbr', '.drl'],\n    },\n  };\n\n  public static detectFileType(file: File | string): PCBFileType {\n    const fileName = typeof file === 'string' ? file : file.name.toLowerCase();\n\n    const [fileType] = Object.entries(this.TYPE_PATTERNS).find(([, pattern]) => (\n      pattern.extensions.some((ext) => fileName.endsWith(ext))\n    )) || [PCBFileType.UNKNOWN];\n\n    return fileType as PCBFileType;\n  }\n\n  public static getAllFileExtensions(): string[] {\n    return Object.values(this.TYPE_PATTERNS)\n      .flatMap((pattern) => pattern.extensions);\n  }\n\n  public static getFileExtension(fileName: string): string | null {\n    const fileType = fileName.split('.').pop()?.toLowerCase();\n    if (!fileType) return null;\n    return fileType;\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-upload-form-buttons\" }\nconst _hoisted_2 = [\"accept\"]\nconst _hoisted_3 = { class: \"pcb-upload-form-file\" }\nconst _hoisted_4 = { class: \"pcb-upload-form-file__info\" }\nconst _hoisted_5 = [\"title\"]\nconst _hoisted_6 = { class: \"text-grey-darken-1 text-body-2\" }\n\nimport { ref } from 'vue';\n\nimport { FormatUtils } from '@/utils';\nimport { PCBFileTypeDetector } from '@/services/PCBFileTypeDetector';\n\ninterface PCBUploadFormEmits {\n  submit: [file: File];\n  progress: [progress: number];\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBUploadForm',\n  emits: [\"submit\", \"progress\"],\n  setup(__props, { emit: __emit }) {\n\nconst emit = __emit;\nconst file = ref<File | null>(null);\nconst isProcessing = ref(false);\n\nconst fileExtensions = PCBFileTypeDetector.getAllFileExtensions().join(',');\n\nconst processFile = async (selectedFile: File): Promise<void> => {\n  isProcessing.value = true;\n  const reader = new FileReader();\n\n  reader.onload = (): void => {\n    isProcessing.value = false;\n  };\n\n  reader.onerror = (): void => {\n    isProcessing.value = false;\n  };\n\n  reader.readAsArrayBuffer(selectedFile);\n};\n\nconst onDelete = (): void => {\n  file.value = null;\n  isProcessing.value = false;\n};\n\nconst onSubmit = (): void => {\n  if (file.value && !isProcessing.value) {\n    emit('submit', file.value);\n    file.value = null;\n  }\n};\n\nconst onChange = (event: Event): void => {\n  file.value = null;\n  const input = event.target as HTMLInputElement;\n\n  if (input.files?.[0]) {\n    [file.value] = input.files;\n    processFile(file.value);\n  } else {\n    file.value = null;\n    isProcessing.value = false;\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_form = _resolveComponent(\"v-form\")!\n\n  return (_openBlock(), _createBlock(_component_v_form, {\n    class: \"pcb-upload-form\",\n    onSubmit: _withModifiers(onSubmit, [\"prevent\"])\n  }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createVNode(_component_v_btn, {\n          class: \"pcb-upload-form-buttons__upload\",\n          \"prepend-icon\": \"mdi-upload\",\n          \"aria-label\": \"Upload PCB\",\n          variant: \"outlined\",\n          color: \"primary\",\n          tag: \"label\",\n          loading: isProcessing.value\n        }, {\n          default: _withCtx(() => [\n            _cache[0] || (_cache[0] = _createTextVNode(\" Upload PCB \", -1)),\n            _createElementVNode(\"input\", {\n              type: \"file\",\n              hidden: \"\",\n              accept: _unref(fileExtensions),\n              onChange: onChange\n            }, null, 40, _hoisted_2)\n          ]),\n          _: 1\n        }, 8, [\"loading\"]),\n        _createVNode(_component_v_btn, {\n          type: \"submit\",\n          icon: \"mdi-check\",\n          size: \"small\",\n          color: \"success\",\n          \"aria-label\": \"Submit PCB\",\n          variant: \"text\",\n          rounded: \"false\",\n          disabled: !file.value || isProcessing.value\n        }, null, 8, [\"disabled\"])\n      ]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"span\", {\n            class: \"text-grey-darken-1 text-body-2 text-truncate\",\n            title: file.value?.name || '-'\n          }, \" File name: \" + _toDisplayString(file.value?.name || '-'), 9, _hoisted_5),\n          _createElementVNode(\"span\", _hoisted_6, \" File size: \" + _toDisplayString(file.value ? _unref(FormatUtils).formatFileSize(file.value.size) : '-'), 1)\n        ]),\n        _createVNode(_component_v_btn, {\n          icon: \"mdi-delete\",\n          size: \"small\",\n          color: \"error\",\n          \"aria-label\": \"Delete {{ file?.name }}\",\n          variant: \"text\",\n          disabled: !file.value || isProcessing.value,\n          onClick: onDelete\n        }, null, 8, [\"disabled\"])\n      ])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <v-form\n    class=\"pcb-upload-form\"\n    @submit.prevent=\"onSubmit\"\n  >\n    <div class=\"pcb-upload-form-buttons\">\n      <v-btn\n        class=\"pcb-upload-form-buttons__upload\"\n        prepend-icon=\"mdi-upload\"\n        aria-label=\"Upload PCB\"\n        variant=\"outlined\"\n        color=\"primary\"\n        tag=\"label\"\n        :loading=\"isProcessing\"\n      >\n        Upload PCB\n        <!-- eslint-disable-next-line vuejs-accessibility/form-control-has-label -->\n        <input\n          type=\"file\"\n          hidden\n          :accept=\"fileExtensions\"\n          @change=\"onChange\"\n        />\n      </v-btn>\n      <v-btn\n        type=\"submit\"\n        icon=\"mdi-check\"\n        size=\"small\"\n        color=\"success\"\n        aria-label=\"Submit PCB\"\n        variant=\"text\"\n        rounded=false\n        :disabled=\"!file || isProcessing\"\n      />\n    </div>\n\n    <div class=\"pcb-upload-form-file\">\n      <div class=\"pcb-upload-form-file__info\">\n        <span\n          class=\"text-grey-darken-1 text-body-2 text-truncate\"\n          :title=\"file?.name || '-'\"\n        >\n          File name: {{ file?.name || '-' }}\n        </span>\n        <span class=\"text-grey-darken-1 text-body-2\">\n          File size: {{ file ? FormatUtils.formatFileSize(file.size) : '-' }}\n        </span>\n      </div>\n      <v-btn\n        icon=\"mdi-delete\"\n        size=\"small\"\n        color=\"error\"\n        aria-label=\"Delete {{ file?.name }}\"\n        variant=\"text\"\n        :disabled=\"!file || isProcessing\"\n        @click=\"onDelete\"\n      />\n    </div>\n  </v-form>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, defineEmits } from 'vue';\n\nimport { FormatUtils } from '@/utils';\nimport { PCBFileTypeDetector } from '@/services/PCBFileTypeDetector';\n\ninterface PCBUploadFormEmits {\n  submit: [file: File];\n  progress: [progress: number];\n}\n\nconst emit = defineEmits<PCBUploadFormEmits>();\nconst file = ref<File | null>(null);\nconst isProcessing = ref(false);\n\nconst fileExtensions = PCBFileTypeDetector.getAllFileExtensions().join(',');\n\nconst processFile = async (selectedFile: File): Promise<void> => {\n  isProcessing.value = true;\n  const reader = new FileReader();\n\n  reader.onload = (): void => {\n    isProcessing.value = false;\n  };\n\n  reader.onerror = (): void => {\n    isProcessing.value = false;\n  };\n\n  reader.readAsArrayBuffer(selectedFile);\n};\n\nconst onDelete = (): void => {\n  file.value = null;\n  isProcessing.value = false;\n};\n\nconst onSubmit = (): void => {\n  if (file.value && !isProcessing.value) {\n    emit('submit', file.value);\n    file.value = null;\n  }\n};\n\nconst onChange = (event: Event): void => {\n  file.value = null;\n  const input = event.target as HTMLInputElement;\n\n  if (input.files?.[0]) {\n    [file.value] = input.files;\n    processFile(file.value);\n  } else {\n    file.value = null;\n    isProcessing.value = false;\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.pcb-upload-form {\n  padding: 8px;\n  border: 1px solid rgb(var(--v-theme-container-border-color));\n  border-radius: 4px;\n\n  &-buttons,\n  &-file {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 8px;\n  }\n\n  &-buttons {\n    padding-bottom: 8px;\n\n    &__upload {\n      flex-grow: 1;\n    }\n  }\n\n  &-file {\n    &__info {\n      flex: 1;\n      overflow: hidden;\n\n      span {\n        display: block;\n      }\n    }\n  }\n}\n</style>\n","import script from \"./PCBUploadForm.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBUploadForm.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBUploadForm.vue?vue&type=style&index=0&id=3e88d4a4&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, withModifiers as _withModifiers, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withKeys as _withKeys, normalizeClass as _normalizeClass, resolveDirective as _resolveDirective, createElementBlock as _createElementBlock, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-component-item__visibility\" }\nconst _hoisted_2 = { class: \"text-body-2 text-grey-darken-4 text-truncate\" }\n\n\n\ninterface Props {\n  isVisible: boolean;\n  isDisabled?: boolean;\n  isSelected?: boolean;\n  name: string;\n}\n\ninterface Emits {\n  (e: 'click'): void;\n  (e: 'toggleVisibility'): void;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBComponentItem',\n  props: {\n    isVisible: { type: Boolean },\n    isDisabled: { type: Boolean },\n    isSelected: { type: Boolean },\n    name: {}\n  },\n  emits: [\"click\", \"toggleVisibility\"],\n  setup(__props: any, { emit: __emit }) {\n\n\nconst emit = __emit;\n\nconst handleClick = (): void => {\n  emit('click');\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _directive_ripple = _resolveDirective(\"ripple\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"pcb-component-item\", { 'pcb-component-item--selected': _ctx.isSelected }]),\n    tabindex: \"0\",\n    onClick: handleClick,\n    onKeydown: _withKeys(handleClick, [\"enter\"])\n  }, [\n    _createElementVNode(\"span\", _hoisted_1, [\n      (!_ctx.isDisabled)\n        ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 0,\n            density: \"compact\",\n            size: \"small\",\n            variant: \"text\",\n            icon: _ctx.isVisible ? 'mdi-eye' : 'mdi-eye-off',\n            onClick: _cache[0] || (_cache[0] = _withModifiers(($event: any) => (emit('toggleVisibility')), [\"stop\"]))\n          }, null, 8, [\"icon\"]))\n        : (_openBlock(), _createBlock(_component_v_icon, {\n            key: 1,\n            icon: \"mdi-eye-outline\",\n            size: \"small\",\n            color: \"grey\",\n            variant: \"text\"\n          }))\n    ]),\n    _createElementVNode(\"span\", _hoisted_2, _toDisplayString(_ctx.name), 1)\n  ], 34)), [\n    [_directive_ripple]\n  ])\n}\n}\n\n})","<template>\n  <div\n    class=\"pcb-component-item\"\n    :class=\"{ 'pcb-component-item--selected': isSelected }\"\n    v-ripple\n    tabindex=\"0\"\n    @click=\"handleClick\"\n    @keydown.enter=\"handleClick\"\n  >\n    <span class=\"pcb-component-item__visibility\">\n      <v-btn\n        v-if=\"!isDisabled\"\n        density=\"compact\"\n        size=\"small\"\n        variant=\"text\"\n        :icon=\"isVisible ? 'mdi-eye' : 'mdi-eye-off'\"\n        @click.stop=\"emit('toggleVisibility')\"\n      />\n      <v-icon\n        v-else\n        icon=\"mdi-eye-outline\"\n        size=\"small\"\n        color=\"grey\"\n        variant=\"text\"\n      />\n    </span>\n    <span class=\"text-body-2 text-grey-darken-4 text-truncate\">{{ name }}</span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineProps, defineEmits } from 'vue';\n\ninterface Props {\n  isVisible: boolean;\n  isDisabled?: boolean;\n  isSelected?: boolean;\n  name: string;\n}\n\ninterface Emits {\n  (e: 'click'): void;\n  (e: 'toggleVisibility'): void;\n}\n\ndefineProps<Props>();\nconst emit = defineEmits<Emits>();\n\nconst handleClick = (): void => {\n  emit('click');\n};\n</script>\n\n<style lang=\"scss\">\n.pcb-component-item {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  min-height: 30px;\n  padding: 4px;\n  cursor: pointer;\n  border: 1px solid rgb(var(--v-theme-container-border-color));\n  background-color: rgb(var(--v-theme-container-background-color));\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n\n  &:hover {\n    background-color: rgb(var(--v-theme-container-hover-background-color));\n  }\n\n  &--selected {\n    background-color: rgba(var(--v-theme-primary), 0.08);\n    border-color: rgb(var(--v-theme-primary));\n\n    &:hover {\n      background-color: rgba(var(--v-theme-primary), 0.08);\n    }\n  }\n\n  &__visibility {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n}\n</style>\n","import script from \"./PCBComponentItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBComponentItem.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBComponentItem.vue?vue&type=style&index=0&id=64331af0&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, withCtx as _withCtx, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-components-list\" }\nconst _hoisted_2 = { class: \"pcb-components-list-header\" }\nconst _hoisted_3 = { class: \"text-h6 pcb-components-list-header__title\" }\nconst _hoisted_4 = { class: \"pcb-components-list-header__actions\" }\n\nimport {\n  ref, computed, watch,\n} from 'vue';\nimport type { PCBComponent, PCBElement, PCBLayer } from '@/models/abstract';\nimport { ScrollUtils } from '@/utils';\n\nimport { PCBComponentItem } from './PCBComponentItem';\n\ninterface ComponentWithLayer {\n  component: PCBComponent;\n  layer: PCBLayer;\n}\n\ninterface Props {\n  selectedComponent: PCBElement | null;\n  layers: readonly PCBLayer[];\n}\n\ninterface Emits {\n  (e: 'selectComponent', value: PCBComponent | null): void;\n  (e: 'toggleVisibility', component: PCBComponent): void;\n  (e: 'resetVisibility'): void;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBComponentsList',\n  props: {\n    selectedComponent: {},\n    layers: {}\n  },\n  emits: [\"selectComponent\", \"toggleVisibility\", \"resetVisibility\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\nconst emit = __emit;\n\nconst search = ref<string>('');\nconst virtualScrollRef = ref<InstanceType<typeof import('vuetify/components').VVirtualScroll> | null>(null);\n\nconst components = computed<ComponentWithLayer[]>(() => {\n  const allComponents: ComponentWithLayer[] = [];\n  props.layers.forEach((layer) => {\n    const comps = layer.getComponents();\n    comps.forEach((component) => {\n      allComponents.push({ component, layer });\n    });\n  });\n  return allComponents;\n});\n\nconst filteredComponents = computed<ComponentWithLayer[]>(() => {\n  const searchValue = search.value?.trim().toLocaleLowerCase();\n  if (!searchValue) return components.value;\n\n  return components.value.filter((item) => item.component.name.toLocaleLowerCase().includes(searchValue));\n});\n\nconst handleComponentSelect = (component: PCBComponent) => {\n  if (props.selectedComponent?.id === component.id) {\n    emit('selectComponent', null);\n    return;\n  }\n  emit('selectComponent', component);\n};\n\nconst handleToggleVisibility = (component: PCBComponent) => {\n  emit('toggleVisibility', component);\n};\n\nconst handleResetVisibility = () => {\n  emit('resetVisibility');\n};\n\nconst scrollToSelectedComponent = () => {\n  if (!props.selectedComponent || !virtualScrollRef.value) return;\n\n  const selectedIndex = filteredComponents.value.findIndex(\n    (item) => item.component.id === props.selectedComponent!.id,\n  );\n\n  ScrollUtils.scrollToHiddenItem(virtualScrollRef.value, selectedIndex, {\n    itemHeight: 30,\n  });\n};\n\nwatch(() => props.selectedComponent, () => {\n  scrollToSelectedComponent();\n}, { flush: 'post' });\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_text_field = _resolveComponent(\"v-text-field\")!\n  const _component_v_virtual_scroll = _resolveComponent(\"v-virtual-scroll\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"h4\", _hoisted_3, \"PCB Components (\" + _toDisplayString(components.value.length) + \")\", 1),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_component_v_btn, {\n          density: \"compact\",\n          size: \"small\",\n          variant: \"text\",\n          icon: \"mdi-eye\",\n          \"aria-label\": \"Show all components\",\n          title: \"Show all components\",\n          onClick: handleResetVisibility\n        }),\n        _createVNode(_component_v_text_field, {\n          modelValue: search.value,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((search).value = $event)),\n          \"append-inner-icon\": \"mdi-magnify\",\n          density: \"compact\",\n          label: \"Search layer by name\",\n          variant: \"outlined\",\n          \"hide-details\": \"\",\n          \"single-line\": \"\",\n          clearable: \"\"\n        }, null, 8, [\"modelValue\"])\n      ])\n    ]),\n    _createVNode(_component_v_virtual_scroll, {\n      ref_key: \"virtualScrollRef\",\n      ref: virtualScrollRef,\n      items: filteredComponents.value\n    }, {\n      default: _withCtx(({ item }) => [\n        (_openBlock(), _createBlock(_unref(PCBComponentItem), {\n          key: item.component.id,\n          isSelected: props.selectedComponent?.id === item.component.id,\n          isVisible: item.component.getVisibility(),\n          isDisabled: !item.layer.getVisibility(),\n          name: item.component.name,\n          onClick: ($event: any) => (handleComponentSelect(item.component)),\n          onToggleVisibility: ($event: any) => (handleToggleVisibility(item.component))\n        }, null, 8, [\"isSelected\", \"isVisible\", \"isDisabled\", \"name\", \"onClick\", \"onToggleVisibility\"]))\n      ]),\n      _: 1\n    }, 8, [\"items\"])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"pcb-components-list\">\n    <div class=\"pcb-components-list-header\">\n      <h4 class=\"text-h6 pcb-components-list-header__title\">PCB Components ({{ components.length }})</h4>\n      <div class=\"pcb-components-list-header__actions\">\n        <v-btn\n          density=\"compact\"\n          size=\"small\"\n          variant=\"text\"\n          icon=\"mdi-eye\"\n          aria-label=\"Show all components\"\n          title=\"Show all components\"\n          @click=\"handleResetVisibility\"\n        />\n        <v-text-field\n          v-model=\"search\"\n          append-inner-icon=\"mdi-magnify\"\n          density=\"compact\"\n          label=\"Search layer by name\"\n          variant=\"outlined\"\n          hide-details\n          single-line\n          clearable\n        />\n      </div>\n    </div>\n    <v-virtual-scroll\n      ref=\"virtualScrollRef\"\n      :items=\"filteredComponents\"\n    >\n      <template v-slot:default=\"{ item }\">\n        <PCBComponentItem\n          :key=\"item.component.id\"\n          :isSelected=\"props.selectedComponent?.id === item.component.id\"\n          :isVisible=\"item.component.getVisibility()\"\n          :isDisabled=\"!item.layer.getVisibility()\"\n          :name=\"item.component.name\"\n          @click=\"handleComponentSelect(item.component)\"\n          @toggleVisibility=\"handleToggleVisibility(item.component)\"\n        />\n      </template>\n    </v-virtual-scroll>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  defineProps, defineEmits, ref, computed, watch,\n} from 'vue';\nimport type { PCBComponent, PCBElement, PCBLayer } from '@/models/abstract';\nimport { ScrollUtils } from '@/utils';\n\nimport { PCBComponentItem } from './PCBComponentItem';\n\ninterface ComponentWithLayer {\n  component: PCBComponent;\n  layer: PCBLayer;\n}\n\ninterface Props {\n  selectedComponent: PCBElement | null;\n  layers: readonly PCBLayer[];\n}\n\ninterface Emits {\n  (e: 'selectComponent', value: PCBComponent | null): void;\n  (e: 'toggleVisibility', component: PCBComponent): void;\n  (e: 'resetVisibility'): void;\n}\n\nconst props = defineProps<Props>();\nconst emit = defineEmits<Emits>();\n\nconst search = ref<string>('');\nconst virtualScrollRef = ref<InstanceType<typeof import('vuetify/components').VVirtualScroll> | null>(null);\n\nconst components = computed<ComponentWithLayer[]>(() => {\n  const allComponents: ComponentWithLayer[] = [];\n  props.layers.forEach((layer) => {\n    const comps = layer.getComponents();\n    comps.forEach((component) => {\n      allComponents.push({ component, layer });\n    });\n  });\n  return allComponents;\n});\n\nconst filteredComponents = computed<ComponentWithLayer[]>(() => {\n  const searchValue = search.value?.trim().toLocaleLowerCase();\n  if (!searchValue) return components.value;\n\n  return components.value.filter((item) => item.component.name.toLocaleLowerCase().includes(searchValue));\n});\n\nconst handleComponentSelect = (component: PCBComponent) => {\n  if (props.selectedComponent?.id === component.id) {\n    emit('selectComponent', null);\n    return;\n  }\n  emit('selectComponent', component);\n};\n\nconst handleToggleVisibility = (component: PCBComponent) => {\n  emit('toggleVisibility', component);\n};\n\nconst handleResetVisibility = () => {\n  emit('resetVisibility');\n};\n\nconst scrollToSelectedComponent = () => {\n  if (!props.selectedComponent || !virtualScrollRef.value) return;\n\n  const selectedIndex = filteredComponents.value.findIndex(\n    (item) => item.component.id === props.selectedComponent!.id,\n  );\n\n  ScrollUtils.scrollToHiddenItem(virtualScrollRef.value, selectedIndex, {\n    itemHeight: 30,\n  });\n};\n\nwatch(() => props.selectedComponent, () => {\n  scrollToSelectedComponent();\n}, { flush: 'post' });\n</script>\n\n<style lang=\"scss\">\n.pcb-components-list {\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n\n  &-header {\n    flex: none;\n    padding-bottom: 8px;\n\n    &__title {\n      padding-bottom: 8px;\n    }\n\n    &__actions {\n      display: flex;\n      align-items: center;\n      border: 1px solid rgb(var(--v-theme-container-border-color));\n      border-radius: 4px;\n      padding: 0 4px;\n\n      .v-input {\n        .v-field {\n          --v-field-padding-start: 8px;\n        }\n\n        .v-field__outline {\n          display: none;\n        }\n      }\n    }\n  }\n}\n</style>\n","import script from \"./PCBComponentsList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBComponentsList.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBComponentsList.vue?vue&type=style&index=0&id=4d889f52&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, withModifiers as _withModifiers, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, mergeProps as _mergeProps, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, withKeys as _withKeys } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-layer-item__visibility\" }\nconst _hoisted_2 = {\n  key: 1,\n  class: \"pcb-layer-item__color-button pcb-layer-item__color-button--disabled\",\n  style: { backgroundColor: 'rgba(0, 0, 0, 0.12)' }\n}\n\nimport { PCBColor } from '@/types/PCBTypes';\nimport {\n  ref, watch,\n} from 'vue';\n\ninterface Props {\n  isEmpty: boolean;\n  isVisible: boolean;\n  isSelected?: boolean;\n  layerName: string;\n  color: PCBColor;\n}\n\ninterface Emits {\n  (e: 'click'): void;\n  (e: 'toggleVisibility'): void;\n  (e: 'changeColor', color: PCBColor): void;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBLayerItem',\n  props: {\n    isEmpty: { type: Boolean },\n    isVisible: { type: Boolean },\n    isSelected: { type: Boolean },\n    layerName: {},\n    color: {}\n  },\n  emits: [\"click\", \"toggleVisibility\", \"changeColor\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\nconst emit = __emit;\n\nconst colorPickerOpen = ref(false);\nconst selectedColor = ref<PCBColor | null>(null);\n\nwatch(colorPickerOpen, (isOpen) => {\n  if (isOpen) {\n    selectedColor.value = props.color;\n  }\n});\n\nconst handleClick = (): void => {\n  emit('click');\n};\n\nconst handleColorCancel = (): void => {\n  colorPickerOpen.value = false;\n  selectedColor.value = props.color;\n};\n\nconst handleColorSubmit = (): void => {\n  if (!selectedColor.value) return;\n  emit('changeColor', selectedColor.value);\n  colorPickerOpen.value = false;\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_color_picker = _resolveComponent(\"v-color-picker\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_menu = _resolveComponent(\"v-menu\")!\n  const _directive_ripple = _resolveDirective(\"ripple\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"pcb-layer-item\", { 'pcb-layer-item--selected': _ctx.isSelected }]),\n    tabindex: \"0\",\n    onClick: handleClick,\n    onKeydown: _withKeys(handleClick, [\"enter\"])\n  }, [\n    _createElementVNode(\"span\", _hoisted_1, [\n      (!_ctx.isEmpty)\n        ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 0,\n            density: \"compact\",\n            size: \"small\",\n            variant: \"text\",\n            icon: _ctx.isVisible ? 'mdi-eye' : 'mdi-eye-off',\n            onClick: _cache[0] || (_cache[0] = _withModifiers(($event: any) => (emit('toggleVisibility')), [\"stop\"]))\n          }, null, 8, [\"icon\"]))\n        : (_openBlock(), _createBlock(_component_v_icon, {\n            key: 1,\n            icon: \"mdi-eye-outline\",\n            size: \"small\",\n            color: \"grey\",\n            variant: \"text\"\n          }))\n    ]),\n    _createElementVNode(\"span\", {\n      class: \"pcb-layer-item__color\",\n      style: _normalizeStyle({ '--layer-color': `rgb(${Object.values(_ctx.color).join(',')})` })\n    }, [\n      (!_ctx.isEmpty)\n        ? (_openBlock(), _createBlock(_component_v_menu, {\n            key: 0,\n            modelValue: colorPickerOpen.value,\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((colorPickerOpen).value = $event)),\n            \"close-on-content-click\": false,\n            \"offset-y\": \"\"\n          }, {\n            activator: _withCtx(({ props: menuProps }) => [\n              _withDirectives(_createElementVNode(\"span\", _mergeProps(menuProps, {\n                class: \"pcb-layer-item__color-button\",\n                onClick: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"stop\"]))\n              }), null, 16), [\n                [_directive_ripple]\n              ])\n            ]),\n            default: _withCtx(() => [\n              _createVNode(_component_v_card, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_color_picker, {\n                    modelValue: selectedColor.value,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((selectedColor).value = $event)),\n                    mode: \"rgb\",\n                    elevation: \"0\",\n                    \"hide-inputs\": \"\"\n                  }, null, 8, [\"modelValue\"]),\n                  _createVNode(_component_v_card_actions, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_spacer),\n                      _createVNode(_component_v_btn, {\n                        text: \"\",\n                        onClick: handleColorCancel\n                      }, {\n                        default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                          _createTextVNode(\" Cancel \", -1)\n                        ]))]),\n                        _: 1\n                      }),\n                      _createVNode(_component_v_btn, {\n                        color: \"primary\",\n                        onClick: handleColorSubmit\n                      }, {\n                        default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                          _createTextVNode(\" Apply \", -1)\n                        ]))]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"]))\n        : (_openBlock(), _createElementBlock(\"span\", _hoisted_2))\n    ], 4),\n    _createElementVNode(\"span\", {\n      class: _normalizeClass([\"text-body-2 text-truncate\", { 'text-grey-darken-4': !_ctx.isEmpty, 'text-grey-darken-1': _ctx.isEmpty }])\n    }, _toDisplayString(_ctx.layerName), 3)\n  ], 34)), [\n    [_directive_ripple]\n  ])\n}\n}\n\n})","<template>\n  <div\n    class=\"pcb-layer-item\"\n    :class=\"{ 'pcb-layer-item--selected': isSelected }\"\n    v-ripple\n    tabindex=\"0\"\n    @click=\"handleClick\"\n    @keydown.enter=\"handleClick\"\n  >\n    <span class=\"pcb-layer-item__visibility\">\n      <v-btn\n        v-if=\"!isEmpty\"\n        density=\"compact\"\n        size=\"small\"\n        variant=\"text\"\n        :icon=\"isVisible ? 'mdi-eye' : 'mdi-eye-off'\"\n        @click.stop=\"emit('toggleVisibility')\"\n      />\n      <v-icon\n        v-else\n        icon=\"mdi-eye-outline\"\n        size=\"small\"\n        color=\"grey\"\n        variant=\"text\"\n      />\n    </span>\n    <span\n      class=\"pcb-layer-item__color\"\n      :style=\"{ '--layer-color': `rgb(${Object.values(color).join(',')})` }\"\n    >\n      <v-menu\n        v-if=\"!isEmpty\"\n        v-model=\"colorPickerOpen\"\n        :close-on-content-click=\"false\"\n        offset-y\n      >\n        <template #activator=\"{ props: menuProps }\">\n          <span\n            v-bind=\"menuProps\"\n            v-ripple\n            class=\"pcb-layer-item__color-button\"\n            @click.stop\n          ></span>\n        </template>\n\n        <v-card>\n          <v-color-picker\n            v-model=\"selectedColor\"\n            mode=\"rgb\"\n            elevation=\"0\"\n            hide-inputs\n          />\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              text\n              @click=\"handleColorCancel\"\n            >\n              Cancel\n            </v-btn>\n            <v-btn\n              color=\"primary\"\n              @click=\"handleColorSubmit\"\n            >\n              Apply\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-menu>\n      <span\n        v-else\n        class=\"pcb-layer-item__color-button pcb-layer-item__color-button--disabled\"\n        :style=\"{ backgroundColor: 'rgba(0, 0, 0, 0.12)' }\"\n      ></span>\n    </span>\n    <span\n      class=\"text-body-2 text-truncate\"\n      :class=\"{ 'text-grey-darken-4': !isEmpty, 'text-grey-darken-1': isEmpty }\"\n    >{{ layerName }}</span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { PCBColor } from '@/types/PCBTypes';\nimport {\n  defineProps, defineEmits, ref, watch,\n} from 'vue';\n\ninterface Props {\n  isEmpty: boolean;\n  isVisible: boolean;\n  isSelected?: boolean;\n  layerName: string;\n  color: PCBColor;\n}\n\ninterface Emits {\n  (e: 'click'): void;\n  (e: 'toggleVisibility'): void;\n  (e: 'changeColor', color: PCBColor): void;\n}\n\nconst props = defineProps<Props>();\nconst emit = defineEmits<Emits>();\n\nconst colorPickerOpen = ref(false);\nconst selectedColor = ref<PCBColor | null>(null);\n\nwatch(colorPickerOpen, (isOpen) => {\n  if (isOpen) {\n    selectedColor.value = props.color;\n  }\n});\n\nconst handleClick = (): void => {\n  emit('click');\n};\n\nconst handleColorCancel = (): void => {\n  colorPickerOpen.value = false;\n  selectedColor.value = props.color;\n};\n\nconst handleColorSubmit = (): void => {\n  if (!selectedColor.value) return;\n  emit('changeColor', selectedColor.value);\n  colorPickerOpen.value = false;\n};\n</script>\n\n<style lang=\"scss\">\n.pcb-layer-item {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  min-height: 30px;\n  padding: 4px;\n  cursor: pointer;\n  border: 1px solid rgb(var(--v-theme-container-border-color));\n  background-color: rgb(var(--v-theme-container-background-color));\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n\n  &:hover {\n    background-color: rgb(var(--v-theme-container-hover-background-color));\n  }\n\n  &--selected {\n    background-color: rgba(var(--v-theme-primary), 0.08);\n    border-color: rgb(var(--v-theme-primary));\n\n    &:hover {\n      background-color: rgba(var(--v-theme-primary), 0.08);\n    }\n  }\n\n  &__visibility {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  &__color {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    &-button {\n      width: 18px;\n      height: 18px;\n      border-radius: 4px;\n      border: 1px solid rgb(var(--v-theme-container-border-color));\n      background-color: var(--layer-color);\n\n      &--disabled {\n        background: linear-gradient(\n          135deg,\n          #fff 0%,\n          #fff calc(50% - 0.5px),\n          rgb(var(--v-theme-container-border-color)) calc(50% - 0.5px),\n          rgb(var(--v-theme-container-border-color)) calc(50% + 0.5px),\n          var(--layer-color) calc(50% + 0.5px),\n          var(--layer-color) 100%\n        );\n      }\n    }\n  }\n}\n</style>\n","import script from \"./PCBLayerItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBLayerItem.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBLayerItem.vue?vue&type=style&index=0&id=e7648260&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-layers-list\" }\nconst _hoisted_2 = { class: \"pcb-layers-list-header\" }\nconst _hoisted_3 = { class: \"text-h6 pcb-layers-list-header__title\" }\nconst _hoisted_4 = { class: \"pcb-layers-list-header__actions\" }\nconst _hoisted_5 = { class: \"pcb-layers-list-scroll-wrap\" }\nconst _hoisted_6 = { class: \"pcb-layers-list-list\" }\n\nimport {\n  ref, computed,\n} from 'vue';\nimport type { PCBElement, PCBLayer } from '@/models/abstract';\nimport { PCBColor } from '@/types/PCBTypes';\n\nimport { PCBLayerItem } from './PCBLayerItem';\n\ninterface Props {\n  selectedLayer: PCBElement | null;\n  layers: readonly PCBLayer[];\n}\n\ninterface Emits {\n  (e: 'selectLayer', value: PCBLayer | null): void;\n  (e: 'toggleVisibility', layer: PCBLayer): void;\n  (e: 'changeColor', layer: PCBLayer, color: PCBColor): void;\n  (e: 'resetVisibility'): void;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBLayersList',\n  props: {\n    selectedLayer: {},\n    layers: {}\n  },\n  emits: [\"selectLayer\", \"toggleVisibility\", \"changeColor\", \"resetVisibility\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\nconst emit = __emit;\n\nconst search = ref('');\n\nconst filteredLayers = computed<readonly PCBLayer[]>(() => {\n  if (!search.value) {\n    return props.layers;\n  }\n  return props.layers.filter((layer) => layer.name.toLowerCase().includes(search.value.toLowerCase()));\n});\n\nconst handleLayerSelect = (layer: PCBLayer): void => {\n  if (props.selectedLayer?.id === layer.id) {\n    emit('selectLayer', null);\n    return;\n  }\n  emit('selectLayer', layer);\n};\n\nconst handleToggleVisibility = (layer: PCBLayer): void => {\n  emit('toggleVisibility', layer);\n};\n\nconst handleResetVisibility = (): void => {\n  emit('resetVisibility');\n};\n\nconst handleChangeColor = (layer: PCBLayer, color: PCBColor): void => {\n  emit('changeColor', layer, color);\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_text_field = _resolveComponent(\"v-text-field\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"h4\", _hoisted_3, \"PCB Layers (\" + _toDisplayString(_ctx.layers.length) + \")\", 1),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_component_v_btn, {\n          density: \"compact\",\n          size: \"small\",\n          variant: \"text\",\n          icon: \"mdi-eye\",\n          \"aria-label\": \"Show all layers\",\n          title: \"Show all layers\",\n          onClick: handleResetVisibility\n        }),\n        _createVNode(_component_v_text_field, {\n          modelValue: search.value,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((search).value = $event)),\n          \"append-inner-icon\": \"mdi-magnify\",\n          density: \"compact\",\n          label: \"Search layer by name\",\n          variant: \"outlined\",\n          \"hide-details\": \"\",\n          \"single-line\": \"\",\n          clearable: \"\"\n        }, null, 8, [\"modelValue\"])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _createElementVNode(\"ul\", _hoisted_6, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredLayers.value, (layer) => {\n          return (_openBlock(), _createElementBlock(\"li\", {\n            key: layer.id\n          }, [\n            _createVNode(_unref(PCBLayerItem), {\n              isSelected: props.selectedLayer?.id === layer.id,\n              isEmpty: layer.isEmpty(),\n              isVisible: layer.getVisibility(),\n              layerName: layer.name,\n              color: layer.getColor(),\n              onClick: ($event: any) => (handleLayerSelect(layer)),\n              onToggleVisibility: ($event: any) => (handleToggleVisibility(layer)),\n              onChangeColor: ($event: any) => (handleChangeColor(layer, $event))\n            }, null, 8, [\"isSelected\", \"isEmpty\", \"isVisible\", \"layerName\", \"color\", \"onClick\", \"onToggleVisibility\", \"onChangeColor\"])\n          ]))\n        }), 128))\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"pcb-layers-list\">\n    <div class=\"pcb-layers-list-header\">\n      <h4 class=\"text-h6 pcb-layers-list-header__title\">PCB Layers ({{ layers.length }})</h4>\n      <div class=\"pcb-layers-list-header__actions\">\n        <v-btn\n          density=\"compact\"\n          size=\"small\"\n          variant=\"text\"\n          icon=\"mdi-eye\"\n          aria-label=\"Show all layers\"\n          title=\"Show all layers\"\n          @click=\"handleResetVisibility\"\n        />\n        <v-text-field\n          v-model=\"search\"\n          append-inner-icon=\"mdi-magnify\"\n          density=\"compact\"\n          label=\"Search layer by name\"\n          variant=\"outlined\"\n          hide-details\n          single-line\n          clearable\n        />\n      </div>\n    </div>\n    <div class=\"pcb-layers-list-scroll-wrap\">\n      <ul class=\"pcb-layers-list-list\">\n        <li\n          v-for=\"layer in filteredLayers\"\n          :key=\"layer.id\"\n        >\n          <PCBLayerItem\n            :isSelected=\"props.selectedLayer?.id === layer.id\"\n            :isEmpty=\"layer.isEmpty()\"\n            :isVisible=\"layer.getVisibility()\"\n            :layerName=\"layer.name\"\n            :color=\"layer.getColor()\"\n            @click=\"handleLayerSelect(layer)\"\n            @toggleVisibility=\"handleToggleVisibility(layer)\"\n            @changeColor=\"handleChangeColor(layer, $event)\"\n          />\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  defineProps, defineEmits, ref, computed,\n} from 'vue';\nimport type { PCBElement, PCBLayer } from '@/models/abstract';\nimport { PCBColor } from '@/types/PCBTypes';\n\nimport { PCBLayerItem } from './PCBLayerItem';\n\ninterface Props {\n  selectedLayer: PCBElement | null;\n  layers: readonly PCBLayer[];\n}\n\ninterface Emits {\n  (e: 'selectLayer', value: PCBLayer | null): void;\n  (e: 'toggleVisibility', layer: PCBLayer): void;\n  (e: 'changeColor', layer: PCBLayer, color: PCBColor): void;\n  (e: 'resetVisibility'): void;\n}\n\nconst props = defineProps<Props>();\nconst emit = defineEmits<Emits>();\n\nconst search = ref('');\n\nconst filteredLayers = computed<readonly PCBLayer[]>(() => {\n  if (!search.value) {\n    return props.layers;\n  }\n  return props.layers.filter((layer) => layer.name.toLowerCase().includes(search.value.toLowerCase()));\n});\n\nconst handleLayerSelect = (layer: PCBLayer): void => {\n  if (props.selectedLayer?.id === layer.id) {\n    emit('selectLayer', null);\n    return;\n  }\n  emit('selectLayer', layer);\n};\n\nconst handleToggleVisibility = (layer: PCBLayer): void => {\n  emit('toggleVisibility', layer);\n};\n\nconst handleResetVisibility = (): void => {\n  emit('resetVisibility');\n};\n\nconst handleChangeColor = (layer: PCBLayer, color: PCBColor): void => {\n  emit('changeColor', layer, color);\n};\n</script>\n\n<style lang=\"scss\">\n.pcb-layers-list {\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n\n  &-header {\n    flex: none;\n    padding-bottom: 8px;\n\n    &__title {\n      padding-bottom: 8px;\n    }\n\n    &__actions {\n      display: flex;\n      align-items: center;\n      border: 1px solid rgb(var(--v-theme-container-border-color));\n      border-radius: 4px;\n      padding: 0 4px;\n\n      .v-input {\n        .v-field {\n          --v-field-padding-start: 8px;\n        }\n\n        .v-field__outline {\n          display: none;\n        }\n      }\n    }\n  }\n\n  &-scroll-wrap {\n    flex: 1;\n    overflow-y: auto;\n  }\n\n  &-list {\n    list-style: none;\n  }\n}\n</style>\n","import script from \"./PCBLayersList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBLayersList.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBLayersList.vue?vue&type=style&index=0&id=6168c174&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createVNode as _createVNode, withKeys as _withKeys, normalizeClass as _normalizeClass, resolveDirective as _resolveDirective, createElementBlock as _createElementBlock, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-plate-item__img\" }\nconst _hoisted_2 = { class: \"pcb-plate-item__info\" }\nconst _hoisted_3 = [\"title\"]\nconst _hoisted_4 = { class: \"text-body-2 text-grey-darken-1\" }\nconst _hoisted_5 = { class: \"pcb-plate-item__controls\" }\n\n\nimport type { PCBPlate } from '@/models/abstract';\n\ninterface Props {\n  plate: PCBPlate;\n  selected?: boolean;\n}\n\ninterface Emits {\n  (e: 'click'): void;\n  (e: 'deletePlate', plate: PCBPlate): void;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBPlateItem',\n  props: {\n    plate: {},\n    selected: { type: Boolean }\n  },\n  emits: [\"click\", \"deletePlate\"],\n  setup(__props: any) {\n\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_img = _resolveComponent(\"v-img\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _directive_ripple = _resolveDirective(\"ripple\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"pcb-plate-item\", { 'pcb-plate-item--selected': _ctx.selected }]),\n    tabindex: \"0\",\n    role: \"button\",\n    onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.$emit('click'))),\n    onKeydown: _cache[2] || (_cache[2] = _withKeys(($event: any) => (_ctx.$emit('click')), [\"enter\"]))\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      false\n        ? (_openBlock(), _createBlock(_component_v_img, {\n            key: 0,\n            src: undefined,\n            alt: _ctx.plate.name,\n            \"aspect-ratio\": \"1\"\n          }, null, 8, [\"alt\"]))\n        : (_openBlock(), _createBlock(_component_v_icon, {\n            key: 1,\n            icon: \"$pcbPlate\",\n            size: \"48\"\n          }))\n    ]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"span\", {\n        class: \"text-body-2 text-grey-darken-4 text-truncate\",\n        title: _ctx.plate.name\n      }, _toDisplayString(_ctx.plate.name), 9, _hoisted_3),\n      _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.plate.type), 1)\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _createVNode(_component_v_btn, {\n        icon: \"mdi-delete\",\n        size: \"small\",\n        color: \"error\",\n        \"aria-label\": \"Delete {{ plate.name }}\",\n        variant: \"text\",\n        onClick: _cache[0] || (_cache[0] = _withModifiers(($event: any) => (_ctx.$emit('deletePlate', _ctx.plate)), [\"stop\"]))\n      })\n    ])\n  ], 34)), [\n    [_directive_ripple]\n  ])\n}\n}\n\n})","<template>\n  <div\n    class=\"pcb-plate-item\"\n    :class=\"{ 'pcb-plate-item--selected': selected }\"\n    v-ripple\n    tabindex=\"0\"\n    role=\"button\"\n    @click=\"$emit('click')\"\n    @keydown.enter=\"$emit('click')\"\n  >\n    <div class=\"pcb-plate-item__img\">\n      <v-img\n        v-if=\"false\"\n        :src=\"undefined\"\n        :alt=\"plate.name\"\n        aspect-ratio=\"1\"\n      />\n      <v-icon\n        v-else\n        icon=\"$pcbPlate\"\n        size=\"48\"\n      />\n    </div>\n\n    <div class=\"pcb-plate-item__info\">\n      <span\n        class=\"text-body-2 text-grey-darken-4 text-truncate\"\n        :title=\"plate.name\"\n      >\n        {{ plate.name }}\n      </span>\n      <span class=\"text-body-2 text-grey-darken-1\">\n        {{ plate.type }}\n      </span>\n    </div>\n\n    <div class=\"pcb-plate-item__controls\">\n      <v-btn\n        icon=\"mdi-delete\"\n        size=\"small\"\n        color=\"error\"\n        aria-label=\"Delete {{ plate.name }}\"\n        variant=\"text\"\n        @click.stop=\"$emit('deletePlate', plate)\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineProps, defineEmits } from 'vue';\nimport type { PCBPlate } from '@/models/abstract';\n\ninterface Props {\n  plate: PCBPlate;\n  selected?: boolean;\n}\n\ninterface Emits {\n  (e: 'click'): void;\n  (e: 'deletePlate', plate: PCBPlate): void;\n}\n\ndefineProps<Props>();\ndefineEmits<Emits>();\n</script>\n\n<style lang=\"scss\">\n.pcb-plate-item {\n  display: flex;\n  align-items: center;\n  min-height: 70px;\n  padding: 8px;\n  border: 1px solid rgb(var(--v-theme-container-border-color));\n  gap: 8px;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background-color: rgb(var(--v-theme-container-hover-background-color));\n  }\n\n  &--selected {\n    background-color: rgba(var(--v-theme-primary), 0.08);\n    border-color: rgb(var(--v-theme-primary));\n  }\n\n  &__img {\n    flex: none;\n    width: 48px;\n  }\n\n  &__info {\n    flex: 1;\n    overflow: hidden;\n\n    span {\n      display: block;\n    }\n  }\n\n  &__controls {\n    flex: none;\n    display: flex;\n    align-items: center;\n  }\n}\n</style>\n","import script from \"./PCBPlateItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBPlateItem.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBPlateItem.vue?vue&type=style&index=0&id=c9e67f70&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, createVNode as _createVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-plates-list\" }\nconst _hoisted_2 = { class: \"pcb-plates-list-scroll-wrap\" }\nconst _hoisted_3 = { class: \"pcb-plates-list-list\" }\n\n\nimport type { PCBPlate } from '@/models/abstract';\nimport { PCBPlateItem } from './PCBPlateItem';\n\ninterface Props {\n  plates: readonly PCBPlate[];\n  selectedPlate?: PCBPlate | null;\n}\n\ninterface Emits {\n  (e: 'selectPlate', value: PCBPlate | null): void;\n  (e: 'deletePlate', plate: PCBPlate): void;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBPlatesList',\n  props: {\n    plates: {},\n    selectedPlate: {}\n  },\n  emits: [\"selectPlate\", \"deletePlate\"],\n  setup(__props: any, { emit: __emit }) {\n\n\nconst emit = __emit;\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"pcb-plates-list-header\" }, [\n      _createElementVNode(\"h3\", { class: \"text-h6\" }, \"PCB Plates\")\n    ], -1)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"ul\", _hoisted_3, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.plates, (plate) => {\n          return (_openBlock(), _createElementBlock(\"li\", {\n            key: plate.name\n          }, [\n            _createVNode(_unref(PCBPlateItem), {\n              plate: plate,\n              selected: _ctx.selectedPlate?.name === plate.name,\n              onClick: ($event: any) => (emit('selectPlate', plate)),\n              onDeletePlate: _cache[0] || (_cache[0] = ($event: any) => (emit('deletePlate', $event)))\n            }, null, 8, [\"plate\", \"selected\", \"onClick\"])\n          ]))\n        }), 128))\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"pcb-plates-list\">\n    <div class=\"pcb-plates-list-header\">\n      <h3 class=\"text-h6\">PCB Plates</h3>\n    </div>\n    <div class=\"pcb-plates-list-scroll-wrap\">\n      <ul class=\"pcb-plates-list-list\">\n        <li\n          v-for=\"plate in plates\"\n          :key=\"plate.name\"\n        >\n          <PCBPlateItem\n            :plate=\"plate\"\n            :selected=\"selectedPlate?.name === plate.name\"\n            @click=\"emit('selectPlate', plate)\"\n            @deletePlate=\"emit('deletePlate', $event)\"\n          />\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineProps, defineEmits } from 'vue';\nimport type { PCBPlate } from '@/models/abstract';\nimport { PCBPlateItem } from './PCBPlateItem';\n\ninterface Props {\n  plates: readonly PCBPlate[];\n  selectedPlate?: PCBPlate | null;\n}\n\ninterface Emits {\n  (e: 'selectPlate', value: PCBPlate | null): void;\n  (e: 'deletePlate', plate: PCBPlate): void;\n}\n\ndefineProps<Props>();\nconst emit = defineEmits<Emits>();\n</script>\n\n<style lang=\"scss\">\n.pcb-plates-list {\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n\n  &-header {\n    padding-bottom: 8px;\n  }\n\n  &-scroll-wrap {\n    flex: 1;\n    overflow-y: auto;\n  }\n\n  &-list {\n    list-style: none;\n\n    &>li:not(:last-child) {\n      margin-bottom: 8px;\n    }\n  }\n}\n</style>\n","import script from \"./PCBPlatesList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBPlatesList.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBPlatesList.vue?vue&type=style&index=0&id=49fc79fe&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, withModifiers as _withModifiers, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withKeys as _withKeys, normalizeClass as _normalizeClass, resolveDirective as _resolveDirective, createElementBlock as _createElementBlock, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-net-item__visibility\" }\nconst _hoisted_2 = { class: \"text-body-2 text-grey-darken-4 text-truncate\" }\n\n\n\ninterface Props {\n  isVisible: boolean;\n  isDisabled?: boolean;\n  isSelected?: boolean;\n  name: string;\n}\n\ninterface Emits {\n  (e: 'click'): void;\n  (e: 'toggleVisibility'): void;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBNetItem',\n  props: {\n    isVisible: { type: Boolean },\n    isDisabled: { type: Boolean },\n    isSelected: { type: Boolean },\n    name: {}\n  },\n  emits: [\"click\", \"toggleVisibility\"],\n  setup(__props: any, { emit: __emit }) {\n\n\nconst emit = __emit;\n\nconst handleClick = (): void => {\n  emit('click');\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _directive_ripple = _resolveDirective(\"ripple\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"pcb-net-item\", { 'pcb-net-item--selected': _ctx.isSelected }]),\n    tabindex: \"0\",\n    onClick: handleClick,\n    onKeydown: _withKeys(handleClick, [\"enter\"])\n  }, [\n    _createElementVNode(\"span\", _hoisted_1, [\n      (!_ctx.isDisabled)\n        ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 0,\n            density: \"compact\",\n            size: \"small\",\n            variant: \"text\",\n            icon: _ctx.isVisible ? 'mdi-eye' : 'mdi-eye-off',\n            onClick: _cache[0] || (_cache[0] = _withModifiers(($event: any) => (emit('toggleVisibility')), [\"stop\"]))\n          }, null, 8, [\"icon\"]))\n        : (_openBlock(), _createBlock(_component_v_icon, {\n            key: 1,\n            icon: \"mdi-eye-outline\",\n            size: \"small\",\n            color: \"grey\",\n            variant: \"text\"\n          }))\n    ]),\n    _createElementVNode(\"span\", _hoisted_2, _toDisplayString(_ctx.name), 1)\n  ], 34)), [\n    [_directive_ripple]\n  ])\n}\n}\n\n})","<template>\n  <div\n    class=\"pcb-net-item\"\n    :class=\"{ 'pcb-net-item--selected': isSelected }\"\n    v-ripple\n    tabindex=\"0\"\n    @click=\"handleClick\"\n    @keydown.enter=\"handleClick\"\n  >\n    <span class=\"pcb-net-item__visibility\">\n      <v-btn\n        v-if=\"!isDisabled\"\n        density=\"compact\"\n        size=\"small\"\n        variant=\"text\"\n        :icon=\"isVisible ? 'mdi-eye' : 'mdi-eye-off'\"\n        @click.stop=\"emit('toggleVisibility')\"\n      />\n      <v-icon\n        v-else\n        icon=\"mdi-eye-outline\"\n        size=\"small\"\n        color=\"grey\"\n        variant=\"text\"\n      />\n    </span>\n    <span class=\"text-body-2 text-grey-darken-4 text-truncate\">{{ name }}</span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineProps, defineEmits } from 'vue';\n\ninterface Props {\n  isVisible: boolean;\n  isDisabled?: boolean;\n  isSelected?: boolean;\n  name: string;\n}\n\ninterface Emits {\n  (e: 'click'): void;\n  (e: 'toggleVisibility'): void;\n}\n\ndefineProps<Props>();\nconst emit = defineEmits<Emits>();\n\nconst handleClick = (): void => {\n  emit('click');\n};\n</script>\n\n<style lang=\"scss\">\n.pcb-net-item {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  min-height: 30px;\n  padding: 4px;\n  cursor: pointer;\n  border: 1px solid rgb(var(--v-theme-container-border-color));\n  background-color: rgb(var(--v-theme-container-background-color));\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n\n  &:hover {\n    background-color: rgb(var(--v-theme-container-hover-background-color));\n  }\n\n  &--selected {\n    background-color: rgba(var(--v-theme-primary), 0.08);\n    border-color: rgb(var(--v-theme-primary));\n\n    &:hover {\n      background-color: rgba(var(--v-theme-primary), 0.08);\n    }\n  }\n\n  &__visibility {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n}\n</style>\n","import script from \"./PCBNetItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBNetItem.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBNetItem.vue?vue&type=style&index=0&id=79808e68&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, withCtx as _withCtx, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-nets-list\" }\nconst _hoisted_2 = { class: \"pcb-nets-list-header\" }\nconst _hoisted_3 = { class: \"text-h6 pcb-nets-list-header__title\" }\nconst _hoisted_4 = { class: \"pcb-nets-list-header__actions\" }\n\nimport {\n  ref, computed, watch,\n} from 'vue';\nimport { PCBElement, PCBLayer, PCBNet } from '@/models/abstract';\nimport { ScrollUtils } from '@/utils';\n\nimport { PCBNetItem } from './PCBNetItem';\n\ninterface NetWithLayer {\n  net: PCBNet;\n  layer: PCBLayer;\n}\n\ninterface Props {\n  selectedNet: PCBElement | null;\n  layers: readonly PCBLayer[];\n}\n\ninterface Emits {\n  (e: 'selectNet', value: PCBNet | null): void;\n  (e: 'toggleVisibility', net: PCBNet): void;\n  (e: 'resetVisibility'): void;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBNetsList',\n  props: {\n    selectedNet: {},\n    layers: {}\n  },\n  emits: [\"selectNet\", \"toggleVisibility\", \"resetVisibility\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\nconst emit = __emit;\n\nconst search = ref<string>('');\nconst virtualScrollRef = ref<InstanceType<typeof import('vuetify/components').VVirtualScroll> | null>(null);\n\nconst nets = computed<NetWithLayer[]>(() => {\n  const netsList: NetWithLayer[] = [];\n  props.layers.forEach((layer) => {\n    layer.getNets().forEach((net) => {\n      netsList.push({ net, layer });\n    });\n  });\n  return netsList;\n});\n\nconst filteredNets = computed<NetWithLayer[]>(() => {\n  const searchValue = search.value?.trim().toLocaleLowerCase();\n  if (!searchValue) return nets.value;\n  return nets.value.filter((item) => item.net.name.toLowerCase().includes(searchValue));\n});\n\nconst handleNetSelect = (net: PCBNet) => {\n  if (props.selectedNet?.id === net.id) {\n    emit('selectNet', null);\n    return;\n  }\n  emit('selectNet', net);\n};\n\nconst handleToggleVisibility = (net: PCBNet) => {\n  emit('toggleVisibility', net);\n};\n\nconst handleResetVisibility = () => {\n  emit('resetVisibility');\n};\n\nconst scrollToSelectedNet = () => {\n  if (!props.selectedNet || !virtualScrollRef.value) return;\n\n  const selectedIndex = filteredNets.value.findIndex(\n    (item) => item.net.id === props.selectedNet!.id,\n  );\n\n  ScrollUtils.scrollToHiddenItem(virtualScrollRef.value, selectedIndex, {\n    itemHeight: 30,\n  });\n};\n\nwatch(() => props.selectedNet, () => {\n  scrollToSelectedNet();\n}, { flush: 'post' });\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_text_field = _resolveComponent(\"v-text-field\")!\n  const _component_v_virtual_scroll = _resolveComponent(\"v-virtual-scroll\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"h4\", _hoisted_3, \"PCB Nets (\" + _toDisplayString(nets.value.length) + \")\", 1),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_component_v_btn, {\n          density: \"compact\",\n          size: \"small\",\n          variant: \"text\",\n          icon: \"mdi-eye\",\n          \"aria-label\": \"Show all nets\",\n          title: \"Show all nets\",\n          onClick: handleResetVisibility\n        }),\n        _createVNode(_component_v_text_field, {\n          modelValue: search.value,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((search).value = $event)),\n          \"append-inner-icon\": \"mdi-magnify\",\n          density: \"compact\",\n          label: \"Search layer by name\",\n          variant: \"outlined\",\n          \"hide-details\": \"\",\n          \"single-line\": \"\",\n          clearable: \"\"\n        }, null, 8, [\"modelValue\"])\n      ])\n    ]),\n    _createVNode(_component_v_virtual_scroll, {\n      ref_key: \"virtualScrollRef\",\n      ref: virtualScrollRef,\n      items: filteredNets.value\n    }, {\n      default: _withCtx(({ item }) => [\n        (_openBlock(), _createBlock(_unref(PCBNetItem), {\n          key: item.net.id,\n          isSelected: _ctx.selectedNet?.id === item.net.id,\n          isVisible: item.net.getVisibility(),\n          isDisabled: !item.layer.getVisibility(),\n          name: item.net.name,\n          onClick: ($event: any) => (handleNetSelect(item.net)),\n          onToggleVisibility: ($event: any) => (handleToggleVisibility(item.net))\n        }, null, 8, [\"isSelected\", \"isVisible\", \"isDisabled\", \"name\", \"onClick\", \"onToggleVisibility\"]))\n      ]),\n      _: 1\n    }, 8, [\"items\"])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"pcb-nets-list\">\n    <div class=\"pcb-nets-list-header\">\n      <h4 class=\"text-h6 pcb-nets-list-header__title\">PCB Nets ({{ nets.length }})</h4>\n      <div class=\"pcb-nets-list-header__actions\">\n        <v-btn\n          density=\"compact\"\n          size=\"small\"\n          variant=\"text\"\n          icon=\"mdi-eye\"\n          aria-label=\"Show all nets\"\n          title=\"Show all nets\"\n          @click=\"handleResetVisibility\"\n        />\n        <v-text-field\n          v-model=\"search\"\n          append-inner-icon=\"mdi-magnify\"\n          density=\"compact\"\n          label=\"Search layer by name\"\n          variant=\"outlined\"\n          hide-details\n          single-line\n          clearable\n        />\n      </div>\n    </div>\n    <v-virtual-scroll\n      ref=\"virtualScrollRef\"\n      :items=\"filteredNets\"\n    >\n      <template v-slot:default=\"{ item }\">\n        <PCBNetItem\n          :key=\"item.net.id\"\n          :isSelected=\"selectedNet?.id === item.net.id\"\n          :isVisible=\"item.net.getVisibility()\"\n          :isDisabled=\"!item.layer.getVisibility()\"\n          :name=\"item.net.name\"\n          @click=\"handleNetSelect(item.net)\"\n          @toggleVisibility=\"handleToggleVisibility(item.net)\"\n        />\n      </template>\n    </v-virtual-scroll>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  defineProps, defineEmits, ref, computed, watch,\n} from 'vue';\nimport { PCBElement, PCBLayer, PCBNet } from '@/models/abstract';\nimport { ScrollUtils } from '@/utils';\n\nimport { PCBNetItem } from './PCBNetItem';\n\ninterface NetWithLayer {\n  net: PCBNet;\n  layer: PCBLayer;\n}\n\ninterface Props {\n  selectedNet: PCBElement | null;\n  layers: readonly PCBLayer[];\n}\n\ninterface Emits {\n  (e: 'selectNet', value: PCBNet | null): void;\n  (e: 'toggleVisibility', net: PCBNet): void;\n  (e: 'resetVisibility'): void;\n}\n\nconst props = defineProps<Props>();\nconst emit = defineEmits<Emits>();\n\nconst search = ref<string>('');\nconst virtualScrollRef = ref<InstanceType<typeof import('vuetify/components').VVirtualScroll> | null>(null);\n\nconst nets = computed<NetWithLayer[]>(() => {\n  const netsList: NetWithLayer[] = [];\n  props.layers.forEach((layer) => {\n    layer.getNets().forEach((net) => {\n      netsList.push({ net, layer });\n    });\n  });\n  return netsList;\n});\n\nconst filteredNets = computed<NetWithLayer[]>(() => {\n  const searchValue = search.value?.trim().toLocaleLowerCase();\n  if (!searchValue) return nets.value;\n  return nets.value.filter((item) => item.net.name.toLowerCase().includes(searchValue));\n});\n\nconst handleNetSelect = (net: PCBNet) => {\n  if (props.selectedNet?.id === net.id) {\n    emit('selectNet', null);\n    return;\n  }\n  emit('selectNet', net);\n};\n\nconst handleToggleVisibility = (net: PCBNet) => {\n  emit('toggleVisibility', net);\n};\n\nconst handleResetVisibility = () => {\n  emit('resetVisibility');\n};\n\nconst scrollToSelectedNet = () => {\n  if (!props.selectedNet || !virtualScrollRef.value) return;\n\n  const selectedIndex = filteredNets.value.findIndex(\n    (item) => item.net.id === props.selectedNet!.id,\n  );\n\n  ScrollUtils.scrollToHiddenItem(virtualScrollRef.value, selectedIndex, {\n    itemHeight: 30,\n  });\n};\n\nwatch(() => props.selectedNet, () => {\n  scrollToSelectedNet();\n}, { flush: 'post' });\n</script>\n\n<style lang=\"scss\">\n.pcb-nets-list {\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n\n  &-header {\n    flex: none;\n    padding-bottom: 8px;\n\n    &__title {\n      padding-bottom: 8px;\n    }\n\n    &__actions {\n      display: flex;\n      align-items: center;\n      border: 1px solid rgb(var(--v-theme-container-border-color));\n      border-radius: 4px;\n      padding: 0 4px;\n\n      .v-input {\n        .v-field {\n          --v-field-padding-start: 8px;\n        }\n\n        .v-field__outline {\n          display: none;\n        }\n      }\n    }\n  }\n}\n</style>\n","import script from \"./PCBNetsList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBNetsList.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBNetsList.vue?vue&type=style&index=0&id=28a3d77c&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-aside-empty-state\" }\nconst _hoisted_2 = { class: \"pcb-aside-empty-state-content\" }\nconst _hoisted_3 = { class: \"text-body-1 text-grey-darken-1\" }\n\n\n\ninterface Props {\n  icon: string;\n  message: string;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBAsideEmptyState',\n  props: {\n    icon: {},\n    message: {}\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_v_icon, {\n        icon: _ctx.icon,\n        size: \"64\",\n        color: \"grey lighten-1\"\n      }, null, 8, [\"icon\"]),\n      _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.message), 1)\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"pcb-aside-empty-state\">\n    <div class=\"pcb-aside-empty-state-content\">\n      <v-icon\n        :icon=\"icon\"\n        size=\"64\"\n        color=\"grey lighten-1\"\n      />\n      <span class=\"text-body-1 text-grey-darken-1\">\n        {{ message }}\n      </span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineProps } from 'vue';\n\ninterface Props {\n  icon: string;\n  message: string;\n}\n\ndefineProps<Props>();\n</script>\n\n<style lang=\"scss\">\n.pcb-aside-empty-state {\n  display: flex;\n  justify-content: center;\n\n  &-content {\n    padding: 8px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 8px;\n    text-align: center;\n  }\n}\n</style>\n","import script from \"./PCBAsideEmptyState.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBAsideEmptyState.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBAsideEmptyState.vue?vue&type=style&index=0&id=5c785796&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createBlock as _createBlock, unref as _unref, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-aside\" }\n\nimport {\n  ref, computed,\n} from 'vue';\n\nimport { PCBUploadForm } from '@/components/forms';\nimport {\n  PCBComponentsList, PCBLayersList, PCBNetsList, PCBPlatesList,\n} from '@/components/lists';\nimport { PCBElement, PCBLayer, PCBPlate } from '@/models/abstract';\nimport { PCBColor, PCBElementsType } from '@/types/PCBTypes';\n\nimport { PCBAsideEmptyState } from './PCBAsideEmptyState';\n\ninterface Emits {\n  (e: 'fileChange', file: File): void;\n  (e: 'selectPlate', plate: PCBPlate | null): void;\n  (e: 'selectElement', element: PCBElement | null): void;\n  (e: 'toggleVisibility', element: PCBElement): void;\n  (e: 'resetVisibility', type: PCBElementsType): void;\n  (e: 'changeColor', payload: { layer: PCBLayer; color: PCBColor }): void;\n  (e: 'deletePlate', plate: PCBPlate): void;\n}\n\ninterface Props {\n  readonly pcbPlatesList: readonly PCBPlate[];\n  readonly selectedPlate: PCBPlate | null;\n  readonly plateLayers: readonly PCBLayer[];\n  readonly selectedElement: PCBElement | null;\n}\n\nenum Tabs {\n  PLATES = 'plates',\n  LAYERS = 'layers',\n  NETS = 'nets',\n  COMPONENTS = 'components',\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBAside',\n  props: {\n    pcbPlatesList: {},\n    selectedPlate: {},\n    plateLayers: {},\n    selectedElement: {}\n  },\n  emits: [\"fileChange\", \"selectPlate\", \"selectElement\", \"toggleVisibility\", \"resetVisibility\", \"changeColor\", \"deletePlate\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst emit = __emit;\nconst props = __props;\n\nconst selectedTab = ref<Tabs>(Tabs.PLATES);\n\nconst tabsConfig = computed(() => [\n  { value: Tabs.PLATES, title: 'PCB Plates', icon: '$pcbPlate' },\n  { value: Tabs.LAYERS, title: 'PCB Layers', icon: '$pcbLayer' },\n  { value: Tabs.NETS, title: 'PCB Nets', icon: '$pcbNet' },\n  { value: Tabs.COMPONENTS, title: 'PCB Components', icon: '$pcbComponent' },\n]);\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_tab = _resolveComponent(\"v-tab\")!\n  const _component_v_tabs = _resolveComponent(\"v-tabs\")!\n  const _component_v_tabs_window_item = _resolveComponent(\"v-tabs-window-item\")!\n  const _component_v_tabs_window = _resolveComponent(\"v-tabs-window\")!\n\n  return (_openBlock(), _createElementBlock(\"aside\", _hoisted_1, [\n    _createVNode(_component_v_tabs, {\n      modelValue: selectedTab.value,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedTab).value = $event)),\n      class: \"pcb-aside-tabs-panel\",\n      direction: \"vertical\"\n    }, {\n      default: _withCtx(() => [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(tabsConfig.value, (tab) => {\n          return (_openBlock(), _createBlock(_component_v_tab, {\n            key: tab.value,\n            value: tab.value,\n            title: tab.title,\n            color: \"primary\",\n            class: \"pcb-aside-tab\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_icon, {\n                icon: tab.icon\n              }, null, 8, [\"icon\"])\n            ]),\n            _: 2\n          }, 1032, [\"value\", \"title\"]))\n        }), 128))\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(_component_v_tabs_window, {\n      modelValue: selectedTab.value,\n      \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event: any) => ((selectedTab).value = $event)),\n      class: \"pcb-aside-tabs-window\"\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_v_tabs_window_item, {\n          value: Tabs.PLATES,\n          class: \"pcb-aside-tabs-window-item\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_unref(PCBUploadForm), {\n              class: \"pcb-aside-upload-form\",\n              onSubmit: _cache[1] || (_cache[1] = ($event: any) => (emit('fileChange', $event)))\n            }),\n            (props.pcbPlatesList.length > 0)\n              ? (_openBlock(), _createBlock(_unref(PCBPlatesList), {\n                  key: 0,\n                  selectedPlate: props.selectedPlate,\n                  plates: props.pcbPlatesList,\n                  onSelectPlate: _cache[2] || (_cache[2] = ($event: any) => (emit('selectPlate', $event))),\n                  onDeletePlate: _cache[3] || (_cache[3] = ($event: any) => (emit('deletePlate', $event)))\n                }, null, 8, [\"selectedPlate\", \"plates\"]))\n              : (_openBlock(), _createBlock(_unref(PCBAsideEmptyState), {\n                  key: 1,\n                  icon: \"$pcbPlate\",\n                  message: \"No PCB plates available. Please upload a PCB file.\"\n                }))\n          ]),\n          _: 1\n        }, 8, [\"value\"]),\n        _createVNode(_component_v_tabs_window_item, {\n          value: Tabs.LAYERS,\n          class: \"pcb-aside-tabs-window-item\"\n        }, {\n          default: _withCtx(() => [\n            (props.plateLayers.length > 0)\n              ? (_openBlock(), _createBlock(_unref(PCBLayersList), {\n                  key: 0,\n                  layers: props.plateLayers,\n                  selectedLayer: props.selectedElement,\n                  onSelectLayer: _cache[4] || (_cache[4] = ($event: any) => (emit('selectElement', $event))),\n                  onToggleVisibility: _cache[5] || (_cache[5] = ($event: any) => (emit('toggleVisibility', $event))),\n                  onResetVisibility: _cache[6] || (_cache[6] = () => emit('resetVisibility', _unref(PCBElementsType).Layer)),\n                  onChangeColor: _cache[7] || (_cache[7] = (layer, color) => emit('changeColor', { layer, color }))\n                }, null, 8, [\"layers\", \"selectedLayer\"]))\n              : (_openBlock(), _createBlock(_unref(PCBAsideEmptyState), {\n                  key: 1,\n                  icon: \"$pcbLayer\",\n                  message: \"No layers available. Please select a PCB plate with layers.\"\n                }))\n          ]),\n          _: 1\n        }, 8, [\"value\"]),\n        _createVNode(_component_v_tabs_window_item, {\n          value: Tabs.NETS,\n          class: \"pcb-aside-tabs-window-item\"\n        }, {\n          default: _withCtx(() => [\n            (props.plateLayers.length > 0)\n              ? (_openBlock(), _createBlock(_unref(PCBNetsList), {\n                  key: 0,\n                  layers: props.plateLayers,\n                  selectedNet: props.selectedElement,\n                  onSelectNet: _cache[8] || (_cache[8] = ($event: any) => (emit('selectElement', $event))),\n                  onToggleVisibility: _cache[9] || (_cache[9] = ($event: any) => (emit('toggleVisibility', $event))),\n                  onResetVisibility: _cache[10] || (_cache[10] = () => emit('resetVisibility', _unref(PCBElementsType).Net))\n                }, null, 8, [\"layers\", \"selectedNet\"]))\n              : (_openBlock(), _createBlock(_unref(PCBAsideEmptyState), {\n                  key: 1,\n                  icon: \"$pcbNet\",\n                  message: \"No nets available. Please select a PCB plate with layers.\"\n                }))\n          ]),\n          _: 1\n        }, 8, [\"value\"]),\n        _createVNode(_component_v_tabs_window_item, {\n          value: Tabs.COMPONENTS,\n          class: \"pcb-aside-tabs-window-item\"\n        }, {\n          default: _withCtx(() => [\n            (props.plateLayers.length > 0)\n              ? (_openBlock(), _createBlock(_unref(PCBComponentsList), {\n                  key: 0,\n                  layers: props.plateLayers,\n                  selectedComponent: props.selectedElement,\n                  onSelectComponent: _cache[11] || (_cache[11] = ($event: any) => (emit('selectElement', $event))),\n                  onToggleVisibility: _cache[12] || (_cache[12] = ($event: any) => (emit('toggleVisibility', $event))),\n                  onResetVisibility: _cache[13] || (_cache[13] = () => emit('resetVisibility', _unref(PCBElementsType).Component))\n                }, null, 8, [\"layers\", \"selectedComponent\"]))\n              : (_openBlock(), _createBlock(_unref(PCBAsideEmptyState), {\n                  key: 1,\n                  icon: \"$pcbComponent\",\n                  message: \"No components available. Please select a PCB plate with layers.\"\n                }))\n          ]),\n          _: 1\n        }, 8, [\"value\"])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"])\n  ]))\n}\n}\n\n})","<template>\n  <aside class=\"pcb-aside\">\n    <v-tabs\n      v-model=\"selectedTab\"\n      class=\"pcb-aside-tabs-panel\"\n      direction=\"vertical\"\n    >\n      <v-tab\n        v-for=\"tab in tabsConfig\"\n        :key=\"tab.value\"\n        :value=\"tab.value\"\n        :title=\"tab.title\"\n        color=\"primary\"\n        class=\"pcb-aside-tab\"\n      >\n        <v-icon :icon=\"tab.icon\" />\n      </v-tab>\n    </v-tabs>\n\n    <v-tabs-window\n      v-model=\"selectedTab\"\n      class=\"pcb-aside-tabs-window\"\n    >\n      <v-tabs-window-item\n        :value=\"Tabs.PLATES\"\n        class=\"pcb-aside-tabs-window-item\"\n      >\n        <PCBUploadForm\n          class=\"pcb-aside-upload-form\"\n          @submit=\"emit('fileChange', $event)\"\n        />\n        <PCBPlatesList\n          v-if=\"props.pcbPlatesList.length > 0\"\n          :selectedPlate=\"props.selectedPlate\"\n          :plates=\"props.pcbPlatesList\"\n          @selectPlate=\"emit('selectPlate', $event)\"\n          @deletePlate=\"emit('deletePlate', $event)\"\n        />\n        <PCBAsideEmptyState\n          v-else\n          icon=\"$pcbPlate\"\n          message=\"No PCB plates available. Please upload a PCB file.\"\n        />\n      </v-tabs-window-item>\n\n      <v-tabs-window-item\n        :value=\"Tabs.LAYERS\"\n        class=\"pcb-aside-tabs-window-item\"\n      >\n        <PCBLayersList\n          v-if=\"props.plateLayers.length > 0\"\n          :layers=\"props.plateLayers\"\n          :selectedLayer=\"props.selectedElement\"\n          @selectLayer=\"emit('selectElement', $event)\"\n          @toggleVisibility=\"emit('toggleVisibility', $event)\"\n          @resetVisibility=\"() => emit('resetVisibility', PCBElementsType.Layer)\"\n          @changeColor=\"(layer, color) => emit('changeColor', { layer, color })\"\n        />\n        <PCBAsideEmptyState\n          v-else\n          icon=\"$pcbLayer\"\n          message=\"No layers available. Please select a PCB plate with layers.\"\n        />\n      </v-tabs-window-item>\n\n      <v-tabs-window-item\n        :value=\"Tabs.NETS\"\n        class=\"pcb-aside-tabs-window-item\"\n      >\n        <PCBNetsList\n          v-if=\"props.plateLayers.length > 0\"\n          :layers=\"props.plateLayers\"\n          :selectedNet=\"props.selectedElement\"\n          @selectNet=\"emit('selectElement', $event)\"\n          @toggleVisibility=\"emit('toggleVisibility', $event)\"\n          @resetVisibility=\"() => emit('resetVisibility', PCBElementsType.Net)\"\n        />\n        <PCBAsideEmptyState\n          v-else\n          icon=\"$pcbNet\"\n          message=\"No nets available. Please select a PCB plate with layers.\"\n        />\n      </v-tabs-window-item>\n\n      <v-tabs-window-item\n        :value=\"Tabs.COMPONENTS\"\n        class=\"pcb-aside-tabs-window-item\"\n      >\n        <PCBComponentsList\n          v-if=\"props.plateLayers.length > 0\"\n          :layers=\"props.plateLayers\"\n          :selectedComponent=\"props.selectedElement\"\n          @selectComponent=\"emit('selectElement', $event)\"\n          @toggleVisibility=\"emit('toggleVisibility', $event)\"\n          @resetVisibility=\"() => emit('resetVisibility', PCBElementsType.Component)\"\n        />\n        <PCBAsideEmptyState\n          v-else\n          icon=\"$pcbComponent\"\n          message=\"No components available. Please select a PCB plate with layers.\"\n        />\n      </v-tabs-window-item>\n\n    </v-tabs-window>\n  </aside>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  ref, defineProps, defineEmits, computed,\n} from 'vue';\n\nimport { PCBUploadForm } from '@/components/forms';\nimport {\n  PCBComponentsList, PCBLayersList, PCBNetsList, PCBPlatesList,\n} from '@/components/lists';\nimport { PCBElement, PCBLayer, PCBPlate } from '@/models/abstract';\nimport { PCBColor, PCBElementsType } from '@/types/PCBTypes';\n\nimport { PCBAsideEmptyState } from './PCBAsideEmptyState';\n\ninterface Emits {\n  (e: 'fileChange', file: File): void;\n  (e: 'selectPlate', plate: PCBPlate | null): void;\n  (e: 'selectElement', element: PCBElement | null): void;\n  (e: 'toggleVisibility', element: PCBElement): void;\n  (e: 'resetVisibility', type: PCBElementsType): void;\n  (e: 'changeColor', payload: { layer: PCBLayer; color: PCBColor }): void;\n  (e: 'deletePlate', plate: PCBPlate): void;\n}\n\ninterface Props {\n  readonly pcbPlatesList: readonly PCBPlate[];\n  readonly selectedPlate: PCBPlate | null;\n  readonly plateLayers: readonly PCBLayer[];\n  readonly selectedElement: PCBElement | null;\n}\n\nenum Tabs {\n  PLATES = 'plates',\n  LAYERS = 'layers',\n  NETS = 'nets',\n  COMPONENTS = 'components',\n}\n\nconst emit = defineEmits<Emits>();\nconst props = defineProps<Props>();\n\nconst selectedTab = ref<Tabs>(Tabs.PLATES);\n\nconst tabsConfig = computed(() => [\n  { value: Tabs.PLATES, title: 'PCB Plates', icon: '$pcbPlate' },\n  { value: Tabs.LAYERS, title: 'PCB Layers', icon: '$pcbLayer' },\n  { value: Tabs.NETS, title: 'PCB Nets', icon: '$pcbNet' },\n  { value: Tabs.COMPONENTS, title: 'PCB Components', icon: '$pcbComponent' },\n]);\n</script>\n\n<style lang=\"scss\">\n.pcb-aside {\n  width: 350px;\n  border-right: 1px solid rgb(var(--theme-container-border-color));\n  flex: none;\n  display: flex;\n\n  &-tabs {\n    &-panel {\n      flex: none;\n      border-right: 1px solid var(--border-color);\n    }\n\n    &-window {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      min-height: 0;\n      padding: 8px;\n      height: 100%;\n\n      &-item {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        min-height: 0;\n        overflow: hidden;\n      }\n    }\n  }\n\n  &-tab {\n    min-width: 48px !important;\n  }\n\n  &-upload-form {\n    margin-bottom: 16px;\n    flex: none;\n  }\n}\n</style>\n","import script from \"./PCBAside.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBAside.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBAside.vue?vue&type=style&index=0&id=95aa2f7e&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"lds-roller\">\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.lds-roller {\n  box-sizing: border-box;\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n\n  & div,\n  & div:after {\n    box-sizing: border-box;\n  }\n\n  & div {\n    animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    transform-origin: 40px 40px;\n    color: rgb(var(--v-theme-primary));\n\n    &:after {\n      content: \" \";\n      display: block;\n      position: absolute;\n      width: 7.2px;\n      height: 7.2px;\n      border-radius: 50%;\n      background: currentColor;\n      margin: -3.6px 0 0 -3.6px;\n    }\n\n    &:nth-child(1) {\n      animation-delay: -0.036s;\n    }\n\n    &:nth-child(1):after {\n      top: 62.62742px;\n      left: 62.62742px;\n    }\n\n    &:nth-child(2) {\n      animation-delay: -0.072s;\n    }\n\n    &:nth-child(2):after {\n      top: 67.71281px;\n      left: 56px;\n    }\n\n    &:nth-child(3) {\n      animation-delay: -0.108s;\n    }\n\n    &:nth-child(3):after {\n      top: 70.90963px;\n      left: 48.28221px;\n    }\n\n    &:nth-child(4) {\n      animation-delay: -0.144s;\n    }\n\n    &:nth-child(4):after {\n      top: 72px;\n      left: 40px;\n    }\n\n    &:nth-child(5) {\n      animation-delay: -0.18s;\n    }\n\n    &:nth-child(5):after {\n      top: 70.90963px;\n      left: 31.71779px;\n    }\n\n    &:nth-child(6) {\n      animation-delay: -0.216s;\n    }\n\n    &:nth-child(6):after {\n      top: 67.71281px;\n      left: 24px;\n    }\n\n    &:nth-child(7) {\n      animation-delay: -0.252s;\n    }\n\n    &:nth-child(7):after {\n      top: 62.62742px;\n      left: 17.37258px;\n    }\n\n    &:nth-child(8) {\n      animation-delay: -0.288s;\n    }\n\n    &:nth-child(8):after {\n      top: 56px;\n      left: 12.28719px;\n    }\n  }\n}\n\n@keyframes lds-roller {\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>\n","import { render } from \"./CircularRoller.vue?vue&type=template&id=521c097c\"\nconst script = {}\n\nimport \"./CircularRoller.vue?vue&type=style&index=0&id=521c097c&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { PCBFileType, PCBFileTypeDetector } from './PCBFileTypeDetector';\n\nexport class PCBFileReader {\n  public static readFile(file: File): Promise<any> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const content = e.target?.result;\n        resolve(content);\n      };\n      reader.onerror = (e) => {\n        reject(e);\n      };\n\n      const fileType = PCBFileTypeDetector.detectFileType(file);\n\n      if (fileType === PCBFileType.GERBER_ARCHIVE) {\n        reader.readAsArrayBuffer(file);\n      }\n\n      if (fileType === PCBFileType.GERBER_FILE) {\n        reader.readAsText(file);\n      }\n\n      if (fileType === PCBFileType.IPC2581) {\n        reader.readAsText(file);\n      }\n\n      if (fileType === PCBFileType.UNKNOWN) {\n        reject(new Error('Unknown PCB file type'));\n      }\n    });\n  }\n}\n","export type Point = {\n  x: number;\n  y: number;\n};\n\nexport type CurvePoint = Point & {\n  centerX?: number;\n  centerY?: number;\n  clockwise?: boolean;\n};\n\nexport type BoundingBox = {\n  xMin: number;\n  xMax: number;\n  yMin: number;\n  yMax: number;\n};\n\nexport type ShapeLineStyles = {\n  lineWidth: number;\n};\n\nexport type ShapeStyles = ShapeLineStyles & {\n  rotation: number;\n  mirror: boolean;\n  xOffset: number;\n  yOffset: number;\n};\n\nexport enum ShapeEnum {\n  Arc = 'Arc',\n  Circle = 'Circle',\n  // MOVE to IPC2581 shapes\n  Contour = 'Contour',\n  Diamond = 'Diamond',\n  Donut = 'Donut',\n  Ellipse = 'Ellipse',\n  Hexagon = 'Hexagon',\n  // MOVE to IPC2581 shapes\n  Hole = 'Hole',\n  Line = 'Line',\n  Octagon = 'Octagon',\n  Outline = 'Outline',\n  Oval = 'Oval',\n  Polyline = 'Polyline',\n  RectCenter = 'RectCenter',\n  RectCham = 'RectCham',\n  RectCorner = 'RectCorner',\n  RectRound = 'RectRound',\n  Thermal = 'Thermal',\n  Triangle = 'Triangle',\n}\n","export abstract class ContentParser {\n  public abstract parse(fileName: string, data: any): Promise<any>;\n}\n","import JSZip from 'jszip';\nimport { GerberArchive } from '@/types/GerberTypes';\n\nimport { ContentParser } from '../abstract';\n\nexport class GerberArchiveParser extends ContentParser {\n  private readonly zip: JSZip;\n\n  constructor() {\n    super();\n    this.zip = new JSZip();\n  }\n\n  public override async parse(fileName: string, arrayBuffer: ArrayBuffer): Promise<GerberArchive> {\n    const zip = await this.zip.loadAsync(arrayBuffer);\n    const files: Record<string, string> = {};\n\n    await Promise.all(\n      Object.entries(zip.files).map(async ([relativePath, file]) => {\n        const content = await file.async('arraybuffer');\n        files[relativePath] = new TextDecoder().decode(content);\n      }),\n    );\n\n    return files;\n  }\n}\n","import { IPC2581Xml } from '@/types/IPC2581XMLTypes';\nimport { ShapeEnum } from '@/types/ShapeTypes';\nimport { XMLParser } from 'fast-xml-parser';\nimport { ContentParser } from '../abstract';\n\nexport class IPC2581XmlParser extends ContentParser {\n  private readonly xmlParser: XMLParser;\n  private readonly TAG_TO_ARRAY = [\n    'Pin',\n    'Pad',\n    'Component',\n    'Cutout',\n    'Features',\n    'Set',\n    'NonstandardAttribute',\n    ...Object.values(ShapeEnum),\n  ];\n  private readonly POLY_STEP_NAMES = ['PolyStepSegment', 'PolyStepCurve'];\n  private polyStepCounter = 0;\n\n  constructor() {\n    super();\n    this.xmlParser = new XMLParser({\n      ignoreAttributes: false,\n      attributeNamePrefix: '',\n      parseAttributeValue: true,\n      isArray: (tagName) => this.TAG_TO_ARRAY.includes(tagName),\n      updateTag: (attrName) => {\n        if (this.POLY_STEP_NAMES.includes(attrName)) {\n          this.polyStepCounter += 1;\n          return `${attrName}_${this.polyStepCounter}`;\n        }\n        return attrName;\n      },\n    });\n  }\n\n  public override parse(fileName: string, xmlString: string): Promise<IPC2581Xml> {\n    this.polyStepCounter = 0;\n    return this.xmlParser.parse(xmlString);\n  }\n}\n","import { GerberArchive } from '@/types/GerberTypes';\nimport { ContentParser } from '../abstract';\n\nexport class GerberFileParser extends ContentParser {\n  /* eslint-disable-next-line class-methods-use-this */\n  public override async parse(fileName: string, data: string): Promise<GerberArchive> {\n    return {\n      [fileName]: data,\n    };\n  }\n}\n","import { ContentParser } from '../abstract';\nimport { IPC2581XmlParser } from './IPC2581XmlParser';\nimport { PCBFileType, PCBFileTypeDetector } from '../PCBFileTypeDetector';\nimport { GerberArchiveParser } from './GerberArchiveParser';\nimport { GerberFileParser } from './GerberFileParser';\n\nexport class ContentParserFactory {\n  public static createParser(file: File): ContentParser | null {\n    const fileType = PCBFileTypeDetector.detectFileType(file);\n\n    const FILE_TYPE_TO_PARSER: { [key in PCBFileType]?: new () => ContentParser } = {\n      [PCBFileType.IPC2581]: IPC2581XmlParser,\n      [PCBFileType.GERBER_ARCHIVE]: GerberArchiveParser,\n      [PCBFileType.GERBER_FILE]: GerberFileParser,\n    };\n\n    const ContentParserClass = FILE_TYPE_TO_PARSER[fileType];\n    return ContentParserClass ? new ContentParserClass() : null;\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\nimport { GeometryUtils, ParsingUtils } from '@/utils';\n\nimport { PCBShape, PCBElementInfo, PCBComponent } from '../abstract';\nimport { IPC2581Pin } from './IPC2581Pin';\n\ntype IPC2581ComponentPos = { location: Point; rotation?: number; mirror?: string };\n\nexport class IPC2581Component extends PCBComponent {\n  private readonly position: IPC2581ComponentPos;\n  private readonly pins: IPC2581Pin[];\n\n  constructor(info: PCBElementInfo, position: IPC2581ComponentPos, pins: IPC2581Pin[], shapes?: PCBShape<any, any>[]) {\n    super(info, shapes || []);\n    this.pins = pins;\n    this.position = position;\n  }\n\n  public override get name(): string {\n    return (this.getInfo().refDes as string) || 'Component';\n  }\n\n  public override getPoints(): Point[][] {\n    if (this.points.length > 0) return this.points;\n\n    const pinsPoints = this.pins.map((pin) => pin.getPoints()).flat();\n    const otherPoints = this.shapes.map((shape) => shape.getPoints()).flat();\n    const allPoints = [...pinsPoints, ...otherPoints];\n\n    const { location, rotation } = this.position;\n    const adaptedPoints = allPoints.map((points) => GeometryUtils.applyOffsetToPoints(points, location));\n\n    const rotatedPoints = adaptedPoints.map((points) => GeometryUtils.rotatePoints(points, location, rotation ?? 0));\n\n    const isMirrored = ParsingUtils.parseBoolean(this.position.mirror || '');\n    const mirroredPoints = rotatedPoints.map((points) => GeometryUtils.mirrorPoints(points, location, isMirrored));\n\n    this.points = mirroredPoints;\n\n    return mirroredPoints;\n  }\n\n  public override getThickness(): number[] {\n    const pinsThickness = this.pins.map((pin) => pin.getThickness()).flat();\n    const otherThickness = this.shapes.map((shape) => shape.getThickness()).flat();\n\n    return [...pinsThickness, ...otherThickness].filter((thickness): thickness is number => thickness !== undefined);\n  }\n}\n","import { PCBGeneral } from '../abstract';\n\nexport class IPC2581General extends PCBGeneral {}\n","import { PCBLayer } from '../abstract';\n\nexport class IPC2581Layer extends PCBLayer {}\n","import { PCBNet } from '../abstract';\n\nexport class IPC2581Net extends PCBNet {\n  public override get name(): string {\n    return this.getInfo().net as string;\n  }\n}\n","import { PCBNonFunctional } from '../abstract';\n\nexport class IPC2581NonFunctional extends PCBNonFunctional {\n  /* eslint-disable-next-line class-methods-use-this */\n  public override get name(): string {\n    return 'NonFunctional element';\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\nimport { PCBShape, PCBElement, PCBElementInfo } from '../abstract';\n\ntype IPC2581PinInfo = PCBElementInfo & { number?: string };\n\nexport class IPC2581Pin extends PCBElement {\n  private readonly info: IPC2581PinInfo;\n  private readonly shape: PCBShape<any, any>;\n  private points: Point[][];\n\n  constructor(info: IPC2581PinInfo, shape: PCBShape<any, any>) {\n    super();\n    this.info = info;\n    this.shape = shape;\n    this.points = [];\n  }\n\n  public override get name(): string {\n    return this.info.number || '';\n  }\n\n  public override getPoints(): Point[][] {\n    if (this.points.length > 0) return this.points;\n\n    const points = this.shape.getPoints() || [];\n    this.points = points;\n\n    return points;\n  }\n\n  public override getInfo(): PCBElementInfo {\n    return this.info;\n  }\n\n  public override getThickness(): number[] {\n    return this.shape.getThickness() || [];\n  }\n}\n","import { PCBPLateType } from '@/types/PCBTypes';\nimport { PCBPlate } from '../abstract';\n\nexport class IPC2581Plate extends PCBPlate {\n  /* eslint-disable-next-line class-methods-use-this */\n  public override get type(): PCBPLateType {\n    return PCBPLateType.IPC2581;\n  }\n}\n","import {\n  IPC2581XmlContent,\n  IPC2581XmlContentEntryColor,\n  IPC2581XmlContentEntryStandard,\n  IPC2581XmlContentEntryUser,\n  IPC2581XmlContentEntryLineDesc,\n  IPC2581XmlID,\n} from '@/types/IPC2581XMLTypes';\nimport { ParsingUtils } from '@/utils';\n\nconst COLOR_PREFIX_REGEX = /^color_/i;\n\nexport class IPC2581ContentParser {\n  private readonly xmlObjContent: IPC2581XmlContent;\n\n  constructor(xmlObjContent: IPC2581XmlContent) {\n    this.xmlObjContent = xmlObjContent;\n  }\n\n  private getFromContent<T>(\n    contentKey: keyof IPC2581XmlContent,\n    innerKey: string,\n    idToFind: string,\n    normalizeId = (id: string): string => id,\n  ): T | undefined {\n    const contentSection = this.xmlObjContent[contentKey] as Record<string, IPC2581XmlID[]>;\n    const data = contentSection?.[innerKey];\n    if (!data || !Array.isArray(data)) return undefined;\n    return data.find((style: IPC2581XmlID) => normalizeId(style.id) === idToFind) as T | undefined;\n  }\n\n  public getColorByID(id: string): IPC2581XmlContentEntryColor | undefined {\n    const normalizeColorId = (str: string) => ParsingUtils.parseXMLID(str.replace(COLOR_PREFIX_REGEX, ''));\n    return this.getFromContent<IPC2581XmlContentEntryColor>('DictionaryColor', 'EntryColor', id, normalizeColorId);\n  }\n\n  public getStandardByID(id: string): IPC2581XmlContentEntryStandard | undefined {\n    return this.getFromContent<IPC2581XmlContentEntryStandard>('DictionaryStandard', 'EntryStandard', id);\n  }\n\n  public getUserSpecialByID(id: string): IPC2581XmlContentEntryUser | undefined {\n    return this.getFromContent<IPC2581XmlContentEntryUser>('DictionaryUser', 'EntryUser', id);\n  }\n\n  public getLineDescByID(id: string): IPC2581XmlContentEntryLineDesc | undefined {\n    return this.getFromContent<IPC2581XmlContentEntryLineDesc>('DictionaryLineDesc', 'EntryLineDesc', id);\n  }\n\n  public getLayers(): string[] {\n    const layers = this.xmlObjContent.LayerRef;\n    if (!layers) return [];\n\n    return layers\n      .map((layer) => (typeof layer === 'object' ? layer.name : layer))\n      .filter((layerId) => layerId !== '');\n  }\n}\n","import {\n  IPC2581XmlEcad,\n  IPC2581XmlEcadCadDataStep,\n  IPC2581XmlEcadCadDataLayer,\n  IPC2581XmlEcadCadHeaderSpecInfo,\n} from '@/types/IPC2581XMLTypes';\n\ntype XMLResultSpecInfo = {\n  readonly conductor: ReadonlyArray<{ type: string; value: { value: string; unit: string } }>;\n  readonly dielectric: ReadonlyArray<{ type: string; value: { value: string } }>;\n  readonly general: ReadonlyArray<{ type: string; value: { text: string } }>;\n};\n\nexport class IPC2581EcadParser {\n  private readonly xmlEcad: IPC2581XmlEcad;\n\n  constructor(xmlEcad: IPC2581XmlEcad) {\n    this.xmlEcad = xmlEcad;\n  }\n\n  public getCadDataStep(): IPC2581XmlEcadCadDataStep | undefined {\n    return this.xmlEcad.CadData.Step || this.xmlEcad.CadData.StepList?.Step;\n  }\n\n  public getCadDataLayers(): IPC2581XmlEcadCadDataLayer[] | undefined {\n    return this.xmlEcad.CadData.Layer || this.xmlEcad.CadData.LayerDesc?.Layer;\n  }\n\n  public getUnits(): string {\n    return this.xmlEcad.CadHeader.units ?? '';\n  }\n\n  public getLayerSpec(specId: string): XMLResultSpecInfo | null {\n    if (!specId) return null;\n\n    const spec = this.xmlEcad.CadHeader.Spec.find((s) => s.name === specId);\n    if (!spec) return null;\n\n    const parseSpecFields = (fields: IPC2581XmlEcadCadHeaderSpecInfo[]) => fields.map((field) => ({\n      type: field.type,\n      value: { ...field.Property },\n    }));\n\n    const result = Object.fromEntries(\n      Object.entries(spec)\n        .filter(([, value]) => Array.isArray(value))\n        .map(([key, fields]) => [\n          key.toLocaleLowerCase(),\n          parseSpecFields(fields as IPC2581XmlEcadCadHeaderSpecInfo[]),\n        ]),\n    );\n\n    return result as unknown as XMLResultSpecInfo;\n  }\n\n  public getLayerInfoFromCadDataStackup(layerId: string): object {\n    const stackupLayers = this.xmlEcad.CadData.Stackup?.StackupGroup?.StackupLayer;\n    const stackup = stackupLayers?.find((layerData) => layerData.layerOrGroupRef === layerId);\n    if (!stackup) return {};\n\n    const spec = stackup.SpecRef ? this.getLayerSpec(stackup.SpecRef.id) : {};\n    return { ...stackup, spec };\n  }\n\n  public getLayers(): string[] {\n    const layers = this.getCadDataLayers();\n    if (!layers) return [];\n\n    return layers\n      .map((layer) => layer.name)\n      .filter((name) => name !== undefined) as string[];\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\n\nexport class EllipseCurve {\n  private readonly aX: number;\n  private readonly aY: number;\n  private readonly xRadius: number;\n  private readonly yRadius: number;\n  private readonly aStartAngle: number;\n  private readonly aEndAngle: number;\n  private readonly aClockwise: boolean;\n  private readonly aRotation: number;\n\n  constructor(\n    aX = 0,\n    aY = 0,\n    xRadius = 1,\n    yRadius = 1,\n    aStartAngle = 0,\n    aEndAngle = Math.PI * 2,\n    aClockwise = false,\n    aRotation = 0,\n  ) {\n    this.aX = aX;\n    this.aY = aY;\n\n    this.xRadius = xRadius;\n    this.yRadius = yRadius;\n\n    this.aStartAngle = aStartAngle;\n    this.aEndAngle = aEndAngle;\n\n    this.aClockwise = aClockwise;\n\n    this.aRotation = aRotation;\n\n    if (this.aStartAngle === this.aEndAngle) {\n      this.aEndAngle = this.aClockwise\n        ? this.aStartAngle - 2 * Math.PI\n        : this.aStartAngle + 2 * Math.PI;\n    }\n  }\n\n  public getPoints(divisions = 12): Point[] {\n    const points: Point[] = [];\n\n    for (let d = 0; d <= divisions; d += 1) {\n      points.push(this.getPoint(d / divisions));\n    }\n\n    return points;\n  }\n\n  private getPoint(t: number): Point {\n    const twoPi = Math.PI * 2;\n    let deltaAngle = this.aEndAngle - this.aStartAngle;\n    const samePoints = Math.abs(deltaAngle) < Number.EPSILON;\n\n    // ensures that deltaAngle is 0 .. 2 PI\n    while (deltaAngle < 0) deltaAngle += twoPi;\n    while (deltaAngle > twoPi) deltaAngle -= twoPi;\n\n    if (deltaAngle < Number.EPSILON) {\n      if (samePoints) {\n        deltaAngle = 0;\n      } else {\n        deltaAngle = twoPi;\n      }\n    }\n\n    if (this.aClockwise === true && !samePoints) {\n      if (deltaAngle === twoPi) {\n        deltaAngle = -twoPi;\n      } else {\n        deltaAngle -= twoPi;\n      }\n    }\n\n    const angle = this.aStartAngle + t * deltaAngle;\n    let x = this.aX + this.xRadius * Math.cos(angle);\n    let y = this.aY + this.yRadius * Math.sin(angle);\n\n    if (this.aRotation !== 0) {\n      const cos = Math.cos(this.aRotation);\n      const sin = Math.sin(this.aRotation);\n\n      const tx = x - this.aX;\n      const ty = y - this.aY;\n\n      // Rotate the point about the center of the ellipse.\n      x = tx * cos - ty * sin + this.aX;\n      y = tx * sin + ty * cos + this.aY;\n    }\n\n    return { x, y };\n  }\n}\n","import { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { PCBShape } from '@/models/abstract';\nimport { GeometryUtils } from '@/utils';\nimport { EllipseCurve } from '../primitive/EllipseCurve';\n\ntype ArcCoords = {\n  center: Point;\n  clockwise: boolean;\n  end: Point;\n  start: Point;\n};\ntype ArcStyles = Partial<ShapeStyles>;\n\nexport class Arc extends PCBShape<ArcCoords, ArcStyles> {\n  public readonly type = ShapeEnum.Arc;\n\n  public override getPoints(): Point[][] {\n    const location = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, location);\n    const start = GeometryUtils.applyOffsetToPoint(this.coords.start, location);\n    const end = GeometryUtils.applyOffsetToPoint(this.coords.end, location);\n    const radius = GeometryUtils.getDistance(start, center);\n    const startAngle = GeometryUtils.getPointAngle(center, start);\n    const endAngle = GeometryUtils.getPointAngle(center, end);\n\n    const curve = new EllipseCurve(center.x, center.y, radius, radius, startAngle, endAngle, this.coords.clockwise);\n\n    const points = curve.getPoints();\n\n    return [points];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\n\nexport class QuadraticBezierCurve {\n  private readonly v0: Point;\n  private readonly v1: Point;\n  private readonly v2: Point;\n\n  constructor(v0: Point, v1: Point, v2: Point) {\n    this.v0 = v0;\n    this.v1 = v1;\n    this.v2 = v2;\n  }\n\n  public getPoints(divisions = 5): Point[] {\n    const points: Point[] = [];\n\n    for (let d = 0; d <= divisions; d += 1) {\n      points.push(this.getPoint(d / divisions));\n    }\n\n    return points;\n  }\n\n  private getPoint(t: number): Point {\n    const { v0, v1, v2 } = this;\n    const x = QuadraticBezierCurve.QuadraticBezier(t, v0.x, v1.x, v2.x);\n    const y = QuadraticBezierCurve.QuadraticBezier(t, v0.y, v1.y, v2.y);\n    const point = { x, y };\n\n    return point;\n  }\n\n  private static QuadraticBezierP0(t: number, p: number): number {\n    const k = 1 - t;\n    return k * k * p;\n  }\n\n  private static QuadraticBezierP1(t: number, p: number): number {\n    return 2 * (1 - t) * t * p;\n  }\n\n  private static QuadraticBezierP2(t: number, p: number): number {\n    return t * t * p;\n  }\n\n  private static QuadraticBezier(t: number, p0: number, p1: number, p2: number): number {\n    return (\n      QuadraticBezierCurve.QuadraticBezierP0(t, p0)\n      + QuadraticBezierCurve.QuadraticBezierP1(t, p1)\n      + QuadraticBezierCurve.QuadraticBezierP2(t, p2)\n    );\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\n\nimport { EllipseCurve } from './EllipseCurve';\nimport { QuadraticBezierCurve } from './QuadraticBezierCurve';\n\nexport class Path {\n  private points: Point[];\n  private currentPoint: Point;\n\n  constructor() {\n    this.points = [];\n    this.currentPoint = { x: 0, y: 0 };\n  }\n\n  public moveTo(x: number, y: number): void {\n    this.points.push({ x, y });\n    this.currentPoint = { x, y };\n  }\n\n  public lineTo(x: number, y: number): void {\n    this.points.push({ x, y });\n    this.currentPoint = { x, y };\n  }\n\n  public getPoints(): Point[] {\n    return this.points;\n  }\n\n  public absarc(\n    aX: number,\n    aY: number,\n    aRadius: number,\n    aStartAngle: number,\n    aEndAngle: number,\n    aClockwise: boolean,\n  ): void {\n    const curve = new EllipseCurve(aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise, 0);\n    // TODO: review\n    const curvePoints = curve.getPoints(GeometryUtils.getOptimalPointForArc(aRadius));\n\n    this.points.push(...curvePoints);\n\n    const lastPoint = curvePoints[curvePoints.length - 1];\n    this.currentPoint = { x: lastPoint.x, y: lastPoint.y };\n  }\n\n  public quadraticCurveTo(aCPx: number, aCPy: number, aX: number, aY: number): void {\n    const curve = new QuadraticBezierCurve({ ...this.currentPoint }, { x: aCPx, y: aCPy }, { x: aX, y: aY });\n\n    this.points.push(...curve.getPoints());\n\n    this.currentPoint = { x: aX, y: aY };\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\nimport { Path } from './Path';\n\ntype RectChamPathCorners = {\n  leftTop: boolean;\n  rightTop: boolean;\n  rightBot: boolean;\n  leftBot: boolean;\n};\n\nexport class RectChamPath {\n  private readonly center: Point;\n  private readonly width: number;\n  private readonly height: number;\n  private readonly chamfer: number;\n  private readonly chamCorners: RectChamPathCorners;\n\n  constructor(\n    center: Point,\n    width: number,\n    height: number,\n    chamfer: number,\n    chamCorners: RectChamPathCorners,\n  ) {\n    this.center = center;\n    this.width = width;\n    this.height = height;\n    this.chamfer = chamfer;\n    this.chamCorners = chamCorners;\n  }\n\n  public getPoints(): Point[] {\n    const halfWidth = this.width / 2;\n    const halfHeight = this.height / 2;\n    const { x: cx, y: cy } = this.center;\n\n    const pLeftTop: Point = {\n      x: cx - halfWidth,\n      y: cy + halfHeight,\n    };\n    const pRightTop: Point = {\n      x: cx + halfWidth,\n      y: cy + halfHeight,\n    };\n    const pRightBot: Point = {\n      x: cx + halfWidth,\n      y: cy - halfHeight,\n    };\n    const pLeftBot: Point = {\n      x: cx - halfWidth,\n      y: cy - halfHeight,\n    };\n\n    const path = new Path();\n\n    if (this.chamCorners.leftTop) {\n      path.moveTo(pLeftTop.x + this.chamfer, pLeftTop.y);\n    } else {\n      path.moveTo(pLeftTop.x, pLeftTop.y);\n    }\n\n    if (this.chamCorners.rightTop) {\n      path.lineTo(pRightTop.x - this.chamfer, pRightTop.y);\n      path.lineTo(pRightTop.x, pRightTop.y - this.chamfer);\n    } else {\n      path.lineTo(pRightTop.x, pRightTop.y);\n    }\n\n    if (this.chamCorners.rightBot) {\n      path.lineTo(pRightBot.x, pRightBot.y + this.chamfer);\n      path.lineTo(pRightBot.x - this.chamfer, pRightBot.y);\n    } else {\n      path.lineTo(pRightBot.x, pRightBot.y);\n    }\n\n    if (this.chamCorners.leftBot) {\n      path.lineTo(pLeftBot.x + this.chamfer, pLeftBot.y);\n      path.lineTo(pLeftBot.x, pLeftBot.y + this.chamfer);\n    } else {\n      path.lineTo(pLeftBot.x, pLeftBot.y);\n    }\n\n    if (this.chamCorners.leftTop) {\n      path.lineTo(pLeftTop.x, pLeftTop.y - this.chamfer);\n      path.lineTo(pLeftTop.x + this.chamfer, pLeftTop.y);\n    } else {\n      path.lineTo(pLeftTop.x, pLeftTop.y);\n    }\n\n    const points = path.getPoints();\n\n    return points;\n  }\n}\n","import { Point } from '@/types/ShapeTypes';\nimport { Path } from './Path';\n\ntype RectRoundPathCorners = {\n  leftTop: boolean;\n  rightTop: boolean;\n  rightBot: boolean;\n  leftBot: boolean;\n};\n\nexport class RectRoundPath {\n  private readonly center: Point;\n  private readonly width: number;\n  private readonly height: number;\n  private readonly radius: number;\n  private readonly roundCorners: RectRoundPathCorners;\n\n  constructor(\n    center: Point,\n    width: number,\n    height: number,\n    radius: number,\n    roundCorners: RectRoundPathCorners,\n  ) {\n    this.center = center;\n    this.width = width;\n    this.height = height;\n    this.radius = radius;\n    this.roundCorners = roundCorners;\n  }\n\n  public getPoints(): Point[] {\n    const halfWidth = this.width / 2;\n    const halfHeight = this.height / 2;\n    const { x: cx, y: cy } = this.center;\n\n    const pLeftTop: Point = {\n      x: cx - halfWidth,\n      y: cy - halfHeight,\n    };\n    const pRightTop: Point = {\n      x: cx + halfWidth,\n      y: cy - halfHeight,\n    };\n    const pRightBot: Point = {\n      x: cx + halfWidth,\n      y: cy + halfHeight,\n    };\n    const pLeftBot: Point = {\n      x: cx - halfWidth,\n      y: cy + halfHeight,\n    };\n\n    const path = new Path();\n\n    path.moveTo(pLeftTop.x + this.radius, pLeftTop.y);\n    path.lineTo(pRightTop.x - this.radius, pRightTop.y);\n\n    if (this.roundCorners.rightBot) {\n      path.quadraticCurveTo(pRightTop.x, pRightTop.y, pRightTop.x, pRightTop.y + this.radius);\n    } else {\n      path.lineTo(pRightTop.x, pRightTop.y);\n    }\n\n    path.lineTo(pRightBot.x, pRightBot.y - this.radius);\n\n    if (this.roundCorners.rightTop) {\n      path.quadraticCurveTo(pRightBot.x, pRightBot.y, pRightBot.x - this.radius, pRightBot.y);\n    } else {\n      path.lineTo(pRightBot.x, pRightBot.y);\n    }\n\n    path.moveTo(pLeftBot.x + this.radius, pLeftBot.y);\n\n    if (this.roundCorners.leftTop) {\n      path.quadraticCurveTo(pLeftBot.x, pLeftBot.y, pLeftBot.x, pLeftBot.y - this.radius);\n    } else {\n      path.lineTo(pLeftBot.x, pLeftBot.y);\n    }\n\n    path.moveTo(pLeftTop.x, pLeftTop.y + this.radius);\n\n    if (this.roundCorners.leftBot) {\n      path.quadraticCurveTo(pLeftTop.x, pLeftTop.y, pLeftTop.x + this.radius, pLeftTop.y);\n    } else {\n      path.lineTo(pLeftTop.x, pLeftTop.y);\n      path.lineTo(pLeftTop.x + this.radius, pLeftTop.y);\n    }\n\n    const points = path.getPoints();\n\n    return points;\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\nimport { EllipseCurve } from '../primitive';\n\ntype CircleCoords = {\n  center: Point;\n};\ntype CircleStyles = Partial<ShapeStyles> & {\n  diameter: number;\n};\n\nexport class Circle extends PCBShape<CircleCoords, CircleStyles> {\n  public readonly type = ShapeEnum.Circle;\n\n  public override getPoints(): Point[][] {\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, {\n      x: this.styles.xOffset,\n      y: this.styles.yOffset,\n    });\n    const radius = this.styles.diameter / 2;\n    const curve = new EllipseCurve(center.x, center.y, radius, radius);\n    const points = curve.getPoints();\n\n    return [points];\n  }\n\n  getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport {\n  CurvePoint, Point, ShapeEnum, ShapeStyles,\n} from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\nimport { Path } from '../primitive';\n\ntype PolylineCoords = {\n  location: Point;\n  begin: Point;\n  path: CurvePoint[];\n};\ntype PolylineStyles = Partial<ShapeStyles>;\n\nexport class Polyline extends PCBShape<PolylineCoords, PolylineStyles> {\n  public readonly type = ShapeEnum.Polyline;\n\n  public override getPoints(): Point[][] {\n    const { begin, location, path } = this.coords;\n    const linePath = new Path();\n\n    linePath.moveTo(begin.x, begin.y);\n\n    path.forEach((segment, i, segments) => {\n      if (segment.centerX !== undefined && segment.centerY !== undefined) {\n        const start = segments[i - 1] || begin;\n        const center = { x: segment.centerX, y: segment.centerY };\n        const radius = GeometryUtils.getDistance(center, segment);\n        const startAngle = GeometryUtils.getPointAngle(center, start);\n        const endAngle = GeometryUtils.getPointAngle(center, segment);\n        linePath.absarc(center.x, center.y, radius, startAngle, endAngle, segment.clockwise!);\n      } else {\n        linePath.lineTo(segment.x, segment.y);\n      }\n    });\n\n    const points = linePath.getPoints();\n\n    const { rotation, mirror } = this.styles;\n\n    const pointWithOffset = GeometryUtils.applyOffsetToPoints(points, {\n      x: this.styles.xOffset,\n      y: this.styles.yOffset,\n    });\n    const adaptedPoints = GeometryUtils.applyOffsetToPoints(pointWithOffset, location);\n    const rotatedPoints = GeometryUtils.rotatePoints(adaptedPoints, location, rotation);\n    const mirroredPoints = GeometryUtils.mirrorPoints(rotatedPoints, location, mirror);\n\n    return [mirroredPoints];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { Polyline } from './Polyline';\n\ntype ContourCoords = {\n  location: Point;\n  polylines?: ConstructorParameters<typeof Polyline>[0];\n  cutouts?: ConstructorParameters<typeof Polyline>[0][];\n};\ntype ContourStyles = Partial<ShapeStyles>;\n\n// TODO: move this shape to specific IPC2581 folder\nexport class Contour extends PCBShape<ContourCoords, ContourStyles> {\n  public readonly type = ShapeEnum.Contour;\n\n  public override getPoints(): Point[][] {\n    const shapes = [];\n\n    if (this.coords.polylines) {\n      shapes.push(new Polyline({ ...this.coords.polylines, location: { ...this.coords.location } }, this.styles));\n    }\n    if (this.coords.cutouts) {\n      this.coords.cutouts.forEach((cutout) => {\n        shapes.push(new Polyline({ ...cutout, location: { ...this.coords.location } }, this.styles));\n      });\n    }\n\n    const points = shapes.map((shape) => shape.getPoints()).flat();\n    return points;\n  }\n\n  public override getThickness(): number[] {\n    return [this.coords.polylines, ...(this.coords.cutouts || [])].filter((v) => !!v).map(() => this.styles.lineWidth);\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\n\ntype DiamondCoords = {\n  center: Point;\n};\ntype DiamondStyles = Partial<ShapeStyles> & {\n  width: number;\n  height: number;\n};\n\nexport class Diamond extends PCBShape<DiamondCoords, DiamondStyles> {\n  public readonly type = ShapeEnum.Diamond;\n\n  public override getPoints(): Point[][] {\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const { width, height, rotation } = this.styles;\n\n    const p1: Point = {\n      x: center.x,\n      y: center.y - height / 2,\n    };\n    const p2: Point = {\n      x: center.x + width / 2,\n      y: center.y,\n    };\n    const p3: Point = {\n      x: center.x,\n      y: center.y + height / 2,\n    };\n    const p4: Point = {\n      x: center.x - width / 2,\n      y: center.y,\n    };\n\n    const points = [p1, p2, p3, p4, p1];\n    const rotatedPoints = GeometryUtils.rotatePoints(points, center, rotation);\n\n    return [rotatedPoints];\n  }\n\n  getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\nimport { EllipseCurve } from '../primitive';\n\ntype DonutCoords = {\n  center: Point;\n};\ntype DonutStyles = Partial<ShapeStyles> & {\n  innerDiameter: number;\n  outerDiameter: number;\n  amountOfPoints: number;\n};\n\nexport class Donut extends PCBShape<DonutCoords, DonutStyles> {\n  public readonly type = ShapeEnum.Donut;\n\n  public override getPoints(): Point[][] {\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const { amountOfPoints, innerDiameter, outerDiameter } = this.styles;\n    const outerRadius = outerDiameter / 2;\n    const innerRadius = innerDiameter / 2;\n\n    const outerRingCurve = new EllipseCurve(center.x, center.y, outerRadius, outerRadius);\n    const outerRing = outerRingCurve.getPoints(amountOfPoints);\n\n    const innerRingCurve = new EllipseCurve(center.x, center.y, innerRadius, innerRadius);\n    const innerRing = innerRingCurve.getPoints(amountOfPoints);\n\n    return [outerRing, innerRing];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\nimport { EllipseCurve } from '../primitive';\n\ntype EllipseCoords = {\n  center: Point;\n};\ntype EllipseStyles = Partial<ShapeStyles> & {\n  width: number;\n  height: number;\n};\n\nexport class Ellipse extends PCBShape<EllipseCoords, EllipseStyles> {\n  public type = ShapeEnum.Ellipse;\n\n  public override getPoints(): Point[][] {\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const radiusX = this.styles.width / 2;\n    const radiusY = this.styles.height / 2;\n    const rotation = GeometryUtils.convertDegreesToRad(this.styles.rotation);\n\n    const curve = new EllipseCurve(\n      center.x,\n      center.y,\n      radiusX,\n      radiusY,\n      0,\n      Math.PI * 2,\n      false,\n      rotation,\n    );\n\n    const points = curve.getPoints();\n    const mirroredPoints = GeometryUtils.mirrorPoints(points, center, this.styles.mirror);\n\n    return [mirroredPoints];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\nimport { EllipseCurve } from '../primitive';\n\ntype HexagonCoords = {\n  center: Point;\n};\ntype HexagonStyles = Partial<ShapeStyles> & {\n  length: number;\n};\n\nexport class Hexagon extends PCBShape<HexagonCoords, HexagonStyles> {\n  public readonly type = ShapeEnum.Hexagon;\n\n  public override getPoints(): Point[][] {\n    const POINTS_NUMBER = 6;\n    const { center } = this.coords;\n    const radius = this.styles.length / 2;\n    const rotation = GeometryUtils.convertDegreesToRad(this.styles.rotation);\n\n    const curve = new EllipseCurve(center.x, center.y, radius, radius, 0, Math.PI * 2, false, rotation);\n\n    const points = curve.getPoints(POINTS_NUMBER);\n\n    return [points];\n  }\n\n  getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\n\ntype LineCoords = {\n  start: Point;\n  end: Point;\n};\ntype LineStyles = Partial<ShapeStyles>;\n\nexport class Line extends PCBShape<LineCoords, LineStyles> {\n  public readonly type = ShapeEnum.Line;\n\n  public override getPoints(): Point[][] {\n    const offset: Point = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const start = GeometryUtils.applyOffsetToPoint(this.coords.start, offset);\n    const end = GeometryUtils.applyOffsetToPoint(this.coords.end, offset);\n    const middlePoint = GeometryUtils.getMiddlePoint(start, end);\n    const rotatedPoints = GeometryUtils.rotatePoints([start, end], middlePoint, this.styles.rotation);\n\n    return [rotatedPoints];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\nimport { EllipseCurve } from '../primitive';\n\ntype OctagonCoords = {\n  center: Point;\n};\ntype OctagonStyles = Partial<ShapeStyles> & {\n  length: number;\n};\n\nexport class Octagon extends PCBShape<OctagonCoords, OctagonStyles> {\n  public readonly type = ShapeEnum.Octagon;\n\n  public override getPoints(): Point[][] {\n    const POINTS_NUMBER = 8;\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const radius = this.styles.length / 2;\n    const rotation = GeometryUtils.convertDegreesToRad(this.styles.rotation);\n\n    const curve = new EllipseCurve(center.x, center.y, radius, radius, 0, Math.PI * 2, false, rotation);\n\n    const points = curve.getPoints(POINTS_NUMBER);\n\n    return [points];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\nimport { RectRoundPath } from '../primitive';\n\ntype OvalCoords = {\n  center: Point;\n};\ntype OvalStyles = Partial<ShapeStyles> & {\n  width: number;\n  height: number;\n};\n\nexport class Oval extends PCBShape<OvalCoords, OvalStyles> {\n  public readonly type = ShapeEnum.Oval;\n\n  public override getPoints(): Point[][] {\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const {\n      width, height, rotation, mirror,\n    } = this.styles;\n    const radius = Math.min(height, width) / 2;\n\n    const rectRound = new RectRoundPath(center, width, height, radius, {\n      leftTop: true,\n      leftBot: true,\n      rightTop: true,\n      rightBot: true,\n    });\n\n    const points = rectRound.getPoints();\n    const rotatedPoints = GeometryUtils.rotatePoints(points, center, rotation);\n    const mirroredPoints = GeometryUtils.mirrorPoints(rotatedPoints, center, mirror);\n\n    return [mirroredPoints];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\n\ntype RectCenterCoords = {\n  center: Point;\n};\ntype RectCenterStyles = Partial<ShapeStyles> & {\n  width: number;\n  height: number;\n};\n\nexport class RectCenter extends PCBShape<RectCenterCoords, RectCenterStyles> {\n  public readonly type = ShapeEnum.RectCenter;\n\n  public override getPoints(): Point[][] {\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const {\n      width, height, rotation, mirror,\n    } = this.styles;\n\n    const x1 = center.x - width / 2;\n    const y1 = center.y - height / 2;\n    const x2 = center.x + width / 2;\n    const y2 = center.y + height / 2;\n\n    const points: Point[] = [\n      { x: x1, y: y1 },\n      { x: x2, y: y1 },\n      { x: x2, y: y2 },\n      { x: x1, y: y2 },\n      { x: x1, y: y1 },\n    ];\n\n    const rotatedPoints = GeometryUtils.rotatePoints(points, center, rotation);\n    const mirroredPoints = GeometryUtils.mirrorPoints(rotatedPoints, center, mirror);\n\n    return [mirroredPoints];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { PCBShape } from '@/models/abstract';\nimport { GeometryUtils } from '@/utils';\nimport { RectChamPath } from '../primitive';\n\ntype RectChamCoords = {\n  center: Point;\n};\ntype RectChamStyles = Partial<ShapeStyles> & {\n  height: number;\n  lowerLeft: boolean;\n  lowerRight: boolean;\n  chamfer: number;\n  upperLeft: boolean;\n  upperRight: boolean;\n  width: number;\n};\n\nexport class RectCham extends PCBShape<RectChamCoords, RectChamStyles> {\n  public readonly type = ShapeEnum.RectCham;\n\n  public getPoints(): Point[][] {\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const {\n      width,\n      height,\n      chamfer,\n      upperLeft,\n      upperRight,\n      lowerLeft,\n      lowerRight,\n      rotation,\n      mirror,\n    } = this.styles;\n\n    const rectChamfer = new RectChamPath(center, width, height, chamfer, {\n      leftTop: upperLeft,\n      leftBot: lowerLeft,\n      rightTop: upperRight,\n      rightBot: lowerRight,\n    });\n\n    const points = rectChamfer.getPoints();\n\n    const rotatedPoints = GeometryUtils.rotatePoints(points, center, -rotation);\n    const mirroredPoints = GeometryUtils.mirrorPoints(rotatedPoints, center, mirror);\n\n    return [mirroredPoints];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\n\ntype RectCornerCoords = {\n  center: Point;\n};\ntype RectCornerStyles = Partial<ShapeStyles> & {\n  lowerLeftX: number;\n  lowerLeftY: number;\n  upperRightX: number;\n  upperRightY: number;\n};\n\nexport class RectCorner extends PCBShape<RectCornerCoords, RectCornerStyles> {\n  public readonly type = ShapeEnum.RectCorner;\n\n  public override getPoints(): Point[][] {\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const {\n      lowerLeftX, lowerLeftY, upperRightX, upperRightY, rotation, mirror,\n    } = this.styles;\n\n    const points: Point[] = [\n      { x: lowerLeftX, y: lowerLeftY },\n      { x: lowerLeftX, y: upperRightY },\n      { x: upperRightX, y: upperRightY },\n      { x: upperRightX, y: lowerLeftY },\n      { x: lowerLeftX, y: lowerLeftY },\n    ];\n\n    const rotatedPoints = GeometryUtils.rotatePoints(points, center, rotation);\n    const mirroredPoints = GeometryUtils.mirrorPoints(rotatedPoints, center, mirror);\n\n    return [mirroredPoints];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\nimport { RectRoundPath } from '../primitive';\n\ntype RectRoundCoords = {\n  center: Point;\n};\ntype RectRoundStyles = Partial<ShapeStyles> & {\n  height: number;\n  lowerLeft: boolean;\n  lowerRight: boolean;\n  radius: number;\n  upperLeft: boolean;\n  upperRight: boolean;\n  width: number;\n};\n\nexport class RectRound extends PCBShape<RectRoundCoords, RectRoundStyles> {\n  public readonly type = ShapeEnum.RectRound;\n\n  public override getPoints(): Point[][] {\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const {\n      width,\n      height,\n      radius,\n      upperLeft,\n      upperRight,\n      lowerLeft,\n      lowerRight,\n      rotation,\n      mirror,\n    } = this.styles;\n\n    const rectRound = new RectRoundPath(center, width, height, radius, {\n      leftTop: upperLeft,\n      leftBot: lowerLeft,\n      rightTop: upperRight,\n      rightBot: lowerRight,\n    });\n\n    const points = rectRound.getPoints();\n\n    const rotatedPoints = GeometryUtils.rotatePoints(points, center, -rotation);\n    const mirroredPoints = GeometryUtils.mirrorPoints(rotatedPoints, center, mirror);\n\n    return [mirroredPoints];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\nimport { EllipseCurve } from '../primitive';\n\ntype ThermalCoords = {\n  center: Point;\n};\ntype ThermalStyles = Partial<ShapeStyles> & {\n  gap: number;\n  innerDiameter: number;\n  outerDiameter: number;\n  amountOfPoints: number;\n  spokeCount: number;\n  spokeStartAngle: number;\n};\n\nexport class Thermal extends PCBShape<ThermalCoords, ThermalStyles> {\n  public readonly type = ShapeEnum.Thermal;\n\n  public override getPoints(): Point[][] {\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const {\n      amountOfPoints, outerDiameter, innerDiameter, spokeStartAngle, gap, spokeCount,\n    } = this.styles;\n    const outerRadius = outerDiameter / 2;\n    const innerRadius = innerDiameter / 2;\n\n    const outerRingCurve = new EllipseCurve(center.x, center.y, outerRadius, outerRadius);\n    const outerRing = outerRingCurve.getPoints(amountOfPoints);\n\n    const innerRingCurve = new EllipseCurve(center.x, center.y, innerRadius, innerRadius);\n    const innerRing = innerRingCurve.getPoints(amountOfPoints);\n\n    const diagonalLinesRotation = GeometryUtils.convertDegreesToRad(spokeStartAngle);\n    const diagonalCircleCurve = new EllipseCurve(\n      center.x,\n      center.y,\n      outerRadius,\n      outerRadius,\n      0,\n      Math.PI * 2,\n      false,\n      diagonalLinesRotation,\n    );\n    const diagonalCircle = diagonalCircleCurve.getPoints(spokeCount);\n\n    const diagonalLinesOffset = gap / 2;\n    const diagonalLines = GeometryUtils.getDiagonalLines(diagonalCircle, diagonalLinesOffset);\n\n    return [outerRing, innerRing, ...diagonalLines];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport { Point, ShapeEnum, ShapeStyles } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\n\ntype TriangleCoords = {\n  center: Point;\n};\ntype TriangleStyles = Partial<ShapeStyles> & {\n  base: number;\n  height: number;\n};\n\nexport class Triangle extends PCBShape<TriangleCoords, TriangleStyles> {\n  public readonly type = ShapeEnum.Triangle;\n\n  public override getPoints(): Point[][] {\n    const offset = { x: this.styles.xOffset, y: this.styles.yOffset };\n    const center = GeometryUtils.applyOffsetToPoint(this.coords.center, offset);\n    const {\n      base, height, mirror, rotation,\n    } = this.styles;\n\n    const p1: Point = {\n      x: center.x,\n      y: center.y + height / 2,\n    };\n    const p2: Point = {\n      x: center.x + base / 2,\n      y: center.y - height / 2,\n    };\n    const p3: Point = {\n      x: center.x - base / 2,\n      y: center.y - height / 2,\n    };\n\n    const points = [p1, p2, p3, p1];\n    const rotatedPoints = GeometryUtils.rotatePoints(points, center, rotation);\n    const mirroredPoints = GeometryUtils.mirrorPoints(rotatedPoints, center, mirror);\n\n    return [mirroredPoints];\n  }\n\n  public override getThickness(): number[] {\n    return [this.styles.lineWidth];\n  }\n}\n","// --- Basic types and utilities ---\nimport { PartialBy } from './TypesHelper';\n\ntype IPC2581XmlCoords = { x: number; y: number };\ntype IPC2581XmlID = { id: string };\ntype IPC2581XmlPolySegment = {\n  x: number;\n  y: number;\n  centerX?: number;\n  centerY?: number;\n  clockwise?: boolean | string;\n};\ntype IPC2581NonstandardAttribute = { name: string; value: string; type: string };\n\nenum IPC2581XmlShapeNumberOfPointsType {\n  HEXAGON = 'HEXAGON',\n  OCTAGON = 'OCTAGON',\n  ROUND = 'ROUND',\n  SQUARE = 'SQUARE',\n}\nenum IPC2581XmlUNITS {\n  INCH = 'INCH',\n  MILLIMETER = 'MILLIMETER',\n  MICRON = 'MICRON',\n}\n\n// --- Primitives (geometry, shapes) ---\ntype IPC2581XmlLineStyles = { lineEnd: string; lineWidth: number };\ntype IPC2581XmlShapeWidthLineStyles = {\n  FillDescRef?: IPC2581XmlID;\n  LineDescRef?: IPC2581XmlID;\n  LineDesc?: IPC2581XmlLineStyles;\n};\ntype IPC2581XmlPolylineCoords = IPC2581XmlShapeWidthLineStyles & {\n  [key: string]: IPC2581XmlPolySegment;\n} & {\n  PolyBegin: IPC2581XmlCoords;\n};\ntype IPC2581XmlPrimitiveShape = {\n  Location: IPC2581XmlCoords;\n  Xform?: { rotation: number; mirror?: string; xOffset?: number; yOffset?: number };\n};\ntype IPC2581XmlArc = {\n  Arc: (IPC2581XmlShapeWidthLineStyles & {\n    centerX: number;\n    centerY: number;\n    clockwise: string;\n    endX: number;\n    endY: number;\n    startX: number;\n    startY: number;\n  })[];\n};\ntype IPC2581XmlCircle = IPC2581XmlPrimitiveShape & { Circle: { diameter: number }[] };\ntype IPC2581XmlContour = IPC2581XmlPrimitiveShape & {\n  Contour: (IPC2581XmlShapeWidthLineStyles & {\n    Polygon?: IPC2581XmlPolylineCoords;\n    Cutout?: IPC2581XmlPolylineCoords[];\n  })[];\n};\ntype IPC2581XmlDiamond = IPC2581XmlPrimitiveShape & {\n  Diamond: { width: number; height: number }[];\n};\ntype IPC2581XmlDonut = IPC2581XmlPrimitiveShape & {\n  Donut: {\n    innerDiameter: number;\n    outerDiameter: number;\n    shape: IPC2581XmlShapeNumberOfPointsType;\n  }[];\n};\ntype IPC2581XmlEllipse = IPC2581XmlPrimitiveShape & {\n  Ellipse: { width: number; height: number }[];\n};\ntype IPC2581XmlHexagon = IPC2581XmlPrimitiveShape & { Hexagon: { length: number }[] };\ntype IPC2581XmlLine = IPC2581XmlPrimitiveShape & {\n  Line: ({\n    endX: number;\n    endY: number;\n    startX: number;\n    startY: number;\n  } & IPC2581XmlShapeWidthLineStyles)[];\n};\ntype IPC2581XmlOctagon = IPC2581XmlPrimitiveShape & { Octagon: { length: number }[] };\ntype IPC2581XmlOutline = IPC2581XmlPrimitiveShape & {\n  Outline: (IPC2581XmlShapeWidthLineStyles & { Polygon?: IPC2581XmlPolylineCoords })[];\n};\ntype IPC2581XmlOval = IPC2581XmlPrimitiveShape & { Oval: { width: number; height: number }[] };\ntype IPC2581XmlPolyline = IPC2581XmlPrimitiveShape & {\n  Polyline: (IPC2581XmlShapeWidthLineStyles & IPC2581XmlPolylineCoords)[];\n};\ntype IPC2581XmlRectCham = IPC2581XmlPrimitiveShape & {\n  RectCham: {\n    height: number;\n    lowerLeft: string;\n    lowerRight: string;\n    chamfer: number;\n    upperLeft: string;\n    upperRight: string;\n    width: number;\n  }[];\n};\ntype IPC2581XmlRectCenter = IPC2581XmlPrimitiveShape & {\n  RectCenter: { width: number; height: number }[];\n};\ntype IPC2581XmlRectCorner = IPC2581XmlPrimitiveShape & {\n  RectCorner: {\n    lowerLeftX: number;\n    lowerLeftY: number;\n    upperRightX: number;\n    upperRightY: number;\n  }[];\n};\ntype IPC2581XmlRectRound = IPC2581XmlPrimitiveShape & {\n  RectRound: {\n    height: number;\n    lowerLeft: string;\n    lowerRight: string;\n    radius: number;\n    upperLeft: string;\n    upperRight: string;\n    width: number;\n  }[];\n};\ntype IPC2581XmlThermal = IPC2581XmlPrimitiveShape & {\n  Thermal: {\n    gap: number;\n    innerDiameter: number;\n    outerDiameter: number;\n    shape: IPC2581XmlShapeNumberOfPointsType;\n    spokeCount: number;\n    spokeStartAngle: number;\n  }[];\n};\ntype IPC2581XmlTriangle = IPC2581XmlPrimitiveShape & {\n  Triangle: { base: number; height: number }[];\n};\n\n// --- More complex structures (compositions of primitives) ---\ntype IPC2581XmlAllPrimitiveShapes = Partial<IPC2581XmlCircle> &\n  Partial<IPC2581XmlContour> &\n  Partial<IPC2581XmlDiamond> &\n  Partial<IPC2581XmlDonut> &\n  Partial<IPC2581XmlEllipse> &\n  Partial<IPC2581XmlHexagon> &\n  Partial<IPC2581XmlLine> &\n  Partial<IPC2581XmlOctagon> &\n  Partial<IPC2581XmlOval> &\n  Partial<IPC2581XmlPolyline> &\n  Partial<IPC2581XmlRectCenter> &\n  Partial<IPC2581XmlRectCham> &\n  Partial<IPC2581XmlRectCorner> &\n  Partial<IPC2581XmlRectRound> &\n  Partial<IPC2581XmlThermal> &\n  Partial<IPC2581XmlTriangle>;\n\ntype IPC2581XmlUserPrimitiveRef = { UserPrimitiveRef: IPC2581XmlID };\ntype IPC2581XmlUserSpecial = { UserSpecial: IPC2581XmlAllPrimitiveShapes };\ntype IPC2581XmlLayerSetFeatures = IPC2581XmlAllPrimitiveShapes &\n  Partial<IPC2581XmlUserPrimitiveRef> &\n  Partial<IPC2581XmlUserSpecial>;\n\n// --- Dictionaries and reference tables ---\ntype IPC2581XmlContentEntryColor = IPC2581XmlID & { Color: { r: number; g: number; b: number } };\ntype IPC2581XmlContentEntryLineDesc = IPC2581XmlID & { LineDesc: IPC2581XmlLineStyles };\ntype IPC2581XmlContentEntryStandard = IPC2581XmlID & IPC2581XmlAllPrimitiveShapes;\ntype IPC2581XmlContentEntryUser = IPC2581XmlID & { UserSpecial?: object };\ntype IPC2581XmlContent = {\n  DictionaryColor: { EntryColor: IPC2581XmlContentEntryColor[] };\n  DictionaryLineDesc: { EntryLineDesc: IPC2581XmlContentEntryLineDesc[] };\n  DictionaryStandard: { EntryStandard: IPC2581XmlContentEntryStandard[] };\n  DictionaryUser?: { EntryUser: IPC2581XmlContentEntryUser[] };\n  LayerRef: { name: string }[] | string[];\n};\n\n// --- Board elements, components, pins, pads ---\ntype IPC2581XmlComponent = IPC2581XmlPrimitiveShape & {\n  height?: string;\n  layerRef: string;\n  mountType?: string;\n  packageRef?: string;\n  part?: string;\n  refDes?: string;\n  standoff?: string;\n  NonstandardAttribute?: IPC2581NonstandardAttribute[];\n};\ntype IPC2581XmlHole = {\n  Hole: {\n    diameter: number;\n    name: string;\n    platingStatus: string;\n    plusTol: string;\n    x: number;\n    y: number;\n  }[];\n};\ntype IPC2581XmlMarking = {\n  Marking: (IPC2581XmlPrimitiveShape & IPC2581XmlAllPrimitiveShapes & { markingUsage: string })[] | IPC2581XmlPolyline;\n};\ntype IPC2581XmlSilkScreen = { Target: (IPC2581XmlPrimitiveShape & IPC2581XmlAllPrimitiveShapes)[] };\n\ntype IPC2581XmlStandardPrimitiveRef = { StandardPrimitiveRef: IPC2581XmlID };\ntype IPC2581XmlPrimitiveRef = Partial<IPC2581XmlUserPrimitiveRef> & Partial<IPC2581XmlStandardPrimitiveRef>;\ntype IPC2581XmlPad = IPC2581XmlPrimitiveShape &\n  IPC2581XmlPrimitiveRef & {\n    padstackDefRef: string;\n    PinRef: { pin: string; componentRef: string }[];\n  };\ntype IPC2581XmlPin = IPC2581XmlPrimitiveShape &\n  IPC2581XmlAllPrimitiveShapes &\n  IPC2581XmlStandardPrimitiveRef & { electricalType: string; number: string; type: string };\ntype IPC2581XmlPackage = IPC2581XmlOutline & {\n  height?: string;\n  name: string;\n  pinOne?: string;\n  pinOneOrientation?: string;\n  type?: string;\n  AssemblyDrawing?: IPC2581XmlOutline & Partial<IPC2581XmlMarking>;\n  Pin?: IPC2581XmlPin[];\n  PickupPoint?: IPC2581XmlCoords[];\n  SilkScreen?: IPC2581XmlSilkScreen;\n};\n\n// --- LayerSet, UserSpecial, XML ---\ntype IPC2581XmlLayerSet = PartialBy<IPC2581XmlHole, 'Hole'> & {\n  Features?: IPC2581XmlLayerSetFeatures[];\n  NonstandardAttribute?: IPC2581NonstandardAttribute[];\n  Pad?: IPC2581XmlPad[];\n  SlotCavity?: IPC2581XmlOutline & { componentRef: string; geometry: string };\n  geometryUsage?: string;\n  net?: string;\n};\n\n// --- Layer, Stackup, Step, EcadCadHeader, EcadCadData, Ecad ---\ntype IPC2581XmlEcadCadHeaderSpecInfo = { type: string; Property: object };\ntype IPC2581XmlEcadCadHeaderSpec = {\n  name: string;\n  Conductor?: IPC2581XmlEcadCadHeaderSpecInfo[];\n  Dielectric?: IPC2581XmlEcadCadHeaderSpecInfo[];\n  General?: IPC2581XmlEcadCadHeaderSpecInfo[];\n};\ntype IPC2581XmlEcadCadHeader = { units?: string; Spec: IPC2581XmlEcadCadHeaderSpec[] };\ntype IPC2581XmlEcadCadDataLayer = {\n  layerFunction?: string;\n  name?: string;\n  polarity?: string;\n  side?: string;\n};\ntype IPC2581XmlEcadCadDataStackupLayer = {\n  layerOrGroupRef: string;\n  materialType?: string;\n  thickness?: number;\n  tolMinus?: number;\n  tolPlus?: number;\n  sequence?: number;\n  SpecRef?: IPC2581XmlID;\n};\ntype IPC2581XmlEcadCadDataStackup = {\n  StackupGroup: { StackupLayer: IPC2581XmlEcadCadDataStackupLayer[] };\n};\n\ntype IPC2581XmlEcadCadDataStep = {\n  name: string;\n  Component: IPC2581XmlComponent[];\n  LayerFeature: { layerRef: string; Set: IPC2581XmlLayerSet[] }[];\n  LogicalNet?: object[];\n  Package: IPC2581XmlPackage[];\n  PadStackDef?: object[];\n  Profile?: { Polygon?: IPC2581XmlPolylineCoords[]; Cutout?: IPC2581XmlPolylineCoords[] }[];\n};\ntype IPC2581XmlEcadCadData = {\n  Layer?: IPC2581XmlEcadCadDataLayer[];\n  Stackup?: IPC2581XmlEcadCadDataStackup;\n  LayerDesc?: {\n    name: string;\n    Layer: IPC2581XmlEcadCadDataLayer[];\n    Stackup: IPC2581XmlEcadCadDataStackup;\n  };\n  Step?: IPC2581XmlEcadCadDataStep;\n  StepList?: { name: string; Step: IPC2581XmlEcadCadDataStep };\n};\ntype IPC2581XmlEcad = { CadHeader: IPC2581XmlEcadCadHeader; CadData: IPC2581XmlEcadCadData };\n\n// --- Root type ---\ntype IPC2581Xml = {\n  'IPC-2581': {\n    Bom?: object;\n    Content: IPC2581XmlContent;\n    Ecad: IPC2581XmlEcad;\n  };\n};\n\nexport {\n  IPC2581Xml,\n  IPC2581XmlArc,\n  IPC2581XmlCircle,\n  IPC2581XmlComponent,\n  IPC2581XmlContent,\n  IPC2581XmlContentEntryColor,\n  IPC2581XmlContentEntryLineDesc,\n  IPC2581XmlContentEntryStandard,\n  IPC2581XmlContentEntryUser,\n  IPC2581XmlContour,\n  IPC2581XmlDiamond,\n  IPC2581XmlDonut,\n  IPC2581XmlEcad,\n  IPC2581XmlEcadCadDataStep,\n  IPC2581XmlEcadCadDataLayer,\n  IPC2581XmlEcadCadHeaderSpecInfo,\n  IPC2581XmlEllipse,\n  IPC2581XmlHexagon,\n  IPC2581XmlHole,\n  IPC2581XmlID,\n  IPC2581XmlLayerSet,\n  IPC2581XmlLayerSetFeatures,\n  IPC2581XmlLine,\n  IPC2581XmlLineStyles,\n  IPC2581XmlMarking,\n  IPC2581NonstandardAttribute,\n  IPC2581XmlOctagon,\n  IPC2581XmlOutline,\n  IPC2581XmlOval,\n  IPC2581XmlPin,\n  IPC2581XmlPolyline,\n  IPC2581XmlPolylineCoords,\n  IPC2581XmlPrimitiveRef,\n  IPC2581XmlPrimitiveShape,\n  IPC2581XmlRectCham,\n  IPC2581XmlRectCenter,\n  IPC2581XmlRectCorner,\n  IPC2581XmlRectRound,\n  IPC2581XmlShapeNumberOfPointsType,\n  IPC2581XmlShapeWidthLineStyles,\n  IPC2581XmlSilkScreen,\n  IPC2581XmlUNITS,\n  IPC2581XmlThermal,\n  IPC2581XmlTriangle,\n};\n","import {\n  Arc,\n  Circle,\n  Contour,\n  Diamond,\n  Donut,\n  Ellipse,\n  Hexagon,\n  Line,\n  Octagon,\n  Oval,\n  Polyline,\n  RectCenter,\n  RectCham,\n  RectCorner,\n  RectRound,\n  Thermal,\n  Triangle,\n} from '@/models/geometry/shapes';\nimport {\n  IPC2581XmlArc,\n  IPC2581XmlCircle,\n  IPC2581XmlContour,\n  IPC2581XmlDiamond,\n  IPC2581XmlDonut,\n  IPC2581XmlEllipse,\n  IPC2581XmlHexagon,\n  IPC2581XmlHole,\n  IPC2581XmlLine,\n  IPC2581XmlOctagon,\n  IPC2581XmlOutline,\n  IPC2581XmlOval,\n  IPC2581XmlPolyline,\n  IPC2581XmlPolylineCoords,\n  IPC2581XmlPrimitiveShape,\n  IPC2581XmlRectCenter,\n  IPC2581XmlRectCham,\n  IPC2581XmlRectCorner,\n  IPC2581XmlRectRound,\n  IPC2581XmlShapeNumberOfPointsType,\n  IPC2581XmlShapeWidthLineStyles,\n  IPC2581XmlTriangle,\n  IPC2581XmlThermal,\n} from '@/types/IPC2581XMLTypes';\nimport { ShapeLineStyles, ShapeStyles } from '@/types/ShapeTypes';\nimport { Omit } from '@/types/TypesHelper';\nimport { ParsingUtils } from '@/utils';\n\ntype getLineStylesFunc = (shape: IPC2581XmlShapeWidthLineStyles) => ShapeLineStyles | undefined;\n\nexport class IPC2581ShapeFactory {\n  public static createArcs(arcXml: IPC2581XmlArc, getLineStyles: getLineStylesFunc): Arc[] {\n    return arcXml.Arc.map(\n      (arc) => new Arc(\n        {\n          center: { x: arc.centerX, y: arc.centerY },\n          start: { x: arc.startX, y: arc.startY },\n          end: { x: arc.endX, y: arc.endY },\n          clockwise: ParsingUtils.parseBoolean(arc.clockwise),\n        },\n        getLineStyles(arc) || {},\n      ),\n    );\n  }\n\n  public static createCircles(circleXml: IPC2581XmlCircle): Circle[] {\n    return circleXml.Circle.map(\n      (circle) => new Circle(\n        {\n          center: { ...circleXml.Location },\n        },\n        {\n          diameter: circle.diameter,\n          ...IPC2581ShapeFactory.parseXform(circleXml.Xform),\n        },\n      ),\n    );\n  }\n\n  public static createContours(contours: IPC2581XmlContour, getLineStyles: getLineStylesFunc): Contour[] {\n    return contours.Contour.map(\n      (contour) => new Contour(\n        {\n          location: { ...(contours.Location || { x: 0, y: 0 }) },\n          polylines: IPC2581ShapeFactory.parsePolylineCoords(contour.Polygon),\n          cutouts: contour.Cutout?.map((polyline) => IPC2581ShapeFactory.parsePolylineCoords(polyline)).filter(\n            (v): v is NonNullable<typeof v> => !!v,\n          ),\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(contours.Xform),\n          ...(getLineStyles(contour) || {}),\n        },\n      ),\n    );\n  }\n\n  public static createDiamonds(diamondXml: IPC2581XmlDiamond): Diamond[] {\n    return diamondXml.Diamond.map(\n      (diamond) => new Diamond(\n        {\n          center: { ...diamondXml.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(diamondXml.Xform),\n          width: diamond.width,\n          height: diamond.height,\n        },\n      ),\n    );\n  }\n\n  public static createDonuts(donutsXml: IPC2581XmlDonut): Donut[] {\n    return donutsXml.Donut.map(\n      (donut) => new Donut(\n        {\n          center: { ...donutsXml.Location },\n        },\n        {\n          outerDiameter: donut.outerDiameter,\n          innerDiameter: donut.innerDiameter,\n          amountOfPoints: IPC2581ShapeFactory.getNumberOfPointsByType(donut.shape)!,\n          ...IPC2581ShapeFactory.parseXform(donutsXml.Xform),\n        },\n      ),\n    );\n  }\n\n  public static createEllipses(ellipseXml: IPC2581XmlEllipse): Ellipse[] {\n    return ellipseXml.Ellipse.map(\n      (ellipse) => new Ellipse(\n        {\n          center: { ...ellipseXml.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(ellipseXml.Xform),\n          width: ellipse.width,\n          height: ellipse.height,\n        },\n      ),\n    );\n  }\n\n  public static createHexagons(hexagonsXml: IPC2581XmlHexagon): Hexagon[] {\n    return hexagonsXml.Hexagon.map(\n      (hexagon) => new Hexagon(\n        {\n          center: { ...hexagonsXml.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(hexagonsXml.Xform),\n          length: hexagon.length,\n        },\n      ),\n    );\n  }\n\n  public static createHoles(holesXml: IPC2581XmlHole): Circle[] {\n    return holesXml.Hole.map(\n      (hole) => new Circle(\n        {\n          center: { x: hole.x, y: hole.y },\n        },\n        {\n          diameter: hole.diameter,\n        },\n      ),\n    );\n  }\n\n  public static createLines(linesXml: IPC2581XmlLine, getLineStyles: getLineStylesFunc): Line[] {\n    return linesXml.Line.map(\n      (line) => new Line(\n        {\n          start: { x: line.startX, y: line.startY },\n          end: { x: line.endX, y: line.endY },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(linesXml.Xform),\n          ...(getLineStyles(line) || {}),\n        },\n      ),\n    );\n  }\n\n  public static createOctagons(octagonsXml: IPC2581XmlOctagon): Octagon[] {\n    return octagonsXml.Octagon.map(\n      (octagon) => new Octagon(\n        {\n          center: { ...octagonsXml.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(octagonsXml.Xform),\n          length: octagon.length,\n        },\n      ),\n    );\n  }\n\n  public static createOutlines(outlinesXml: IPC2581XmlOutline, getLineStyles: getLineStylesFunc): Contour[] {\n    return outlinesXml.Outline.map(\n      (outline) => new Contour(\n        {\n          location: { ...(outlinesXml.Location || { x: 0, y: 0 }) },\n          polylines: IPC2581ShapeFactory.parsePolylineCoords(outline.Polygon),\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(outlinesXml.Xform),\n          ...(getLineStyles(outline) || {}),\n        },\n      ),\n    );\n  }\n\n  public static createOvals(ovalsXml: IPC2581XmlOval): Oval[] {\n    return ovalsXml.Oval.map(\n      (oval) => new Oval(\n        {\n          center: { ...ovalsXml.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(ovalsXml.Xform),\n          width: oval.width,\n          height: oval.height,\n        },\n      ),\n    );\n  }\n\n  public static createPolylines(polylines: IPC2581XmlPolyline, getLineStyles: getLineStylesFunc): Polyline[] {\n    return polylines.Polyline.map(\n      (polyline) => new Polyline(\n        {\n          ...IPC2581ShapeFactory.parsePolylineCoords(polyline)!,\n          location: { ...polylines.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(polylines.Xform),\n          ...(getLineStyles(polyline) || {}),\n        },\n      ),\n    );\n  }\n\n  public static createRectCenters(rectCenters: IPC2581XmlRectCenter): RectCenter[] {\n    return rectCenters.RectCenter.map(\n      (rectCenter) => new RectCenter(\n        {\n          center: { ...rectCenters.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(rectCenters.Xform),\n          width: rectCenter.width,\n          height: rectCenter.height,\n        },\n      ),\n    );\n  }\n\n  public static createRectChams(rectChams: IPC2581XmlRectCham): RectCham[] {\n    return rectChams.RectCham.map(\n      (rectCham) => new RectCham(\n        {\n          center: { ...rectChams.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(rectChams.Xform),\n          width: rectCham.width,\n          height: rectCham.height,\n          chamfer: rectCham.chamfer,\n          upperLeft: ParsingUtils.parseBoolean(rectCham.upperLeft),\n          upperRight: ParsingUtils.parseBoolean(rectCham.upperRight),\n          lowerLeft: ParsingUtils.parseBoolean(rectCham.lowerLeft),\n          lowerRight: ParsingUtils.parseBoolean(rectCham.lowerRight),\n        },\n      ),\n    );\n  }\n\n  public static createRectCorners(rectCorners: IPC2581XmlRectCorner): RectCorner[] {\n    return rectCorners.RectCorner.map(\n      (rectCorner) => new RectCorner(\n        {\n          center: { ...rectCorners.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(rectCorners.Xform),\n          ...rectCorner,\n        },\n      ),\n    );\n  }\n\n  public static createRectRounds(rectRounds: IPC2581XmlRectRound): RectRound[] {\n    return rectRounds.RectRound.map(\n      (rectRound) => new RectRound(\n        {\n          center: { ...rectRounds.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(rectRounds.Xform),\n          width: rectRound.width,\n          height: rectRound.height,\n          radius: rectRound.radius,\n          upperLeft: ParsingUtils.parseBoolean(rectRound.upperLeft),\n          upperRight: ParsingUtils.parseBoolean(rectRound.upperRight),\n          lowerLeft: ParsingUtils.parseBoolean(rectRound.lowerLeft),\n          lowerRight: ParsingUtils.parseBoolean(rectRound.lowerRight),\n        },\n      ),\n    );\n  }\n\n  public static createThermals(thermalsXml: IPC2581XmlThermal): Thermal[] {\n    return thermalsXml.Thermal.map(\n      (thermal) => new Thermal(\n        {\n          center: { ...thermalsXml.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(thermalsXml.Xform),\n          gap: thermal.gap,\n          innerDiameter: thermal.innerDiameter,\n          outerDiameter: thermal.outerDiameter,\n          spokeCount: thermal.spokeCount,\n          spokeStartAngle: thermal.spokeStartAngle,\n          amountOfPoints: IPC2581ShapeFactory.getNumberOfPointsByType(thermal.shape)!,\n        },\n      ),\n    );\n  }\n\n  public static createTriangles(trianglesXml: IPC2581XmlTriangle): Triangle[] {\n    return trianglesXml.Triangle.map(\n      (triangle) => new Triangle(\n        {\n          center: { ...trianglesXml.Location },\n        },\n        {\n          ...IPC2581ShapeFactory.parseXform(trianglesXml.Xform),\n          base: triangle.base,\n          height: triangle.height,\n        },\n      ),\n    );\n  }\n\n  private static getNumberOfPointsByType(type: IPC2581XmlShapeNumberOfPointsType): number | undefined {\n    const SHAPE_TYPES = {\n      [IPC2581XmlShapeNumberOfPointsType.ROUND]: undefined,\n      [IPC2581XmlShapeNumberOfPointsType.SQUARE]: 4,\n      [IPC2581XmlShapeNumberOfPointsType.HEXAGON]: 6,\n      [IPC2581XmlShapeNumberOfPointsType.OCTAGON]: 8,\n    };\n\n    return SHAPE_TYPES[type];\n  }\n\n  private static parseXform(Xform: IPC2581XmlPrimitiveShape['Xform']): Partial<Omit<ShapeStyles, 'lineWidth'>> {\n    if (!Xform) return {};\n    return {\n      rotation: Xform.rotation ?? 0,\n      mirror: ParsingUtils.parseBoolean(Xform.mirror ?? ''),\n      xOffset: Xform.xOffset ?? 0,\n      yOffset: Xform.yOffset ?? 0,\n    };\n  }\n\n  private static parsePolylineCoords(polylineCoords: IPC2581XmlPolylineCoords | undefined) {\n    if (!polylineCoords) return undefined;\n\n    const {\n      LineDescRef, LineDesc, FillDescRef, PolyBegin, ...points\n    } = polylineCoords;\n\n    return {\n      location: { x: 0, y: 0 },\n      begin: { ...PolyBegin },\n      path: Object.values(points).map((point) => {\n        const { clockwise, ...rest } = point;\n        return { ...rest, ...(clockwise === undefined ? {} : { clockwise: ParsingUtils.parseBoolean(clockwise) }) };\n      }),\n    };\n  }\n}\n","import {\n  IPC2581XmlShapeWidthLineStyles,\n  IPC2581XmlLineStyles,\n  IPC2581XmlLayerSetFeatures,\n  IPC2581XmlLayerSet,\n  IPC2581XmlPrimitiveRef,\n  IPC2581XmlArc,\n  IPC2581XmlCircle,\n  IPC2581XmlContour,\n  IPC2581XmlDiamond,\n  IPC2581XmlDonut,\n  IPC2581XmlEllipse,\n  IPC2581XmlHexagon,\n  IPC2581XmlLine,\n  IPC2581XmlOctagon,\n  IPC2581XmlOval,\n  IPC2581XmlHole,\n  IPC2581XmlOutline,\n  IPC2581XmlPolyline,\n  IPC2581XmlRectCenter,\n  IPC2581XmlRectCham,\n  IPC2581XmlRectCorner,\n  IPC2581XmlRectRound,\n  IPC2581XmlTriangle,\n  IPC2581XmlThermal,\n} from '@/types/IPC2581XMLTypes';\nimport { ShapeEnum } from '@/types/ShapeTypes';\nimport { PCBShape } from '@/models/abstract';\nimport { IPC2581ShapeFactory } from './IPC2581ShapeFactory';\nimport { IPC2581ContentParser } from './IPC2581ContentParser';\n\ntype GetLineStylesFunction = (shape: IPC2581XmlShapeWidthLineStyles) => IPC2581XmlLineStyles | undefined;\n\nexport class IPC2581ShapeParser {\n  private readonly contentParser: IPC2581ContentParser;\n\n  constructor(contentParser: IPC2581ContentParser) {\n    this.contentParser = contentParser;\n  }\n\n  private getLineStyles(shape: IPC2581XmlShapeWidthLineStyles): IPC2581XmlLineStyles | undefined {\n    if (shape.LineDescRef) {\n      const styleID = shape.LineDescRef.id;\n      const stylesRef = this.contentParser.getLineDescByID(styleID);\n      return stylesRef && { ...stylesRef.LineDesc };\n    }\n\n    if (shape.LineDesc) {\n      return { ...shape.LineDesc };\n    }\n\n    return undefined;\n  }\n\n  public getShapes(shapeData: { [key: string]: unknown }): PCBShape<any, any>[] {\n    const shapeTypes = Object.keys(ShapeEnum).filter((type) => !!shapeData[type]) as (keyof typeof ShapeEnum)[];\n\n    const getLineStyles: GetLineStylesFunction = this.getLineStyles.bind(this);\n\n    const getShape = {\n      [ShapeEnum.Arc]: (arcs: IPC2581XmlArc) => IPC2581ShapeFactory.createArcs(arcs, getLineStyles),\n      [ShapeEnum.Circle]: (circles: IPC2581XmlCircle) => IPC2581ShapeFactory.createCircles(circles),\n      [ShapeEnum.Contour]: (contours: IPC2581XmlContour) => IPC2581ShapeFactory.createContours(contours, getLineStyles),\n      [ShapeEnum.Diamond]: (diamonds: IPC2581XmlDiamond) => IPC2581ShapeFactory.createDiamonds(diamonds),\n      [ShapeEnum.Donut]: (donuts: IPC2581XmlDonut) => IPC2581ShapeFactory.createDonuts(donuts),\n      [ShapeEnum.Ellipse]: (ellipses: IPC2581XmlEllipse) => IPC2581ShapeFactory.createEllipses(ellipses),\n      [ShapeEnum.Hexagon]: (hexagons: IPC2581XmlHexagon) => IPC2581ShapeFactory.createHexagons(hexagons),\n      [ShapeEnum.Hole]: (holes: IPC2581XmlHole) => IPC2581ShapeFactory.createHoles(holes),\n      [ShapeEnum.Line]: (lines: IPC2581XmlLine) => IPC2581ShapeFactory.createLines(lines, getLineStyles),\n      [ShapeEnum.Octagon]: (octagons: IPC2581XmlOctagon) => IPC2581ShapeFactory.createOctagons(octagons),\n      [ShapeEnum.Outline]: (outlines: IPC2581XmlOutline) => IPC2581ShapeFactory.createOutlines(outlines, getLineStyles),\n      [ShapeEnum.Oval]: (ovals: IPC2581XmlOval) => IPC2581ShapeFactory.createOvals(ovals),\n      [ShapeEnum.Polyline]: (polylines: IPC2581XmlPolyline) => (\n        IPC2581ShapeFactory.createPolylines(polylines, getLineStyles)\n      ),\n      [ShapeEnum.RectCenter]: (rectsCenter: IPC2581XmlRectCenter) => IPC2581ShapeFactory.createRectCenters(rectsCenter),\n      [ShapeEnum.RectCham]: (rectChams: IPC2581XmlRectCham) => IPC2581ShapeFactory.createRectChams(rectChams),\n      [ShapeEnum.RectCorner]: (rectsCorner: IPC2581XmlRectCorner) => IPC2581ShapeFactory.createRectCorners(rectsCorner),\n      [ShapeEnum.RectRound]: (rectRounds: IPC2581XmlRectRound) => IPC2581ShapeFactory.createRectRounds(rectRounds),\n      [ShapeEnum.Thermal]: (thermals: IPC2581XmlThermal) => IPC2581ShapeFactory.createThermals(thermals),\n      [ShapeEnum.Triangle]: (triangles: IPC2581XmlTriangle) => IPC2581ShapeFactory.createTriangles(triangles),\n    };\n\n    return shapeTypes.map((type) => getShape[type](shapeData as any)).flat();\n  }\n\n  public getShapesByRef(data: IPC2581XmlPrimitiveRef): PCBShape<any, any>[] {\n    if (data.StandardPrimitiveRef) {\n      const styleID = data.StandardPrimitiveRef.id;\n      const stylesRef = this.contentParser.getStandardByID(styleID);\n      if (!stylesRef) return [];\n      return this.getShapes({ ...data, ...stylesRef });\n    }\n\n    if (data.UserPrimitiveRef) {\n      const styleID = data.UserPrimitiveRef.id;\n      const stylesRef = this.contentParser.getUserSpecialByID(styleID);\n      if (!stylesRef) return [];\n      const shapeData = { ...data, ...stylesRef.UserSpecial };\n\n      return this.getShapes(shapeData);\n    }\n\n    return [];\n  }\n\n  public getFeaturesShapes(feature: IPC2581XmlLayerSetFeatures): PCBShape<any, any>[] {\n    const netFeature: IPC2581XmlLayerSetFeatures = { ...feature };\n\n    if (netFeature.UserPrimitiveRef) {\n      return this.getShapesByRef(netFeature);\n    }\n\n    if (netFeature.UserSpecial) {\n      Object.assign(netFeature, netFeature.UserSpecial);\n      delete netFeature.UserSpecial;\n    }\n\n    return this.getShapes(netFeature);\n  }\n\n  public getSetShapes(layerSet: IPC2581XmlLayerSet): PCBShape<any, any>[] | null {\n    if (layerSet.Features) {\n      return layerSet.Features.map((feature) => this.getFeaturesShapes(feature)).flat(3);\n    }\n\n    if (layerSet.Hole) {\n      return this.getShapes(layerSet);\n    }\n\n    if (layerSet.Pad) {\n      return layerSet.Pad.map((pad) => this.getShapesByRef(pad)).flat();\n    }\n\n    if (layerSet.SlotCavity) {\n      return this.getShapes(layerSet.SlotCavity);\n    }\n\n    return [];\n  }\n}\n","import {\n  IPC2581Component,\n  IPC2581Pin,\n} from '@/models/IPC2581';\nimport {\n  IPC2581XmlPin,\n  IPC2581XmlMarking,\n  IPC2581XmlSilkScreen,\n  IPC2581XmlEcadCadDataStep,\n} from '@/types/IPC2581XMLTypes';\nimport { PCBShape } from '@/models/abstract';\nimport { ParsingUtils } from '@/utils';\nimport { IPC2581ShapeParser } from './IPC2581ShapeParser';\n\nexport class IPC2581ComponentParser {\n  private readonly shapeParser: IPC2581ShapeParser;\n\n  constructor(shapeParser: IPC2581ShapeParser) {\n    this.shapeParser = shapeParser;\n  }\n\n  private getPins(pins: IPC2581XmlPin[]): IPC2581Pin[] {\n    if (!pins) return [];\n\n    const ipc2581Pins = pins.map((pin) => {\n      let pinShapes;\n\n      if (pin.StandardPrimitiveRef) {\n        pinShapes = this.shapeParser.getShapesByRef(pin);\n      } else {\n        pinShapes = this.shapeParser.getShapes(pin);\n      }\n\n      const pinInfo = {\n        number: pin.number,\n        type: pin.type,\n        electricalType: pin.electricalType,\n      };\n\n      return pinShapes?.map((shape) => new IPC2581Pin(pinInfo, shape)) || [];\n    });\n\n    return ipc2581Pins.flat();\n  }\n\n  private static getMarkings(markingData: IPC2581XmlMarking | undefined): any[] {\n    if (!markingData?.Marking) return [];\n    if (typeof markingData.Marking === 'object') return [markingData.Marking];\n    return markingData.Marking;\n  }\n\n  private static getSilkScreen(silkScreenData: IPC2581XmlSilkScreen | undefined): any[] {\n    if (!silkScreenData?.Target) return [];\n    if (Array.isArray(silkScreenData.Target)) return silkScreenData.Target;\n    return [silkScreenData.Target];\n  }\n\n  public parseComponents(step: IPC2581XmlEcadCadDataStep): Map<string, IPC2581Component[]> {\n    const componentsByLayer = new Map<string, IPC2581Component[]>();\n\n    step.Component?.forEach((component) => {\n      const layerId = component.layerRef;\n      if (!layerId) return;\n\n      const shapeRef = step.Package.find((pack) => pack.name === component.packageRef);\n      if (!shapeRef) return;\n\n      const pins = this.getPins(shapeRef.Pin || []);\n      const sMarkings = IPC2581ComponentParser.getSilkScreen(shapeRef.SilkScreen);\n      const aMarkings = IPC2581ComponentParser.getMarkings(shapeRef.AssemblyDrawing as IPC2581XmlMarking);\n      const markings = [...sMarkings, ...aMarkings].flat();\n      const markingsShapes = markings.map((shape) => this.shapeParser.getShapes(shape)).flat();\n      const outlineShapes = this.shapeParser.getShapes(shapeRef);\n      const othersShapes = markingsShapes.length > 0 ? markingsShapes : outlineShapes;\n\n      const componentId = ParsingUtils.parseXMLID(component.refDes);\n      const componentInfo = Object.fromEntries(\n        Object.entries({\n          refDes: componentId,\n          part: component.part,\n          mountType: component.mountType,\n          ...ParsingUtils.parseNonstandardAttribute(component.NonstandardAttribute),\n        }).filter(([, value]) => value !== undefined),\n      ) as Record<string, string | number>;\n\n      const componentPosition = {\n        location: { ...component.Location },\n        ...component.Xform,\n      };\n\n      const pcbComponent = new IPC2581Component(componentInfo, componentPosition, pins, othersShapes);\n\n      if (!componentsByLayer.has(layerId)) {\n        componentsByLayer.set(layerId, []);\n      }\n      componentsByLayer.get(layerId)!.push(pcbComponent);\n    });\n\n    return componentsByLayer;\n  }\n}\n","import {\n  IPC2581General,\n  IPC2581Layer,\n  IPC2581Net,\n  IPC2581NonFunctional,\n  IPC2581Plate,\n} from '@/models/IPC2581';\nimport { IPC2581Xml } from '@/types/IPC2581XMLTypes';\nimport { ShapeEnum } from '@/types/ShapeTypes';\nimport { PCBShape } from '@/models/abstract';\nimport { ParsingUtils } from '@/utils';\nimport { IPC2581ContentParser } from './IPC2581ContentParser';\nimport { IPC2581EcadParser } from './IPC2581EcadParser';\nimport { IPC2581ShapeParser } from './IPC2581ShapeParser';\nimport { IPC2581ComponentParser } from './IPC2581ComponentParser';\n\nconst IPC2581_FORMAT = 'IPC-2581';\nconst MISSING_IPC_FORMAT_ERROR = 'Invalid IPC-2581 file format: missing IPC-2581 root element';\nconst MISSING_SECTIONS_ERROR = 'Invalid IPC-2581 file format: missing Content or Ecad sections';\n\nexport class IPC2581Adapter {\n  private readonly result: IPC2581Plate;\n  private readonly contentParser: IPC2581ContentParser;\n  private readonly ecadParser: IPC2581EcadParser;\n  private readonly shapeParser: IPC2581ShapeParser;\n  private readonly componentParser: IPC2581ComponentParser;\n\n  constructor(fileName: string, xmlData: IPC2581Xml) {\n    if (!xmlData?.[IPC2581_FORMAT]) {\n      throw new Error(MISSING_IPC_FORMAT_ERROR);\n    }\n\n    const content = xmlData[IPC2581_FORMAT].Content;\n    const ecad = xmlData[IPC2581_FORMAT].Ecad;\n\n    if (!content || !ecad) {\n      throw new Error(MISSING_SECTIONS_ERROR);\n    }\n\n    this.result = new IPC2581Plate(fileName);\n\n    // Initialize parsers\n    this.contentParser = new IPC2581ContentParser(content);\n    this.ecadParser = new IPC2581EcadParser(ecad);\n    this.shapeParser = new IPC2581ShapeParser(this.contentParser);\n    this.componentParser = new IPC2581ComponentParser(this.shapeParser);\n  }\n\n  public adapt(): IPC2581Plate {\n    this.setGeneralData();\n    this.setLayers();\n    this.setColors();\n    this.setLayersInfo();\n    this.setLayerFeatures();\n    this.setComponents();\n    this.setLayersOrder();\n\n    return this.result;\n  }\n\n  private setGeneralData(): void {\n    const units = this.ecadParser.getUnits();\n\n    let profile: PCBShape<any, any>[] | null = null;\n    const step = this.ecadParser.getCadDataStep();\n    if (step?.Profile) {\n      const contourData = {\n        [ShapeEnum.Contour]: [step.Profile],\n      };\n      profile = this.shapeParser.getShapes(contourData);\n    }\n\n    const generalInfo = { units };\n    const general = new IPC2581General(generalInfo, profile || null);\n    this.result.setGeneral(general);\n  }\n\n  private setLayers(): void {\n    // Try to get layers from content first, then from ecad\n    const contentLayers = this.contentParser.getLayers();\n    const ecadLayers = this.ecadParser.getLayers();\n\n    const allLayers = contentLayers.length > 0 ? contentLayers : ecadLayers;\n\n    allLayers.forEach((layerId) => {\n      if (layerId === '') return;\n      this.result.addLayer(new IPC2581Layer(layerId));\n    });\n  }\n\n  private setColors(): void {\n    this.result.forEachLayer((layer) => {\n      const color = this.contentParser.getColorByID(layer.name);\n      if (!color) return;\n      layer.setColor(color.Color);\n    });\n  }\n\n  private setLayersInfo(): void {\n    const layers = this.ecadParser.getCadDataLayers();\n\n    layers?.forEach((layerData) => {\n      const layerId = layerData.name;\n      if (!layerId) return;\n\n      const infoFromStackup = this.ecadParser.getLayerInfoFromCadDataStackup(layerId);\n      const layerInfo = { ...layerData, ...infoFromStackup };\n      this.result.getLayer(layerId)?.setInfo(layerInfo);\n    });\n  }\n\n  private setLayerFeatures(): void {\n    const layerFeature = this.ecadParser.getCadDataStep()?.LayerFeature;\n    layerFeature?.forEach((layer) => {\n      const layerName = layer.layerRef;\n\n      for (let i = 0; i < layer.Set.length; i += 1) {\n        const feature = layer.Set[i];\n        const shapes = this.shapeParser.getSetShapes(feature);\n\n        shapes?.forEach((shape) => {\n          if (feature.net) {\n            const netInfo = {\n              ...ParsingUtils.parseNonstandardAttribute(feature.NonstandardAttribute),\n              net: ParsingUtils.parseXMLID(feature.net),\n            };\n            const ipc2581Net = new IPC2581Net(netInfo, shape);\n            this.result.getLayer(layerName)?.addNet(ipc2581Net);\n          } else {\n            const nonFunctionalInfo = ParsingUtils.parseNonstandardAttribute(feature.NonstandardAttribute);\n            const ipc2581NonFunctional = new IPC2581NonFunctional(nonFunctionalInfo, shape);\n            this.result.getLayer(layerName)?.addNonFunctional(ipc2581NonFunctional);\n          }\n        });\n      }\n    });\n  }\n\n  private setComponents(): void {\n    const step = this.ecadParser.getCadDataStep();\n    if (!step) return;\n\n    const componentsByLayer = this.componentParser.parseComponents(step);\n\n    componentsByLayer.forEach((components, layerId) => {\n      const layer = this.result.getLayer(layerId);\n      if (!layer) return;\n\n      components.forEach((component) => {\n        layer.addComponent(component);\n      });\n    });\n  }\n\n  private setLayersOrder(): void {\n    let i = 0;\n    this.result.forEachLayer((layer) => {\n      const order = layer.getInfo().sequence ?? i;\n      layer.setOrder(Number(order));\n      i += 1;\n    });\n  }\n}\n","import { PCBShape } from '@/models/abstract';\n\n// ============================================================================\n// BASIC TYPES AND ENUMS\n// ============================================================================\n\ntype GerberArchive = Record<string, string>;\n\nenum GerberFileType {\n  GERBER = 'gbr',\n  EXCELLON_DRILL = 'drl',\n  GERBER_JOB = 'gbrjob',\n}\n\nenum GerberUnits {\n  MILLIMETERS = 'MM',\n  INCHES = 'IN',\n}\n\n// ============================================================================\n// COORDINATE SYSTEM\n// ============================================================================\n\nenum GerberCoordinateDCode {\n  DRAW = 'D01',\n  MOVE = 'D02',\n  FLASH = 'D03',\n}\n\nenum GerberGCodeInterpolationMode {\n  LINEAR = 'LINEAR',\n  CLOCKWISE_ARC = 'CLOCKWISE_ARC',\n  COUNTERCLOCKWISE_ARC = 'COUNTERCLOCKWISE_ARC',\n}\n\ntype GerberCoordinate = {\n  dCode?: GerberCoordinateDCode;\n  x: number;\n  y: number;\n  i?: number;\n  j?: number;\n  mode?: GerberGCodeInterpolationMode;\n};\n\n// ============================================================================\n// GERBER COMMANDS\n// ============================================================================\n\nenum GerberGCode {\n  LINEAR_INTERPOLATION = 'G01',\n  CLOCKWISE_ARC = 'G02',\n  COUNTERCLOCKWISE_ARC = 'G03',\n  COMMENT = 'G04',\n  POLYGON_AREA_START = 'G36',\n  POLYGON_AREA_END = 'G37',\n  MULTI_QUADRANT_MODE = 'G75',\n  ABSOLUTE_COORDINATES = 'G90',\n}\n\nenum GerberDCode {\n  D10 = 'D10',\n  D11 = 'D11',\n  D12 = 'D12',\n  D13 = 'D13',\n  D14 = 'D14',\n  D15 = 'D15',\n  D16 = 'D16',\n  D17 = 'D17',\n  D18 = 'D18',\n  D19 = 'D19',\n  D20 = 'D20',\n}\n\nenum GerberMCode {\n  END_OF_FILE = 'M02',\n  END_OF_PROGRAM = 'M30',\n}\n\n// ============================================================================\n// APERTURE SYSTEM\n// ============================================================================\n\nenum GerberApertureType {\n  CIRCLE = 'C',\n  RECTANGLE = 'R',\n  OBROUND = 'O',\n  POLYGON = 'P',\n  MACRO = 'MACRO',\n}\n\nenum GerberApertureFunction {\n  COMPONENT_PAD = 'ComponentPad',\n  COMPONENT_DRILL = 'ComponentDrill',\n  VIA_PAD = 'ViaPad',\n  VIA_DRILL = 'ViaDrill',\n  CONDUCTOR = 'Conductor',\n  MECHANICAL_DRILL = 'MechanicalDrill',\n  THERMAL_PAD = 'ThermalPad',\n  SOLDER_MASK = 'SolderMask',\n  FIDUCIAL = 'Fiducial',\n}\n\n// ============================================================================\n// ATTRIBUTE SYSTEM\n// ============================================================================\n\nenum GerberAttributeType {\n  FILE_FUNCTION = 'TF',\n  OBJECT = 'TO',\n  APERTURE = 'TA',\n  DELETE = 'TD',\n}\n\nenum GerberObjectAttribute {\n  COMPONENT = 'C',\n  NET = 'N',\n  PIN = 'P',\n}\n\n// ============================================================================\n// MACRO APERTURE SYSTEM\n// ============================================================================\n\nenum GerberMacroPrimitiveType {\n  CIRCLE = 1,\n  OUTLINE = 4,\n  REGULAR_POLYGON = 5,\n  MOIRE_PATTERN = 6,\n  THERMAL_PATTERN = 7,\n  VECTOR_LINE = 20,\n  CENTER_LINE = 21,\n}\n\nenum GerberMacroExposure {\n  CLEAR = 'clear',\n  DARK = 'dark',\n}\n\ntype GerberMacroPrimitive = {\n  type: GerberMacroPrimitiveType;\n  exposure: GerberMacroExposure;\n  parameters: number[];\n};\n\ntype GerberMacroDefinition = {\n  type: GerberApertureType.MACRO;\n  code?: GerberDCode;\n  name: string;\n  primitives: GerberMacroPrimitive[];\n};\n\n// ============================================================================\n// GERBER LINE CLASSIFICATION\n// ============================================================================\n\nenum GerberLineType {\n  // Basic commands\n  G_CODE = 'G_CODE',\n  M_CODE = 'M_CODE',\n  D_OPERATION = 'D_OPERATION',\n  D_APERTURE_SELECT = 'D_APERTURE_SELECT',\n  COORDINATES = 'COORDINATES',\n\n  // File structure\n  FORMAT_SPEC = 'FORMAT_SPEC',\n  UNITS = 'UNITS',\n  LAYER_POLARITY = 'LAYER_POLARITY',\n\n  // Apertures\n  APERTURE_DEF = 'APERTURE_DEF',\n  APERTURE_MACRO = 'APERTURE_MACRO',\n  APERTURE_MACRO_COMMENT = 'APERTURE_MACRO_COMMENT',\n  APERTURE_MACRO_PRIMITIVE = 'APERTURE_MACRO_PRIMITIVE',\n\n  // Attributes\n  FILE_ATTRIBUTE = 'FILE_ATTRIBUTE',\n  OBJECT_ATTRIBUTE = 'OBJECT_ATTRIBUTE',\n  APERTURE_ATTRIBUTE = 'APERTURE_ATTRIBUTE',\n  ATTRIBUTE_DELETE = 'ATTRIBUTE_DELETE',\n\n  // Comments\n  COMMENT = 'COMMENT',\n\n  // Excellon drill format\n  DRILL_TOOL_DEF = 'DRILL_TOOL_DEF',\n  DRILL_TOOL_SELECT = 'DRILL_TOOL_SELECT',\n  DRILL_FORMAT = 'DRILL_FORMAT',\n  DRILL_METRIC = 'DRILL_METRIC',\n  DRILL_HEADER_END = 'DRILL_HEADER_END',\n  DRILL_SEQUENCE = 'DRILL_SEQUENCE',\n  DRILL_COMMENT_SEMICOLON = 'DRILL_COMMENT_SEMICOLON',\n\n  // Special cases\n  EMPTY = 'EMPTY',\n  UNKNOWN = 'UNKNOWN',\n}\n\n// ============================================================================\n// LINE PARSING TYPES\n// ============================================================================\n\ntype GerberApertureInfo = {\n  code: GerberDCode;\n  type: GerberApertureType;\n  parameters?: number[];\n};\n\ntype GerberAttributeInfo = {\n  type: GerberAttributeType | string;\n  name: GerberObjectAttribute | string;\n  value?: string;\n};\n\ntype GerberFormatSpec = {\n  leading: 'L' | 'T';\n  absolute: boolean;\n  xFormat: string;\n  yFormat: string;\n};\n\ntype GerberLineContent = {\n  gCode?: GerberGCode;\n  dCode?: GerberDCode;\n  mCode?: GerberMCode;\n  coordinates?: GerberCoordinate;\n  aperture?: GerberApertureInfo;\n  attribute?: GerberAttributeInfo;\n  format?: GerberFormatSpec;\n  units?: GerberUnits;\n  comment?: string;\n  macro?: GerberMacroDefinition;\n  // Excellon drill fields\n  toolNumber?: number;\n  diameter?: number;\n  sequenceNumber?: number;\n  zeroSuppression?: 'leading' | 'trailing';\n  drillFormat?: number;\n  // Layer polarity\n  polarity?: GerberMacroExposure;\n  // Aperture macro fields\n  primitiveType?: number;\n  parameters?: string[];\n};\n\ninterface GerberLineInfo {\n  type: GerberLineType;\n  raw: string;\n  content?: GerberLineContent;\n}\n\ntype GerberProcessedElement = {\n  coords: GerberCoordinate[];\n  apertureDCode: GerberDCode;\n  attributes: Partial<Record<GerberObjectAttribute, string>>;\n};\n\n// ============================================================================\n// SHAPE CREATION TYPES\n// ============================================================================\n\ntype GerberProcessedAperture = (GerberApertureInfo | GerberMacroDefinition) & {\n  apertureFunction?: GerberApertureFunction;\n  parameters?: string[]; // For macro apertures\n};\n\ntype GerberElementToCreateSimpleShape = {\n  coords: GerberCoordinate[];\n  aperture: GerberApertureInfo;\n};\n\ntype GerberElementToCreateMacroShape = {\n  coords: GerberCoordinate[];\n  aperture: GerberMacroDefinition;\n  parameters?: string[]; // Macro parameters from aperture definition\n};\n\ntype GerberElementToCreateShape = {\n  coords: GerberCoordinate[];\n  aperture: GerberProcessedAperture;\n};\n\ntype GerberElementToCreateComponent = {\n  shape: PCBShape<any, any>;\n  attributes: Partial<Record<GerberObjectAttribute, string>>;\n  elementFunction?: GerberApertureFunction;\n};\n\ntype GerberProcessedGCodeOptions = {\n  interpolationMode?: GerberGCodeInterpolationMode;\n  circularMode?: boolean;\n  multiQuadrant?: boolean;\n};\n\nexport {\n  // Basic types\n  GerberArchive,\n  GerberFileType,\n  GerberUnits,\n\n  // Coordinate system\n  GerberCoordinate,\n  GerberCoordinateDCode,\n\n  // Commands\n  GerberGCode,\n  GerberDCode,\n  GerberMCode,\n\n  // Aperture system\n  GerberApertureType,\n  GerberApertureFunction,\n  GerberApertureInfo,\n\n  // Attribute system\n  GerberAttributeType,\n  GerberObjectAttribute,\n  GerberAttributeInfo,\n\n  // Macro system\n  GerberMacroPrimitiveType,\n  GerberMacroExposure,\n  GerberMacroPrimitive,\n  GerberMacroDefinition,\n\n  // Line parsing\n  GerberLineType,\n  GerberFormatSpec,\n  GerberLineContent,\n  GerberLineInfo,\n\n  // Shape creation\n  GerberProcessedAperture,\n  GerberProcessedElement,\n  GerberElementToCreateComponent,\n  GerberElementToCreateSimpleShape,\n  GerberElementToCreateMacroShape,\n  GerberElementToCreateShape,\n\n  // G-Code processing\n  GerberGCodeInterpolationMode,\n  GerberProcessedGCodeOptions,\n};\n","import { PCBComponent } from '../abstract';\n\nexport class GerberComponent extends PCBComponent {}\n","import { PCBGeneral } from '../abstract';\n\nexport class GerberGeneral extends PCBGeneral {}\n","import { PCBLayer } from '../abstract';\n\nexport class GerberLayer extends PCBLayer {}\n","import { PCBNet } from '../abstract';\n\nexport class GerberNet extends PCBNet {\n  // eslint-disable-next-line class-methods-use-this\n  public override get name(): string {\n    return this.getInfo().N as string;\n  }\n}\n","import { PCBNonFunctional } from '../abstract';\n\nexport class GerberNonFunctional extends PCBNonFunctional {\n  /* eslint-disable-next-line class-methods-use-this */\n  public override get name(): string {\n    return 'NonFunctional';\n  }\n}\n","import { PCBPLateType } from '@/types/PCBTypes';\nimport { PCBPlate } from '../abstract';\n\nexport class GerberPlate extends PCBPlate {\n  /* eslint-disable-next-line class-methods-use-this */\n  public override get type() {\n    return PCBPLateType.GERBER;\n  }\n}\n","import { PCBPlate } from '@/models/abstract';\n\nexport abstract class PCBAdapter {\n  public abstract adapt(): PCBPlate;\n}\n","import {\n  GerberApertureType,\n  GerberAttributeType,\n  GerberCoordinate,\n  GerberCoordinateDCode,\n  GerberDCode,\n  GerberGCode,\n  GerberLineInfo,\n  GerberLineType,\n  GerberMacroExposure,\n  GerberMacroPrimitive,\n  GerberMacroPrimitiveType,\n  GerberMCode,\n  GerberUnits,\n} from '@/types/GerberTypes';\n\nexport class GerberLineClassifier {\n  public static classifyLine(line: string): GerberLineInfo {\n    const trimmed = line.trim();\n\n    if (!trimmed) {\n      return { type: GerberLineType.EMPTY, raw: line };\n    }\n\n    // Excellon drill semicolon comments\n    if (trimmed.startsWith(';')) {\n      return this.parseDrillComment(trimmed);\n    }\n\n    // Excellon drill tool definition (T01C0.200)\n    if (trimmed.match(/^T\\d+C\\d*\\.?\\d+/)) {\n      return this.parseDrillToolDefinition(trimmed);\n    }\n\n    // Excellon drill tool selection (T01)\n    if (trimmed.match(/^T\\d+$/)) {\n      return this.parseDrillToolSelection(trimmed);\n    }\n\n    // Excellon drill format (FMAT,2)\n    if (trimmed.startsWith('FMAT,')) {\n      return this.parseDrillFormat(trimmed);\n    }\n\n    // Excellon drill metric (METRIC,TZ)\n    if (trimmed.startsWith('METRIC,')) {\n      return this.parseDrillMetric(trimmed);\n    }\n\n    // Excellon drill header end (%)\n    if (trimmed === '%') {\n      return this.parseDrillHeaderEnd(trimmed);\n    }\n\n    // Excellon drill sequence (N1)\n    if (trimmed.match(/^N\\d+$/)) {\n      return this.parseDrillSequence(trimmed);\n    }\n\n    // Format specification (%FS...)\n    if (trimmed.startsWith('%FS')) {\n      return this.parseFormatSpec(trimmed);\n    }\n\n    // Units (%MO...)\n    if (trimmed.startsWith('%MO')) {\n      return this.parseUnits(trimmed);\n    }\n\n    // Layer Polarity (%LP...)\n    if (trimmed.startsWith('%LP')) {\n      return this.parseLayerPolarity(trimmed);\n    }\n\n    // File Attributes (%TF...)\n    if (trimmed.startsWith('%TF')) {\n      return this.parseFileAttribute(trimmed);\n    }\n\n    // Object Attributes (%TO...)\n    if (trimmed.startsWith('%TO')) {\n      return this.parseObjectAttribute(trimmed);\n    }\n\n    // Attribute Delete (%TD*%)\n    if (trimmed.startsWith('%TD')) {\n      return this.parseAttributeDelete(trimmed);\n    }\n\n    // Aperture Attributes (%TA...)\n    if (trimmed.startsWith('%TA')) {\n      return this.parseApertureAttribute(trimmed);\n    }\n\n    // Aperture definition (%ADD...)\n    if (trimmed.startsWith('%ADD')) {\n      return this.parseApertureDefinition(trimmed);\n    }\n\n    // Comments with attributes (G04 #@!)\n    if (trimmed.startsWith('G04') && trimmed.includes('#@!')) {\n      return this.parseAttribute(trimmed);\n    }\n\n    // Regular comments (G04)\n    if (trimmed.startsWith('G04')) {\n      return this.parseComment(trimmed);\n    }\n\n    // Aperture Macro definition (%AM...)\n    if (trimmed.startsWith('%AM')) {\n      return this.parseApertureMacro(trimmed);\n    }\n\n    // Aperture Macro comments (0 comment*)\n    if (trimmed.match(/^0\\s+.+\\*$/)) {\n      return this.parseApertureMacroComment(trimmed);\n    }\n\n    // Aperture Macro primitives (numbers,variables*)\n    if (trimmed.match(/^[\\d,$+\\-*.]+\\*%?$/)) {\n      return this.parseApertureMacroPrimitive(trimmed);\n    }\n\n    // G-codes\n    if (trimmed.match(/^G\\d+/)) {\n      return this.parseGCode(trimmed);\n    }\n\n    // M-codes\n    if (trimmed.match(/^M\\d+/)) {\n      return this.parseMCode(trimmed);\n    }\n\n    // D-code aperture selection (D10*, D11*, etc.)\n    if (trimmed.match(/^D\\d+\\*?$/)) {\n      return this.parseApertureSelection(trimmed);\n    }\n\n    // Coordinates with D-codes (X123Y456D01*)\n    if (trimmed.match(/[XY]\\d+/) && trimmed.match(/D\\d+/)) {\n      return this.parseOperation(trimmed);\n    }\n\n    // Pure coordinates (X123Y456*)\n    if (trimmed.match(/^[XY]\\d+/)) {\n      return this.parseCoordinates(trimmed);\n    }\n\n    return { type: GerberLineType.UNKNOWN, raw: line };\n  }\n\n  private static parseApertureMacro(line: string): GerberLineInfo {\n    // Extract macro name\n    const macroMatch = line.match(/%AM([^*]+)\\*/);\n    if (!macroMatch) {\n      return { type: GerberLineType.UNKNOWN, raw: line };\n    }\n\n    const macroName = macroMatch[1];\n\n    // Detect macro type by pattern and delegate to specific parser\n    if (this.isComplexMacroWithComments(line)) {\n      return this.parseComplexMacro(line, macroName);\n    }\n    if (this.isRoundedRectMacro(line)) {\n      return this.parseRoundedRectMacro(line, macroName);\n    }\n    if (this.isFreePolyMacro(line)) {\n      return this.parseFreePolyMacro(line, macroName);\n    }\n\n    return { type: GerberLineType.APERTURE_MACRO, raw: line };\n  }\n\n  private static isRoundedRectMacro(line: string): boolean {\n    // Pattern: multiple simple primitives (types 1, 20, 21) without outline primitive (type 4)\n    return /^%AM[^*]+\\*(?:(?:1|20|21),[^*]+\\*)+%$/.test(line) && !line.includes('*4,');\n  }\n\n  private static isFreePolyMacro(line: string): boolean {\n    // Pattern: contains outline primitive (type 4) with multiple vertices\n    return /^%AM[^*]+\\*4,1,\\d+,[^*]+\\*%$/.test(line);\n  }\n\n  private static parseRoundedRectMacro(line: string, macroName: string): GerberLineInfo {\n    const nameMatch = line.match(/%AM([^*]+)\\*(.*)/);\n\n    if (!nameMatch) {\n      return { type: GerberLineType.APERTURE_MACRO, raw: line };\n    }\n    const content = nameMatch[2];\n    const primitives: GerberMacroPrimitive[] = [];\n    const primitiveStrings = content\n      .replaceAll('*%', '')\n      .split('*')\n      .filter((p) => p.trim());\n\n    primitiveStrings.forEach((primStr) => {\n      const params = primStr.split(',').map((p) => parseFloat(p.trim()));\n      if (params.length === 0) return;\n      primitives.push({\n        type: params[0] as GerberMacroPrimitiveType,\n        exposure: params[1] ? GerberMacroExposure.DARK : GerberMacroExposure.CLEAR, // 1=dark, 0=clear\n        parameters: params.slice(2),\n      });\n    });\n\n    return {\n      type: GerberLineType.APERTURE_MACRO,\n      raw: line,\n      content: {\n        macro: {\n          type: GerberApertureType.MACRO,\n          name: macroName,\n          primitives,\n        },\n      },\n    };\n  }\n\n  private static parseFreePolyMacro(line: string, macroName: string): GerberLineInfo {\n    // Parse FreePoly-style macros with outline primitive (type 4)\n    const macroContent = line.slice(line.indexOf('*') + 1, line.lastIndexOf('*'));\n    const primitiveStrings = macroContent.split('*').filter((p) => p.length > 0);\n\n    const primitives: GerberMacroPrimitive[] = [];\n\n    primitiveStrings.forEach((primitiveStr) => {\n      const params = primitiveStr.split(',');\n      if (params.length === 0) return;\n\n      const primitiveTypeNum = parseInt(params[0], 10);\n      const primitiveType = primitiveTypeNum as GerberMacroPrimitiveType;\n      const exposure = params[1] === '1' ? GerberMacroExposure.DARK : GerberMacroExposure.CLEAR;\n\n      if (primitiveTypeNum === 4) {\n        // Outline primitive: 4,exposure,numVertices,x1,y1,x2,y2,...,[rotation/$variable]\n        const numVertices = parseInt(params[2], 10);\n        const coordinates: number[] = [];\n\n        // Extract coordinate pairs (x,y) for each vertex\n        for (let i = 0; i < numVertices; i += 1) {\n          const xCoord = params[3 + i * 2];\n          const yCoord = params[4 + i * 2];\n          if (xCoord && yCoord) {\n            coordinates.push(parseFloat(xCoord) || 0);\n            coordinates.push(parseFloat(yCoord) || 0);\n          }\n        }\n\n        // The last parameter might be rotation or variable reference (like $1)\n        const lastParam = params[3 + numVertices * 2];\n        const rotationValue = lastParam?.startsWith('$') ? 0 : parseFloat(lastParam || '0');\n\n        primitives.push({\n          type: primitiveType,\n          exposure,\n          parameters: [numVertices, ...coordinates, rotationValue],\n        });\n      } else {\n        // Handle other primitive types normally\n        primitives.push({\n          type: primitiveType,\n          exposure,\n          parameters: params.slice(2).map((p) => parseFloat(p) || 0),\n        });\n      }\n    });\n\n    return {\n      type: GerberLineType.APERTURE_MACRO,\n      raw: line,\n      content: {\n        macro: {\n          type: GerberApertureType.MACRO,\n          name: macroName,\n          primitives,\n        },\n      },\n    };\n  }\n\n  private static isComplexMacroWithComments(line: string): boolean {\n    // Pattern: macro with comments (starts with \"0 \") and multiple primitive types\n    return line.includes('*0 ') && /\\*[1-9]\\d*,/.test(line);\n  }\n\n  private static parseComplexMacro(line: string, macroName: string): GerberLineInfo {\n    // Parse complex macro with comments and multiple primitives\n    const macroContent = line.slice(line.indexOf('*') + 1, line.lastIndexOf('*'));\n    const segments = macroContent.split('*').filter((p) => p.length > 0);\n\n    const primitives: GerberMacroPrimitive[] = [];\n    const comments: string[] = [];\n\n    segments.forEach((segment) => {\n      const trimmed = segment.trim();\n\n      if (trimmed.startsWith('0 ')) {\n        // This is a comment line - extract and store it\n        comments.push(trimmed.substring(2).trim());\n      } else if (trimmed.match(/^[\\d,$+\\-*.]+$/)) {\n        // This is a primitive definition\n        const params = trimmed.split(',');\n        if (params.length === 0) return;\n\n        const primitiveTypeNum = parseInt(params[0], 10);\n        if (Number.isNaN(primitiveTypeNum)) return;\n\n        const primitiveType = primitiveTypeNum as GerberMacroPrimitiveType;\n        const exposure = params[1] === '1' ? GerberMacroExposure.DARK : GerberMacroExposure.CLEAR;\n\n        if (primitiveTypeNum === 4) {\n          // Outline primitive with variables: 4,1,4,$2,$3,$4,$5,$6,$7,$8,$9,$2,$3,0\n          const numVertices = this.parseVariableOrNumber(params[2]);\n          const coordinates: number[] = [];\n\n          // Extract coordinates (may contain variables like $2, $3)\n          for (let i = 0; i < numVertices; i += 1) {\n            const xCoord = params[3 + i * 2];\n            const yCoord = params[4 + i * 2];\n            if (xCoord && yCoord) {\n              coordinates.push(this.parseVariableOrNumber(xCoord));\n              coordinates.push(this.parseVariableOrNumber(yCoord));\n            }\n          }\n\n          // Handle rotation parameter\n          const rotationParam = params[3 + numVertices * 2];\n          const rotationValue = this.parseVariableOrNumber(rotationParam || '0');\n\n          primitives.push({\n            type: primitiveType,\n            exposure,\n            parameters: [numVertices, ...coordinates, rotationValue],\n          });\n        } else {\n          // Handle other primitives (1, 20, 21) with variables like $1+$1\n          const processedParams = params.slice(2).map((param) => {\n            // Handle expressions like $1+$1\n            if (param.includes('+')) {\n              return this.parseVariableExpression(param);\n            }\n            return this.parseVariableOrNumber(param);\n          });\n\n          primitives.push({\n            type: primitiveType,\n            exposure,\n            parameters: processedParams,\n          });\n        }\n      }\n    });\n\n    return {\n      type: GerberLineType.APERTURE_MACRO,\n      raw: line,\n      content: {\n        macro: {\n          type: GerberApertureType.MACRO,\n          name: macroName,\n          primitives,\n        },\n        comment: comments.join('; '), // Store comments joined as single string\n      },\n    };\n  }\n\n  private static parseVariableOrNumber(param: string): number {\n    // Parse variable references like $1, $2 or numbers\n    if (param.startsWith('$')) {\n      // For now, return 0 for variables - they will be substituted during aperture instantiation\n      return 0;\n    }\n    return parseFloat(param) || 0;\n  }\n\n  private static parseVariableExpression(expr: string): number {\n    // Parse expressions like $1+$1, $2*2, etc.\n    // For now, return 0 - expressions will be evaluated during aperture instantiation\n    if (expr.includes('$')) {\n      return 0;\n    }\n    // Simple math expressions without eval - handle basic cases\n    if (expr.includes('+')) {\n      const parts = expr.split('+');\n      return parts.reduce((sum, part) => sum + (parseFloat(part.trim()) || 0), 0);\n    }\n    if (expr.includes('*')) {\n      const parts = expr.split('*');\n      return parts.reduce((product, part) => product * (parseFloat(part.trim()) || 1), 1);\n    }\n    return parseFloat(expr) || 0;\n  }\n\n  private static parseFormatSpec(line: string): GerberLineInfo {\n    const match = line.match(/%FS([LT])([AI])X(\\d+)Y(\\d+)\\*?%?/);\n    return {\n      type: GerberLineType.FORMAT_SPEC,\n      raw: line,\n      content: {\n        format: match\n          ? {\n            leading: match[1] as 'L' | 'T',\n            absolute: match[2] === 'A',\n            xFormat: match[3],\n            yFormat: match[4],\n          }\n          : undefined,\n      },\n    };\n  }\n\n  private static parseUnits(line: string): GerberLineInfo {\n    const units = line.includes('MM') ? GerberUnits.MILLIMETERS : GerberUnits.INCHES;\n    return {\n      type: GerberLineType.UNITS,\n      raw: line,\n      content: { units },\n    };\n  }\n\n  private static parseApertureDefinition(line: string): GerberLineInfo {\n    // Parse standard apertures (C, R, O, P)\n    const standardMatch = line.match(/%AD(D\\d+)([CROP]),([^*]*)\\*?%?/);\n\n    if (standardMatch) {\n      const paramStr = standardMatch[3];\n      const parameters = paramStr\n        .split(/[X,]/)\n        .map((p) => parseFloat(p))\n        .filter((p) => !Number.isNaN(p));\n\n      return {\n        type: GerberLineType.APERTURE_DEF,\n        raw: line,\n        content: {\n          aperture: {\n            code: standardMatch[1] as GerberDCode,\n            type: standardMatch[2] as GerberApertureType,\n            parameters,\n          },\n        },\n      };\n    }\n\n    // Parse macro apertures (e.g. RoundRect, FreePoly, etc.)\n    const macroMatch = line.match(/%AD(D\\d+)([A-Za-z][A-Za-z0-9]*),?([^*]*)\\*?%?/);\n\n    if (macroMatch) {\n      const dCode = macroMatch[1] as GerberDCode;\n      const macroName = macroMatch[2];\n      const paramStr = macroMatch[3] || '';\n\n      // Parse macro parameters (split by X or commas)\n      const parameters = paramStr\n        ? paramStr\n          .split(/[X,]/)\n          .map((p) => parseFloat(p.trim()))\n          .filter((p) => !Number.isNaN(p))\n        : [];\n\n      return {\n        type: GerberLineType.APERTURE_DEF,\n        raw: line,\n        content: {\n          macro: {\n            type: GerberApertureType.MACRO,\n            code: dCode,\n            name: macroName,\n            primitives: [], // Primitives will be added later when processing %AM\n          },\n          // Store parameters separately for macros (as strings)\n          parameters: parameters.map((p) => p.toString()),\n        },\n      };\n    }\n\n    return { type: GerberLineType.APERTURE_DEF, raw: line };\n  }\n\n  private static parseAttribute(line: string): GerberLineInfo {\n    const match = line.match(/G04\\s*#@!\\s*(TF|TO|TA|TD)\\.?([^,*]*),?([^*]*)/);\n    const ATTRIBUTE_TYPE_MAP: Record<GerberAttributeType, GerberLineType> = {\n      [GerberAttributeType.FILE_FUNCTION]: GerberLineType.FILE_ATTRIBUTE,\n      [GerberAttributeType.OBJECT]: GerberLineType.OBJECT_ATTRIBUTE,\n      [GerberAttributeType.APERTURE]: GerberLineType.APERTURE_ATTRIBUTE,\n      [GerberAttributeType.DELETE]: GerberLineType.ATTRIBUTE_DELETE,\n    };\n\n    let type = GerberLineType.FILE_ATTRIBUTE;\n\n    if (match) {\n      type = ATTRIBUTE_TYPE_MAP[match[1] as GerberAttributeType];\n    }\n\n    return {\n      type,\n      raw: line,\n      content: {\n        attribute: match\n          ? {\n            type: match[1],\n            name: match[2],\n            value: match[3],\n          }\n          : undefined,\n      },\n    };\n  }\n\n  private static parseComment(line: string): GerberLineInfo {\n    return {\n      type: GerberLineType.COMMENT,\n      raw: line,\n      content: {\n        comment: line.substring(3).trim(), // Remove G04 prefix\n      },\n    };\n  }\n\n  private static parseGCode(line: string): GerberLineInfo {\n    const match = line.match(/^(G\\d+)/);\n    return {\n      type: GerberLineType.G_CODE,\n      raw: line,\n      content: {\n        gCode: match ? (match[1] as GerberGCode) : undefined,\n      },\n    };\n  }\n\n  private static parseMCode(line: string): GerberLineInfo {\n    const match = line.match(/^(M\\d+)/);\n    return {\n      type: GerberLineType.M_CODE,\n      raw: line,\n      content: {\n        mCode: match ? (match[1] as GerberMCode) : undefined,\n      },\n    };\n  }\n\n  private static parseApertureSelection(line: string): GerberLineInfo {\n    const match = line.match(/^D(\\d+)/);\n    return {\n      type: GerberLineType.D_APERTURE_SELECT,\n      raw: line,\n      content: {\n        dCode: match ? (`D${match[1]}` as GerberDCode) : undefined,\n      },\n    };\n  }\n\n  private static parseOperation(line: string): GerberLineInfo {\n    const coords = this.extractCoordinates(line);\n    const dMatch = line.match(/D(\\d+)/);\n    const gMatch = line.match(/(G\\d+)/);\n\n    return {\n      type: GerberLineType.D_OPERATION,\n      raw: line,\n      content: {\n        coordinates: coords,\n        dCode: dMatch ? (`D${dMatch[1]}` as GerberDCode) : undefined,\n        gCode: gMatch ? (gMatch[1] as GerberGCode) : undefined,\n      },\n    };\n  }\n\n  private static parseCoordinates(line: string): GerberLineInfo {\n    return {\n      type: GerberLineType.COORDINATES,\n      raw: line,\n      content: {\n        coordinates: this.extractCoordinates(line),\n      },\n    };\n  }\n\n  private static extractCoordinates(line: string): GerberCoordinate {\n    //       ,    \n    const xMatch = line.match(/X([-+]?\\d*\\.?\\d+)/);\n    const yMatch = line.match(/Y([-+]?\\d*\\.?\\d+)/);\n    const iMatch = line.match(/I([-+]?\\d*\\.?\\d+)/);\n    const jMatch = line.match(/J([-+]?\\d*\\.?\\d+)/);\n    const dMatch = line.match(/D(\\d+)/);\n\n    const parseCoord = (coord: string | undefined): number | undefined => {\n      if (!coord) return undefined;\n\n      if (coord.includes('.')) {\n        // Drill files: coordinates with decimal point (e.g., \"49.05375\")\n        const num = parseFloat(coord);\n        return Number.isNaN(num) ? undefined : num;\n      }\n\n      // Gerber files: coordinates in micrometers without decimal point (e.g., \"49053750\")\n      const num = parseInt(coord, 10);\n      return Number.isNaN(num) ? undefined : num / 1000000; // convert to mm\n    };\n\n    return {\n      x: parseCoord(xMatch?.[1]) || 0,\n      y: parseCoord(yMatch?.[1]) || 0,\n      i: parseCoord(iMatch?.[1]),\n      j: parseCoord(jMatch?.[1]),\n      dCode: dMatch?.[1] ? `D${dMatch![1]}` as GerberCoordinateDCode : undefined,\n    };\n  }\n\n  private static parseDrillComment(line: string): GerberLineInfo {\n    return {\n      type: GerberLineType.DRILL_COMMENT_SEMICOLON,\n      raw: line,\n      content: {\n        comment: line.substring(1).trim(), // Remove semicolon\n      },\n    };\n  }\n\n  private static parseDrillToolDefinition(line: string): GerberLineInfo {\n    const match = line.match(/^T(\\d+)C(\\d*\\.?\\d+)/);\n\n    return {\n      type: GerberLineType.DRILL_TOOL_DEF,\n      raw: line,\n      content: {\n        toolNumber: match ? parseInt(match[1], 10) : undefined,\n        diameter: match ? parseFloat(match[2]) : undefined,\n      },\n    };\n  }\n\n  private static parseDrillToolSelection(line: string): GerberLineInfo {\n    const match = line.match(/^T(\\d+)$/);\n\n    return {\n      type: GerberLineType.DRILL_TOOL_SELECT,\n      raw: line,\n      content: {\n        toolNumber: match ? parseInt(match[1], 10) : undefined,\n      },\n    };\n  }\n\n  private static parseDrillFormat(line: string): GerberLineInfo {\n    const match = line.match(/^FMAT,(\\d+)/);\n\n    return {\n      type: GerberLineType.DRILL_FORMAT,\n      raw: line,\n      content: {\n        drillFormat: match ? parseInt(match[1], 10) : undefined,\n      },\n    };\n  }\n\n  private static parseDrillMetric(line: string): GerberLineInfo {\n    return {\n      type: GerberLineType.DRILL_METRIC,\n      raw: line,\n      content: {\n        units: GerberUnits.MILLIMETERS,\n        zeroSuppression: line.includes('TZ') ? 'trailing' : 'leading',\n      },\n    };\n  }\n\n  private static parseDrillHeaderEnd(line: string): GerberLineInfo {\n    return {\n      type: GerberLineType.DRILL_HEADER_END,\n      raw: line,\n    };\n  }\n\n  private static parseDrillSequence(line: string): GerberLineInfo {\n    const match = line.match(/^N(\\d+)$/);\n\n    return {\n      type: GerberLineType.DRILL_SEQUENCE,\n      raw: line,\n      content: {\n        sequenceNumber: match ? parseInt(match[1], 10) : undefined,\n      },\n    };\n  }\n\n  private static parseLayerPolarity(line: string): GerberLineInfo {\n    const match = line.match(/%LP([DC])\\*?%?/);\n\n    let polarity: GerberMacroExposure | undefined;\n    if (match) {\n      polarity = match[1] === 'D' ? GerberMacroExposure.DARK : GerberMacroExposure.CLEAR;\n    }\n\n    return {\n      type: GerberLineType.LAYER_POLARITY,\n      raw: line,\n      content: {\n        polarity,\n      },\n    };\n  }\n\n  private static parseFileAttribute(line: string): GerberLineInfo {\n    // %TF.name,value1,value2,value3*% format\n    const match = line.match(/%TF\\.([^,*]+),?([^*]*)\\*?%?/);\n\n    let name = '';\n    let value = '';\n    if (match) {\n      [, name, value] = match;\n    }\n\n    return {\n      type: GerberLineType.FILE_ATTRIBUTE,\n      raw: line,\n      content: {\n        attribute: {\n          type: GerberAttributeType.FILE_FUNCTION,\n          name,\n          value,\n        },\n      },\n    };\n  }\n\n  private static parseObjectAttribute(line: string): GerberLineInfo {\n    // %TO.P,component,pin*% or %TO.C,component*% or %TO.N,net*% format\n    const match = line.match(/%TO\\.([^,*]+),?([^*]*)\\*?%?/);\n\n    let name = '';\n    let value = '';\n    if (match) {\n      [, name, value] = match;\n    }\n\n    return {\n      type: GerberLineType.OBJECT_ATTRIBUTE,\n      raw: line,\n      content: {\n        attribute: {\n          type: GerberAttributeType.OBJECT,\n          name,\n          value,\n        },\n      },\n    };\n  }\n\n  private static parseApertureMacroComment(line: string): GerberLineInfo {\n    // 0 comment text* format\n    const commentText = line.substring(1).replace(/\\*$/, '').trim();\n\n    return {\n      type: GerberLineType.APERTURE_MACRO_COMMENT,\n      raw: line,\n      content: {\n        comment: commentText,\n      },\n    };\n  }\n\n  private static parseApertureMacroPrimitive(line: string): GerberLineInfo {\n    // Parse macro primitive like: 4,1,4,$2,$3,$4,$5,$6,$7,$8,$9,$2,$3,0*\n    const primitiveData = line.replace(/\\*%?$/, '').trim();\n    const params = primitiveData.split(',').map((p) => p.trim());\n\n    return {\n      type: GerberLineType.APERTURE_MACRO_PRIMITIVE,\n      raw: line,\n      content: {\n        primitiveType: params[0] ? parseInt(params[0], 10) : undefined,\n        parameters: params.slice(1),\n      },\n    };\n  }\n\n  private static parseApertureAttribute(line: string): GerberLineInfo {\n    // %TA.name,value1,value2*% format\n    const match = line.match(/%TA\\.([^,*]+),?([^*]*)\\*?%?/);\n\n    let name = '';\n    let value = '';\n    if (match) {\n      [, name, value] = match;\n    }\n\n    return {\n      type: GerberLineType.APERTURE_ATTRIBUTE,\n      raw: line,\n      content: {\n        attribute: {\n          type: GerberAttributeType.APERTURE,\n          name,\n          value,\n        },\n      },\n    };\n  }\n\n  private static parseAttributeDelete(line: string): GerberLineInfo {\n    // %TD*% format - deletes all aperture attributes\n    return {\n      type: GerberLineType.ATTRIBUTE_DELETE,\n      raw: line,\n      content: {\n        attribute: {\n          type: GerberAttributeType.DELETE,\n          name: 'DeleteAll',\n          value: '',\n        },\n      },\n    };\n  }\n}\n","import { PCBShape } from '@/models/abstract';\nimport {\n  Circle, Oval, Polyline, RectCenter, RectRound, Triangle,\n} from '@/models/geometry/shapes';\nimport {\n  GerberApertureType,\n  GerberCoordinateDCode,\n  GerberElementToCreateMacroShape,\n  GerberElementToCreateShape,\n  GerberElementToCreateSimpleShape,\n  GerberGCodeInterpolationMode,\n  GerberMacroPrimitiveType,\n} from '@/types/GerberTypes';\nimport { CurvePoint } from '@/types/ShapeTypes';\nimport { GeometryUtils } from '@/utils';\n\ntype ShapeCreatorFunction = (data: GerberElementToCreateShape) => PCBShape<any, any> | null;\n\nexport class GerberShapeFactory {\n  private static readonly SIMPLE_SHAPE_CREATORS: Partial<Record<GerberApertureType, ShapeCreatorFunction>> = {\n    [GerberApertureType.CIRCLE]: this.createCircle,\n    [GerberApertureType.RECTANGLE]: this.createRectangle,\n    [GerberApertureType.OBROUND]: this.createOval,\n    [GerberApertureType.POLYGON]: this.createPolygon,\n  };\n\n  public static createShape(elementData: GerberElementToCreateShape): PCBShape<any, any> | null {\n    if (this.isMacroAperture(elementData)) {\n      return this.createMacroShape(elementData as GerberElementToCreateMacroShape);\n    }\n\n    if (this.isFlashOperation(elementData)) {\n      return this.createSimpleShape(elementData);\n    }\n\n    if (this.isDrawOperation(elementData)) {\n      return this.createPolyline(elementData);\n    }\n\n    return null;\n  }\n\n  private static isMacroAperture(elementData: GerberElementToCreateShape): boolean {\n    const { aperture } = elementData;\n    const isMacroType = aperture.type === GerberApertureType.MACRO;\n    const hasPrimitives = 'primitives' in aperture;\n\n    return isMacroType && hasPrimitives;\n  }\n\n  private static isFlashOperation(elementData: GerberElementToCreateShape): boolean {\n    const { aperture, coords } = elementData;\n    const isSingleCoordinate = coords.length === 1;\n    const isFlashCode = coords[0]?.dCode === GerberCoordinateDCode.FLASH;\n    const hasParameters = 'parameters' in aperture;\n\n    return isSingleCoordinate && isFlashCode && hasParameters;\n  }\n\n  private static isDrawOperation(elementData: GerberElementToCreateShape): boolean {\n    const { aperture, coords } = elementData;\n    const hasMultipleCoordinates = coords.length > 1;\n    const hasParameters = 'parameters' in aperture;\n\n    return hasMultipleCoordinates && hasParameters;\n  }\n\n  private static createMacroShape(macroData: GerberElementToCreateMacroShape): PCBShape<any, any> | null {\n    const { aperture } = macroData;\n\n    // Substitute macro parameters into primitives before creating shape\n    const parameters = (aperture as any).parameters || macroData.parameters || [];\n    const processedAperture = this.substituteMacroParameters(aperture, parameters);\n    const processedData = { ...macroData, aperture: processedAperture };\n\n    // Check for rounded rectangle macro types (case-insensitive)\n    if (this.isRoundedRectMacro(aperture.name)) {\n      return this.createRoundedRectangleMacro(processedData);\n    }\n\n    // Check for FreePoly macro types\n    if (this.isFreePolyMacro(aperture.name)) {\n      return this.createFreePolyMacro(processedData);\n    }\n\n    return null;\n  }\n\n  private static isRoundedRectMacro(macroName: string): boolean {\n    // Match various rounded rectangle macro names (case-insensitive)\n    // Examples: RoundRect, ROUNDEDRECT, RoundedRect, round_rect, etc.\n    return /^round(ed)?[_-]?rect.{0,}$/i.test(macroName);\n  }\n\n  private static isFreePolyMacro(macroName: string): boolean {\n    // Match FreePoly macro names (case-insensitive)\n    // Examples: FreePoly0, FreePoly1, freepoly2, FREE_POLY3, etc.\n    return /^free[_-]?poly\\d*$/i.test(macroName);\n  }\n\n  private static substituteMacroParameters(aperture: any, parameters: string[]): any {\n    // Create a copy of aperture with substituted parameters\n    const processedPrimitives = aperture.primitives?.map((primitive: any) => {\n      const processedParameters = primitive.parameters.map((param: number | string) => {\n        // If it's already a number, return it\n        if (typeof param === 'number') {\n          return param;\n        }\n\n        // If it's a string with variables or expressions\n        if (typeof param === 'string') {\n          // Handle expressions like $1+$1\n          if (param.includes('$') && param.includes('+')) {\n            return this.evaluateExpression(param, parameters);\n          }\n\n          // Handle simple variables like $1, $2\n          if (param.startsWith('$')) {\n            const varIndex = parseInt(param.substring(1), 10) - 1; // Convert to 0-based index\n            return varIndex < parameters.length ? parseFloat(parameters[varIndex]) : 0;\n          }\n\n          // Handle direct numbers as strings\n          return parseFloat(param) || 0;\n        }\n\n        return param;\n      });\n\n      return {\n        ...primitive,\n        parameters: processedParameters,\n      };\n    }) || [];\n\n    return {\n      ...aperture,\n      primitives: processedPrimitives,\n    };\n  }\n\n  private static evaluateExpression(expr: string, parameters: string[]): number {\n    // Replace variables with their values\n    let processedExpr = expr;\n    const variableMatches = expr.match(/\\$(\\d+)/g);\n\n    if (variableMatches) {\n      variableMatches.forEach((variable) => {\n        const varIndex = parseInt(variable.substring(1), 10) - 1;\n        const value = varIndex < parameters.length ? parameters[varIndex] : '0';\n        processedExpr = processedExpr.replace(variable, value);\n      });\n    }\n\n    // Simple evaluation for expressions like \"0.25+0.25\"\n    if (processedExpr.includes('+')) {\n      const parts = processedExpr.split('+');\n      return parts.reduce((sum, part) => sum + (parseFloat(part.trim()) || 0), 0);\n    }\n\n    if (processedExpr.includes('*')) {\n      const parts = processedExpr.split('*');\n      return parts.reduce((product, part) => product * (parseFloat(part.trim()) || 1), 1);\n    }\n\n    return parseFloat(processedExpr) || 0;\n  }\n\n  private static createRoundedRectangleMacro(macroData: GerberElementToCreateMacroShape): RectRound {\n    const { coords, aperture } = macroData;\n    const centerPoint = { x: coords[0].x, y: coords[0].y };\n\n    const vectorLines = aperture.primitives?.filter(({ type }) => type === GerberMacroPrimitiveType.VECTOR_LINE) || [];\n    const circles = aperture.primitives?.filter(({ type }) => type === GerberMacroPrimitiveType.CIRCLE) || [];\n\n    const cornerRadius = Math.max(...circles.map((circle) => circle.parameters[0]));\n    const rectWidth = Math.max(...vectorLines.map((line) => line.parameters[0]));\n    const rectHeight = Math.max(\n      ...vectorLines.map((line) => {\n        const [, startX, startY, endX, endY] = line.parameters;\n        return GeometryUtils.getDistance({ x: startX, y: startY }, { x: endX, y: endY });\n      }),\n    );\n    const rotationAngle = Math.max(...vectorLines.map((line) => line.parameters[5] || 0));\n\n    return new RectRound(\n      { center: centerPoint },\n      {\n        width: rectWidth,\n        height: rectHeight,\n        radius: cornerRadius,\n        rotation: rotationAngle,\n        upperLeft: true,\n        upperRight: true,\n        lowerLeft: true,\n        lowerRight: true,\n      },\n    );\n  }\n\n  private static createFreePolyMacro(macroData: GerberElementToCreateMacroShape): Polyline | null {\n    const { coords, aperture } = macroData;\n    const centerPoint = { x: coords[0].x, y: coords[0].y };\n\n    // Find the outline primitive (type 4)\n    const outlinePrimitive = aperture.primitives?.find(({ type }) => type === GerberMacroPrimitiveType.OUTLINE);\n    if (!outlinePrimitive) return null;\n\n    const [numVertices, ...coordinates] = outlinePrimitive.parameters;\n\n    // Extract coordinate pairs (x,y) from parameters\n    const vertices: CurvePoint[] = [];\n    for (let i = 0; i < numVertices; i += 1) {\n      const x = coordinates[i * 2] || 0;\n      const y = coordinates[i * 2 + 1] || 0;\n      vertices.push({ x, y });\n    }\n\n    // Ensure we have at least some vertices\n    if (vertices.length === 0) {\n      vertices.push({ x: 0, y: 0 });\n    }\n\n    // Close the polygon by adding the first vertex at the end (if not already closed)\n    const firstVertex = vertices[0];\n    const lastVertex = vertices[vertices.length - 1];\n    if (firstVertex.x !== lastVertex.x || firstVertex.y !== lastVertex.y) {\n      vertices.push({ ...firstVertex });\n    }\n\n    const [startPoint, ...pathPoints] = vertices;\n\n    return new Polyline(\n      {\n        location: centerPoint,\n        begin: startPoint,\n        path: pathPoints,\n      },\n      {},\n    );\n  }\n\n  private static createSimpleShape(elementData: GerberElementToCreateShape): PCBShape<any, any> | null {\n    const shapeCreator = this.SIMPLE_SHAPE_CREATORS[elementData.aperture.type];\n    return shapeCreator ? shapeCreator(elementData) : null;\n  }\n\n  private static createPolyline(elementData: GerberElementToCreateShape): Polyline {\n    const { coords, aperture } = elementData as GerberElementToCreateSimpleShape;\n\n    const pathPoints = coords.map((coordinate, index) => {\n      const point: CurvePoint = { x: coordinate.x, y: coordinate.y };\n\n      // Check if this coordinate has arc interpolation (I/J parameters)\n      if ((coordinate.i !== undefined || coordinate.j !== undefined) && coordinate.mode) {\n        // Get the previous coordinate to calculate absolute center position\n        const prevCoord = index > 0 ? coords[index - 1] : coordinate;\n\n        // Calculate absolute center coordinates from relative I/J offsets\n        const absoluteCenterX = prevCoord.x + (coordinate.i || 0);\n        const absoluteCenterY = prevCoord.y + (coordinate.j || 0);\n\n        point.centerX = absoluteCenterX;\n        point.centerY = absoluteCenterY;\n\n        // Determine arc direction based on interpolation mode\n        // CLOCKWISE_ARC = G02 (clockwise), COUNTERCLOCKWISE_ARC = G03 (counterclockwise)\n        const isClockwiseArc = coordinate.mode === GerberGCodeInterpolationMode.CLOCKWISE_ARC;\n        point.clockwise = isClockwiseArc;\n      }\n\n      return point;\n    });\n\n    // Separate first point from the rest\n    const [startPoint, ...restPoints] = pathPoints;\n\n    return new Polyline(\n      {\n        location: { x: 0, y: 0 },\n        begin: startPoint || { x: 0, y: 0 },\n        path: restPoints,\n      },\n      {\n        lineWidth: Math.max(...aperture.parameters!),\n      },\n    );\n  }\n\n  private static createOval(elementData: GerberElementToCreateShape): Oval {\n    const { coords, aperture } = elementData as GerberElementToCreateSimpleShape;\n    const centerPoint = { x: coords[0].x, y: coords[0].y };\n    const [ovalWidth, ovalHeight] = aperture.parameters!;\n\n    return new Oval({ center: centerPoint }, { width: ovalWidth, height: ovalHeight });\n  }\n\n  private static createCircle(elementData: GerberElementToCreateShape): Circle {\n    const { coords, aperture } = elementData as GerberElementToCreateSimpleShape;\n    const centerPoint = { x: coords[0].x, y: coords[0].y };\n    const circleDiameter = aperture.parameters![0];\n\n    return new Circle({ center: centerPoint }, { diameter: circleDiameter });\n  }\n\n  private static createRectangle(elementData: GerberElementToCreateShape): RectCenter {\n    const { coords, aperture } = elementData as GerberElementToCreateSimpleShape;\n    const centerPoint = { x: coords[0].x, y: coords[0].y };\n    const [rectWidth, rectHeight] = aperture.parameters!;\n\n    return new RectCenter({ center: centerPoint }, { width: rectWidth, height: rectHeight });\n  }\n\n  private static createPolygon(elementData: GerberElementToCreateShape): PCBShape<any, any> {\n    const { coords, aperture } = elementData as GerberElementToCreateSimpleShape;\n    const centerPoint = { x: coords[0].x, y: coords[0].y };\n    const [diameter, vertices, rotation] = aperture.parameters!;\n\n    if (vertices === 3) {\n      const triangle = new Triangle({ center: centerPoint }, { base: diameter, height: diameter, rotation });\n      return triangle;\n    }\n\n    if (vertices === 4) {\n      const sideLength = diameter / Math.sqrt(2);\n\n      return new RectCenter(\n        { center: centerPoint },\n        {\n          width: sideLength,\n          height: sideLength,\n          rotation,\n        },\n      );\n    }\n\n    return new Circle({ center: centerPoint }, { diameter });\n  }\n}\n","import { PCBElement, PCBElementInfo } from '@/models/abstract';\nimport { GerberComponent, GerberNet, GerberNonFunctional } from '@/models/Gerber';\nimport { GerberElementToCreateComponent } from '@/types/GerberTypes';\n\nexport class GerberElementFactory {\n  public static createElement(lineInfo: GerberElementToCreateComponent): PCBElement | null {\n    const { shape, attributes, elementFunction } = lineInfo;\n    const elementInfo: PCBElementInfo = { ...attributes };\n    if (elementFunction) {\n      elementInfo.function = elementFunction;\n    }\n\n    if (attributes.C) {\n      return new GerberComponent(elementInfo, [shape]);\n    }\n\n    if (attributes.N) {\n      return new GerberNet(elementInfo, shape);\n    }\n\n    return new GerberNonFunctional(elementInfo, shape);\n  }\n}\n","import {\n  GerberApertureFunction,\n  GerberAttributeInfo,\n  GerberAttributeType,\n  GerberCoordinateDCode,\n  GerberDCode,\n  GerberElementToCreateShape,\n  GerberGCode,\n  GerberGCodeInterpolationMode,\n  GerberLineInfo,\n  GerberLineType,\n  GerberMacroDefinition,\n  GerberObjectAttribute,\n  GerberProcessedAperture,\n  GerberProcessedElement,\n  GerberProcessedGCodeOptions,\n} from '@/types/GerberTypes';\n\nimport { PCBElement } from '@/models/abstract';\nimport {\n  GerberComponent,\n  GerberLayer,\n  GerberNet,\n  GerberNonFunctional,\n} from '@/models/Gerber';\n\nimport { GerberLineClassifier } from './GerberLineClassifier';\nimport { GerberShapeFactory } from './GerberShapeFactory';\nimport { GerberElementFactory } from './GerberElementFactory';\n\ninterface LayerParserState {\n  layerInfo: Record<string, any>;\n  gcodeOptions: GerberProcessedGCodeOptions;\n  currentApertures: Partial<Record<GerberDCode, GerberProcessedAperture>>;\n  currentMacros: Partial<Record<string, GerberMacroDefinition>>;\n  allElements: GerberProcessedElement[];\n  currentObjectAttributes: Partial<Record<GerberObjectAttribute, string>>;\n  currentApertureFunction: GerberApertureFunction | null;\n  currentApertureDCode: GerberDCode | null;\n  currentElement: GerberProcessedElement | null;\n  notParsed: GerberLineInfo[];\n}\n\nexport class GerberFileParser {\n  private static readonly GCODE_OPTIONS_MAP: Partial<Record<GerberGCode, GerberProcessedGCodeOptions>> = {\n    [GerberGCode.LINEAR_INTERPOLATION]: { interpolationMode: GerberGCodeInterpolationMode.LINEAR },\n    [GerberGCode.CLOCKWISE_ARC]: { interpolationMode: GerberGCodeInterpolationMode.CLOCKWISE_ARC },\n    [GerberGCode.COUNTERCLOCKWISE_ARC]: { interpolationMode: GerberGCodeInterpolationMode.COUNTERCLOCKWISE_ARC },\n    [GerberGCode.MULTI_QUADRANT_MODE]: { circularMode: true, multiQuadrant: true },\n  };\n\n  private static readonly SKIPPABLE_LINE_TYPES = new Set([\n    GerberLineType.EMPTY,\n    GerberLineType.COMMENT,\n    GerberLineType.M_CODE,\n  ]);\n\n  private static readonly ELEMENT_BREAKING_TYPES = new Set([\n    GerberLineType.D_OPERATION,\n    GerberLineType.G_CODE,\n  ]);\n\n  public static parseGerberLayer(name: string, data: string): GerberLayer {\n    const gbrLines = GerberFileParser.parseGBRLines(data);\n    const state = GerberFileParser.initializeParserState();\n\n    GerberFileParser.processGerberLines(gbrLines, state);\n\n    return GerberFileParser.buildLayer(name, state);\n  }\n\n  private static initializeParserState(): LayerParserState {\n    return {\n      layerInfo: {},\n      gcodeOptions: {},\n      currentApertures: {},\n      currentMacros: {},\n      allElements: [],\n      currentObjectAttributes: {},\n      currentApertureFunction: null,\n      currentApertureDCode: null,\n      currentElement: null,\n      notParsed: [],\n    };\n  }\n\n  private static processGerberLines(gbrLines: string[], state: LayerParserState): void {\n    gbrLines.forEach((line, index) => {\n      const lineInfo = GerberLineClassifier.classifyLine(line);\n\n      if (GerberFileParser.SKIPPABLE_LINE_TYPES.has(lineInfo.type)) {\n        return;\n      }\n\n      GerberFileParser.handleElementBreaking(lineInfo, state);\n\n      if (lineInfo.type === GerberLineType.UNKNOWN) {\n        console.warn(`Unknown Gerber line at ${index + 1}: ${line}`);\n        return;\n      }\n\n      GerberFileParser.processLineByType(lineInfo, state);\n    });\n  }\n\n  private static handleElementBreaking(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    const isBreakingType = !GerberFileParser.ELEMENT_BREAKING_TYPES.has(lineInfo.type);\n    if (isBreakingType && state.currentElement) {\n      state.allElements.push(state.currentElement);\n      state.currentElement = null;\n    }\n  }\n\n  private static processLineByType(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    switch (lineInfo.type) {\n      case GerberLineType.FILE_ATTRIBUTE:\n        GerberFileParser.handleFileAttribute(lineInfo, state);\n        break;\n      case GerberLineType.FORMAT_SPEC:\n        GerberFileParser.handleFormatSpec(lineInfo, state);\n        break;\n      case GerberLineType.UNITS:\n        GerberFileParser.handleUnits(lineInfo, state);\n        break;\n      case GerberLineType.LAYER_POLARITY:\n        GerberFileParser.handleLayerPolarity(lineInfo, state);\n        break;\n      case GerberLineType.G_CODE:\n        GerberFileParser.handleGCode(lineInfo, state);\n        break;\n      case GerberLineType.APERTURE_ATTRIBUTE:\n        GerberFileParser.handleApertureAttribute(lineInfo, state);\n        break;\n      case GerberLineType.APERTURE_DEF:\n        GerberFileParser.handleApertureDef(lineInfo, state);\n        break;\n      case GerberLineType.D_APERTURE_SELECT:\n        GerberFileParser.handleDApertureSelect(lineInfo, state);\n        break;\n      case GerberLineType.ATTRIBUTE_DELETE:\n        GerberFileParser.handleAttributeDeleteLine(lineInfo, state);\n        break;\n      case GerberLineType.OBJECT_ATTRIBUTE:\n        GerberFileParser.handleObjectAttributeLine(lineInfo, state);\n        break;\n      case GerberLineType.D_OPERATION:\n        GerberFileParser.handleDOperation(lineInfo, state);\n        break;\n      case GerberLineType.APERTURE_MACRO:\n        GerberFileParser.handleApertureMacro(lineInfo, state);\n        break;\n      default:\n        state.notParsed.push(lineInfo);\n    }\n  }\n\n  private static handleFileAttribute(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    const attr = lineInfo.content?.attribute;\n    if (attr) {\n      state.layerInfo[attr.name] = attr.value;\n    }\n  }\n\n  private static handleFormatSpec(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    state.layerInfo.format = lineInfo.content?.format;\n  }\n\n  private static handleUnits(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    state.layerInfo.units = lineInfo.content?.units;\n  }\n\n  private static handleLayerPolarity(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    state.layerInfo.polarity = lineInfo.content?.polarity;\n  }\n\n  private static handleGCode(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    state.gcodeOptions = {\n      ...state.gcodeOptions,\n      ...GerberFileParser.processGCode(lineInfo.content?.gCode),\n    };\n  }\n\n  private static handleApertureAttribute(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    const attr = lineInfo.content?.attribute;\n    if (attr) {\n      state.currentApertureFunction = attr.value as GerberApertureFunction;\n    }\n  }\n\n  private static handleApertureDef(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    if (lineInfo.content?.aperture) {\n      GerberFileParser.processApertureDefinition(lineInfo, state);\n    }\n\n    if (lineInfo.content?.macro) {\n      GerberFileParser.processMacroDefinition(lineInfo, state);\n    }\n  }\n\n  private static processApertureDefinition(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    const aperture = lineInfo.content!.aperture!;\n    state.currentApertures[aperture.code] = aperture as GerberProcessedAperture;\n\n    if (state.currentApertureFunction) {\n      state.currentApertures[aperture.code]!.apertureFunction = state.currentApertureFunction;\n    }\n  }\n\n  private static processMacroDefinition(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    const macroWithParams = {\n      ...state.currentMacros[lineInfo.content!.macro!.name]!,\n      parameters: lineInfo.content!.parameters,\n    };\n\n    state.currentApertures[lineInfo.content!.macro!.code!] = macroWithParams;\n\n    if (state.currentApertureFunction) {\n      state.currentApertures[lineInfo.content!.macro!.code!]!.apertureFunction = state.currentApertureFunction;\n    }\n  }\n\n  private static handleDApertureSelect(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    const dCode = lineInfo.content?.dCode;\n    if (dCode) {\n      state.currentApertureDCode = dCode;\n    }\n  }\n\n  private static handleAttributeDeleteLine(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    const attr = lineInfo.content?.attribute;\n    if (attr) {\n      state.currentObjectAttributes = GerberFileParser.processObjectAttribute(state.currentObjectAttributes, attr);\n    }\n  }\n\n  private static handleObjectAttributeLine(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    const attr = lineInfo.content?.attribute;\n    if (attr) {\n      state.currentObjectAttributes = GerberFileParser.processObjectAttribute(state.currentObjectAttributes, attr);\n    }\n  }\n\n  private static handleDOperation(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    const coords = lineInfo.content?.coordinates;\n    if (!coords) return;\n\n    coords.mode = state.gcodeOptions.interpolationMode || GerberGCodeInterpolationMode.LINEAR;\n\n    if (GerberFileParser.shouldBreakCurrentElement(coords, state)) {\n      state.allElements.push(state.currentElement!);\n      state.currentElement = null;\n    }\n\n    if (!state.currentElement) {\n      state.currentElement = {\n        coords: [],\n        apertureDCode: state.currentApertureDCode!,\n        attributes: { ...state.currentObjectAttributes },\n      };\n    }\n\n    state.currentElement.coords.push(coords);\n  }\n\n  private static shouldBreakCurrentElement(coords: any, state: LayerParserState): boolean {\n    return coords\n           && [GerberCoordinateDCode.FLASH, GerberCoordinateDCode.MOVE].includes(coords.dCode)\n           && state.currentElement !== null;\n  }\n\n  private static handleApertureMacro(lineInfo: GerberLineInfo, state: LayerParserState): void {\n    const macro = lineInfo.content?.macro;\n    if (macro) {\n      state.currentMacros[macro.name] = macro;\n    }\n  }\n\n  private static buildLayer(name: string, state: LayerParserState): GerberLayer {\n    const layer = new GerberLayer(name);\n    layer.setInfo(state.layerInfo);\n\n    const processedElements = GerberFileParser.createPCBElements(state);\n    GerberFileParser.addElementsToLayer(layer, processedElements);\n\n    GerberFileParser.logDebugInfo(state, processedElements);\n\n    return layer;\n  }\n\n  private static createPCBElements(state: LayerParserState): PCBElement[] {\n    const allPCBElements: PCBElement[] = [];\n\n    state.allElements.forEach((element) => {\n      const pcbElement = GerberFileParser.createPCBElement(element, state);\n      if (pcbElement) {\n        allPCBElements.push(pcbElement);\n      }\n    });\n\n    return allPCBElements;\n  }\n\n  private static createPCBElement(element: GerberProcessedElement, state: LayerParserState): PCBElement | null {\n    const aperture = state.currentApertures[element.apertureDCode!];\n    if (!aperture) {\n      console.warn(`Aperture not found for D-code: ${element.apertureDCode}`);\n      return null;\n    }\n\n    const elementToShape: GerberElementToCreateShape = {\n      aperture,\n      coords: element.coords,\n    };\n\n    const shape = GerberShapeFactory.createShape(elementToShape);\n    if (!shape) {\n      console.warn(`Shape could not be created for element with D-code: ${element.apertureDCode}`);\n      return null;\n    }\n\n    const pcbElement = GerberElementFactory.createElement({\n      elementFunction: aperture.apertureFunction,\n      attributes: element.attributes,\n      shape,\n    });\n\n    if (!pcbElement) {\n      console.warn(`PCB Element could not be created for shape with D-code: ${element.apertureDCode}`);\n      return null;\n    }\n\n    return pcbElement;\n  }\n\n  private static addElementsToLayer(layer: GerberLayer, elements: PCBElement[]): void {\n    elements.forEach((pcbElement) => {\n      if (pcbElement instanceof GerberComponent) {\n        layer.addComponent(pcbElement);\n      } else if (pcbElement instanceof GerberNet) {\n        layer.addNet(pcbElement);\n      } else {\n        layer.addNonFunctional(pcbElement as GerberNonFunctional);\n      }\n    });\n  }\n\n  private static logDebugInfo(state: LayerParserState, allPCBElements: PCBElement[]): void {\n    if (state.notParsed.length) {\n      console.warn('Some Gerber lines were not parsed:', state.notParsed);\n    }\n\n    console.log('currentMacros', state.currentMacros);\n    console.log('currentApertures', state.currentApertures);\n    console.log('allElements', state.allElements);\n    console.log('allShapes', allPCBElements.map((e) => e));\n  }\n\n  private static processGCode(gcode: GerberGCode | undefined): GerberProcessedGCodeOptions {\n    if (!gcode) return {};\n    return GerberFileParser.GCODE_OPTIONS_MAP[gcode] || {};\n  }\n\n  private static processObjectAttribute(\n    record: Partial<Record<GerberObjectAttribute, string>>,\n    attr: GerberAttributeInfo,\n  ): Partial<Record<GerberObjectAttribute, string>> {\n    if (attr.type === GerberAttributeType.DELETE) {\n      return GerberFileParser.handleAttributeDeleteType(record, attr);\n    }\n\n    if (attr.type === GerberAttributeType.OBJECT) {\n      return GerberFileParser.handleAttributeSetType(record, attr);\n    }\n\n    return record;\n  }\n\n  private static handleAttributeDeleteType(\n    record: Partial<Record<GerberObjectAttribute, string>>,\n    attr: GerberAttributeInfo,\n  ): Partial<Record<GerberObjectAttribute, string>> {\n    if (attr.value && Object.values(GerberObjectAttribute).includes(attr.value as GerberObjectAttribute)) {\n      const newRecord = { ...record };\n      delete newRecord[attr.name as GerberObjectAttribute];\n      return newRecord;\n    }\n    return {};\n  }\n\n  private static handleAttributeSetType(\n    record: Partial<Record<GerberObjectAttribute, string>>,\n    attr: GerberAttributeInfo,\n  ): Partial<Record<GerberObjectAttribute, string>> {\n    return {\n      ...record,\n      [attr.name as GerberObjectAttribute]: attr.value || '',\n    };\n  }\n\n  private static parseGBRLines(data: string): string[] {\n    const lines = data.split(/\\r?\\n/);\n    const gbrLines: string[] = [];\n\n    let isLastLineClosed = true;\n\n    lines.forEach((line) => {\n      if (isLastLineClosed) {\n        gbrLines.push(line);\n      } else {\n        gbrLines[gbrLines.length - 1] += line;\n      }\n\n      isLastLineClosed = GerberFileParser.isLineComplete(line, isLastLineClosed);\n    });\n\n    return gbrLines;\n  }\n\n  private static isLineComplete(line: string, wasLastLineClosed: boolean): boolean {\n    if (line.startsWith('%') || !wasLastLineClosed) {\n      return line.endsWith('%');\n    }\n    return true;\n  }\n}\n","import {\n  GerberApertureFunction,\n  GerberAttributeType,\n  GerberElementToCreateShape,\n  GerberLineInfo,\n  GerberLineType,\n  GerberObjectAttribute,\n  GerberUnits,\n} from '@/types/GerberTypes';\n\nimport { PCBElement } from '@/models/abstract';\nimport {\n  GerberComponent,\n  GerberLayer,\n  GerberNet,\n  GerberNonFunctional,\n} from '@/models/Gerber';\n\nimport { GerberLineClassifier } from './GerberLineClassifier';\nimport { GerberShapeFactory } from './GerberShapeFactory';\nimport { GerberElementFactory } from './GerberElementFactory';\n\ninterface DrillParserState {\n  layerInfo: Record<string, any>;\n  currentTools: Record<number, { diameter: number; apertureFunction?: GerberApertureFunction }>;\n  currentTool: number | null;\n  drillHits: Array<{ x: number; y: number; tool: number }>;\n  attributes: Partial<Record<GerberObjectAttribute, string>>;\n  format: { leading: string; trailing: string } | null;\n  units: GerberUnits | null;\n  notParsed: GerberLineInfo[];\n}\n\nexport class DrillFileParser {\n  private static readonly DRILL_SKIPPABLE_LINE_TYPES = new Set([\n    GerberLineType.EMPTY,\n    GerberLineType.DRILL_HEADER_END,\n  ]);\n\n  public static parseDrillLayer(name: string, data: string): GerberLayer {\n    const lines = data.split(/\\r?\\n/);\n    const state = DrillFileParser.initializeDrillParserState();\n\n    DrillFileParser.processDrillLines(lines, state);\n\n    return DrillFileParser.buildDrillLayer(name, state);\n  }\n\n  private static initializeDrillParserState(): DrillParserState {\n    return {\n      layerInfo: {},\n      currentTools: {},\n      currentTool: null,\n      drillHits: [],\n      attributes: {},\n      format: null,\n      units: null,\n      notParsed: [],\n    };\n  }\n\n  private static processDrillLines(lines: string[], state: DrillParserState): void {\n    lines.forEach((line, index) => {\n      const lineInfo = GerberLineClassifier.classifyLine(line);\n\n      if (DrillFileParser.DRILL_SKIPPABLE_LINE_TYPES.has(lineInfo.type)) {\n        return;\n      }\n\n      if (lineInfo.type === GerberLineType.UNKNOWN) {\n        console.warn(`Unknown Drill line at ${index + 1}: ${line}`);\n        return;\n      }\n\n      DrillFileParser.processDrillLineByType(lineInfo, state);\n    });\n  }\n\n  private static processDrillLineByType(lineInfo: GerberLineInfo, state: DrillParserState): void {\n    switch (lineInfo.type) {\n      case GerberLineType.DRILL_FORMAT:\n        DrillFileParser.handleDrillFormat(lineInfo, state);\n        break;\n      case GerberLineType.DRILL_METRIC:\n        DrillFileParser.handleDrillMetric(lineInfo, state);\n        break;\n      case GerberLineType.DRILL_TOOL_DEF:\n        DrillFileParser.handleDrillToolDef(lineInfo, state);\n        break;\n      case GerberLineType.DRILL_TOOL_SELECT:\n        DrillFileParser.handleDrillToolSelect(lineInfo, state);\n        break;\n      case GerberLineType.COORDINATES:\n        DrillFileParser.handleDrillCoordinates(lineInfo, state);\n        break;\n      case GerberLineType.G_CODE:\n        DrillFileParser.handleDrillGCode(lineInfo, state);\n        break;\n      case GerberLineType.M_CODE:\n        DrillFileParser.handleDrillMCode(lineInfo, state);\n        break;\n      case GerberLineType.DRILL_COMMENT_SEMICOLON:\n        DrillFileParser.handleDrillComment(lineInfo, state);\n        break;\n      case GerberLineType.DRILL_SEQUENCE:\n        DrillFileParser.handleDrillSequence(lineInfo, state);\n        break;\n      default:\n        state.notParsed.push(lineInfo);\n    }\n  }\n\n  private static handleDrillFormat(lineInfo: GerberLineInfo, state: DrillParserState): void {\n    const format = lineInfo.content?.drillFormat;\n    if (format !== undefined) {\n      state.layerInfo.drillFormat = format;\n\n      // Set coordinate format based on drill format\n      // Format 2 typically means 2:4 (2 digits before, 4 after decimal)\n      if (format === 2) {\n        state.format = { leading: '2', trailing: '4' };\n      }\n    }\n  }\n\n  private static handleDrillMetric(lineInfo: GerberLineInfo, state: DrillParserState): void {\n    state.units = lineInfo.content?.units || GerberUnits.MILLIMETERS;\n    state.layerInfo.units = state.units;\n    state.layerInfo.zeroSuppression = lineInfo.content?.zeroSuppression || 'trailing';\n  }\n\n  private static handleDrillToolDef(lineInfo: GerberLineInfo, state: DrillParserState): void {\n    const toolNumber = lineInfo.content?.toolNumber;\n    const diameter = lineInfo.content?.diameter;\n\n    if (toolNumber !== undefined && diameter !== undefined) {\n      state.currentTools[toolNumber] = {\n        diameter,\n        apertureFunction: state.layerInfo.nextApertureFunction,\n      };\n\n      // Clear the aperture function after using it\n      delete state.layerInfo.nextApertureFunction;\n    }\n  }\n\n  private static handleDrillToolSelect(lineInfo: GerberLineInfo, state: DrillParserState): void {\n    const toolNumber = lineInfo.content?.toolNumber;\n    if (toolNumber !== undefined) {\n      state.currentTool = toolNumber;\n    }\n  }\n\n  private static handleDrillCoordinates(lineInfo: GerberLineInfo, state: DrillParserState): void {\n    const coords = lineInfo.content?.coordinates;\n\n    if (coords && state.currentTool !== null) {\n      // Convert coordinates to proper scale based on units\n      const scaleFactor = state.units === GerberUnits.MILLIMETERS ? 1.0 : 25.4; // inch to mm conversion\n\n      state.drillHits.push({\n        x: (coords.x || 0) * scaleFactor,\n        y: (coords.y || 0) * scaleFactor,\n        tool: state.currentTool,\n      });\n    }\n  }\n\n  private static handleDrillGCode(lineInfo: GerberLineInfo, state: DrillParserState): void {\n    // Handle drill G-codes (G90 - absolute mode, G05 - drill mode, etc.)\n    const gCode = lineInfo.content?.gCode;\n    if (gCode) {\n      state.layerInfo.gCode = gCode;\n    }\n  }\n\n  private static handleDrillMCode(lineInfo: GerberLineInfo, state: DrillParserState): void {\n    // Handle drill M-codes (M48 - start header, M30 - end program, etc.)\n    const mCode = lineInfo.content?.mCode;\n    if (mCode) {\n      state.layerInfo.mCode = mCode;\n    }\n  }\n\n  private static handleDrillComment(lineInfo: GerberLineInfo, state: DrillParserState): void {\n    const comment = lineInfo.content?.comment;\n\n    if (comment && comment.includes('#@!')) {\n      // Parse attributes from comments like \"; #@! TA.AperFunction,ViaDrill\"\n      const attrMatch = comment.match(/#@!\\s*(TF|TO|TA)\\.([^,]+),?(.*)$/);\n\n      if (attrMatch) {\n        const [, attrType, attrName, attrValue] = attrMatch;\n\n        if (attrType === GerberAttributeType.APERTURE && attrName === 'AperFunction') {\n          const apertureFunction = attrValue as GerberApertureFunction;\n\n          state.layerInfo.nextApertureFunction = apertureFunction;\n        } else if (attrType === GerberAttributeType.FILE_FUNCTION) {\n          // File attributes like FileFunction, GenerationSoftware, etc.\n          state.layerInfo[attrName] = attrValue;\n        } else if (attrType === GerberAttributeType.OBJECT) {\n          // Object attributes\n          state.attributes[attrName as GerberObjectAttribute] = attrValue;\n        }\n      }\n    }\n  }\n\n  private static handleDrillSequence(lineInfo: GerberLineInfo, state: DrillParserState): void {\n    const sequenceNumber = lineInfo.content?.sequenceNumber;\n    if (sequenceNumber !== undefined) {\n      state.layerInfo.sequenceNumber = sequenceNumber;\n    }\n  }\n\n  private static buildDrillLayer(name: string, state: DrillParserState): GerberLayer {\n    const layer = new GerberLayer(name);\n    layer.setInfo(state.layerInfo);\n\n    const drillElements = DrillFileParser.createDrillElements(state);\n    DrillFileParser.addElementsToLayer(layer, drillElements);\n\n    DrillFileParser.logDrillDebugInfo(state, drillElements);\n\n    return layer;\n  }\n\n  private static createDrillElements(state: DrillParserState): PCBElement[] {\n    const drillElements: PCBElement[] = [];\n\n    state.drillHits.forEach((hit) => {\n      const tool = state.currentTools[hit.tool];\n      if (!tool) {\n        console.warn(`Tool ${hit.tool} not found for drill hit at ${hit.x}, ${hit.y}`);\n        return;\n      }\n\n      // Create a circle shape for each drill hit\n      const elementToShape: GerberElementToCreateShape = {\n        aperture: {\n          type: 'C' as any,\n          parameters: [tool.diameter] as any,\n          code: `T${hit.tool}` as any,\n          apertureFunction: tool.apertureFunction,\n        } as any,\n        coords: [{\n          x: hit.x,\n          y: hit.y,\n          dCode: 'D03' as any,\n        }] as any,\n      };\n\n      const shape = GerberShapeFactory.createShape(elementToShape);\n\n      if (shape) {\n        const pcbElement = GerberElementFactory.createElement({\n          elementFunction: tool.apertureFunction || ('ComponentPad' as GerberApertureFunction),\n          attributes: {\n            ...state.attributes,\n            // Add drill-specific metadata as comments or in layerInfo\n          },\n          shape,\n        });\n\n        if (pcbElement) {\n          drillElements.push(pcbElement);\n        }\n      }\n    });\n\n    return drillElements;\n  }\n\n  private static addElementsToLayer(layer: GerberLayer, elements: PCBElement[]): void {\n    elements.forEach((pcbElement) => {\n      if (pcbElement instanceof GerberComponent) {\n        layer.addComponent(pcbElement);\n      } else if (pcbElement instanceof GerberNet) {\n        layer.addNet(pcbElement);\n      } else {\n        layer.addNonFunctional(pcbElement as GerberNonFunctional);\n      }\n    });\n  }\n\n  private static logDrillDebugInfo(state: DrillParserState, drillElements: PCBElement[]): void {\n    if (state.notParsed.length) {\n      console.warn('Some Drill lines were not parsed:', state.notParsed);\n    }\n\n    console.log('Drill Layer Info:', state.layerInfo);\n    console.log('Drill Tools:', state.currentTools);\n    console.log('Drill Hits Count:', state.drillHits.length);\n    console.log('Drill Elements Created:', drillElements.length);\n\n    // Group drill hits by tool for statistics\n    const hitsByTool = state.drillHits.reduce((acc, hit) => {\n      acc[hit.tool] = (acc[hit.tool] || 0) + 1;\n      return acc;\n    }, {} as Record<number, number>);\n\n    console.log('Hits per tool:', hitsByTool);\n  }\n}\n","interface GerberJobHeader {\n  GenerationSoftware: {\n    Vendor: string;\n    Application: string;\n    Version: string;\n  };\n  CreationDate: Date;\n}\n\ninterface GerberJobGeneralSpecs {\n  ProjectId: {\n    Name: string;\n    GUID: string;\n    Revision: string;\n  };\n  Size: {\n    X: number;\n    Y: number;\n  };\n  LayerNumber: number;\n  BoardThickness: number;\n  Finish: string;\n}\n\ninterface GerberJobDesignRule {\n  Layers: string;\n  PadToPad: number;\n  PadToTrack: number;\n  TrackToTrack: number;\n  MinLineWidth: number;\n  TrackToRegion: number;\n  RegionToRegion: number;\n}\n\ninterface GerberJobFileAttribute {\n  Path: string;\n  FileFunction: string;\n  FilePolarity: string;\n}\n\ninterface GerberJobMaterialStackupLayer {\n  Type: string;\n  Color?: string;\n  Thickness?: number;\n  Material?: string;\n  Name: string;\n  Notes?: string;\n}\n\nexport interface GerberJobFile {\n  Header?: GerberJobHeader;\n  GeneralSpecs?: GerberJobGeneralSpecs;\n  DesignRules?: GerberJobDesignRule[];\n  FilesAttributes?: GerberJobFileAttribute[];\n  MaterialStackup?: GerberJobMaterialStackupLayer[];\n}\n\nexport class GerberJobFileParser {\n  public static parseGerberJobFile(data: string): GerberJobFile | null {\n    try {\n      const jobData: GerberJobFile = JSON.parse(data);\n\n      if (jobData.Header?.CreationDate) {\n        jobData.Header.CreationDate = new Date(jobData.Header.CreationDate);\n      }\n\n      return jobData;\n    } catch (error) {\n      console.error('Error parsing Gerber Job file:', error);\n      return null;\n    }\n  }\n}\n","import { PCBColor } from '@/types/PCBTypes';\nimport { GerberArchive, GerberFileType } from '@/types/GerberTypes';\nimport { GerberLayer, GerberPlate } from '@/models/Gerber';\nimport { GerberGeneral } from '@/models/Gerber/GerberGeneral';\nimport { PCBElementInfo } from '@/models/abstract/PCBElement';\nimport { PCBFileTypeDetector } from '@/services/PCBFileTypeDetector';\n\nimport { PCBAdapter } from '../../abstract/PCBAdapter';\nimport { GerberFileParser } from './GerberFileParser';\nimport { DrillFileParser } from './DrillFileParser';\nimport { GerberJobFile, GerberJobFileParser } from './GerberJobFileParser';\n\nexport class GerberAdapter extends PCBAdapter {\n  private readonly gerberData: GerberArchive;\n  private readonly result: GerberPlate;\n\n  constructor(fileName: string, gerberData: GerberArchive) {\n    super();\n    this.gerberData = gerberData;\n    this.result = new GerberPlate(fileName);\n  }\n\n  public override adapt(): GerberPlate {\n    this.processAllFiles();\n    this.setLayersOrder();\n    this.setLayersColor();\n    return this.result;\n  }\n\n  private processAllFiles(): void {\n    const jobFileData: GerberJobFile = {};\n\n    Object.entries(this.gerberData).forEach(([layerName, layerData]) => {\n      const fileType = PCBFileTypeDetector.getFileExtension(layerName);\n\n      if (fileType === GerberFileType.GERBER_JOB) {\n        Object.assign(jobFileData, GerberJobFileParser.parseGerberJobFile(layerData));\n        return;\n      }\n\n      this.parseLayer(layerName, layerData);\n    });\n\n    this.parseGerberGeneral(jobFileData);\n    this.updateLayers(jobFileData);\n  }\n\n  private parseLayer(layerName: string, layerData: string): void {\n    const fileType = PCBFileTypeDetector.getFileExtension(layerName);\n    if (!fileType) return;\n\n    const FILE_TYPE_TO_PARSER: { [key: string]: (n: string, d: string) => GerberLayer } = {\n      [GerberFileType.GERBER]: GerberFileParser.parseGerberLayer,\n      [GerberFileType.EXCELLON_DRILL]: DrillFileParser.parseDrillLayer,\n    };\n\n    if (!FILE_TYPE_TO_PARSER[fileType]) {\n      console.warn(`Unknown file type: ${fileType}`);\n      return;\n    }\n\n    const layer = FILE_TYPE_TO_PARSER[fileType](layerName, layerData);\n    this.result.addLayer(layer);\n  }\n\n  private parseGerberGeneral(jobData: GerberJobFile): void {\n    const { Header, GeneralSpecs, DesignRules } = jobData;\n\n    const generalInfo: PCBElementInfo = {\n      ...Header,\n      ...GeneralSpecs,\n      ...Object.fromEntries(DesignRules?.map((rule) => [rule.Layers, rule]) || []),\n    };\n\n    const gerberGeneral = new GerberGeneral(generalInfo, []);\n    this.result.setGeneral(gerberGeneral);\n  }\n\n  private updateLayers(jobData: GerberJobFile): void {\n    const { FilesAttributes, MaterialStackup } = jobData;\n\n    FilesAttributes?.forEach((attr) => {\n      const layer = this.result.getLayer(attr.Path);\n      if (!layer) return;\n      const { FilePolarity, FileFunction } = attr;\n      layer.setInfo({ FileFunction, FilePolarity });\n    });\n\n    MaterialStackup?.forEach((stackup, index) => {\n      const foundLayer = this.result.findLayer((layer) => {\n        const functionParts = (layer.getInfo().FileFunction as string).split(',');\n        const layerPosition = functionParts.pop();\n        const layerType = functionParts.shift();\n        // const [layerDetails] = functionParts;\n\n        if (!layerType || !layerPosition) return false;\n\n        const isSameType = stackup.Type.toLocaleLowerCase().includes(layerType.toLocaleLowerCase());\n        if (!isSameType) return false;\n\n        const isSamePosition = stackup.Name.toLocaleLowerCase().includes(layerPosition?.toLocaleLowerCase());\n        if (!isSamePosition) return false;\n\n        return true;\n      });\n\n      if (!foundLayer) {\n        console.warn(`Layer is not found while updating stackup: ${stackup.Name}`);\n        return;\n      }\n\n      const { Color, ...other } = stackup;\n      foundLayer.setInfo(other);\n      foundLayer.setOrder(index + 1);\n    });\n  }\n\n  private setLayersOrder(): void {\n    let i = 0;\n    this.result.forEachLayer((layer) => {\n      const curOrder = layer.getOrder();\n      if (!curOrder) return;\n      layer.setOrder(i);\n      i += 1;\n    });\n  }\n\n  private setLayersColor(): void {\n    this.result.forEachLayer((layer) => {\n      // Random color was used temporarily, because it's unclear how to get real color from Gerber files\n      const newRandomColor: PCBColor = {\n        r: Math.floor(Math.random() * 256),\n        g: Math.floor(Math.random() * 256),\n        b: Math.floor(Math.random() * 256),\n      };\n      layer.setColor(newRandomColor);\n    });\n  }\n}\n","import { PCBAdapter } from '../abstract';\nimport { PCBFileType, PCBFileTypeDetector } from '../PCBFileTypeDetector';\nimport { IPC2581Adapter } from './IPC2581Adapter';\nimport { GerberAdapter } from './GerberAdapter';\n\nexport class AdapterFactory {\n  public static createAdapter(fileName: string, data: any): PCBAdapter | null {\n    const type = PCBFileTypeDetector.detectFileType(fileName);\n    const TYPE_TO_ADAPTER_MAP: { [key in PCBFileType]?: new (...args: any[]) => PCBAdapter } = {\n      [PCBFileType.GERBER_ARCHIVE]: GerberAdapter,\n      [PCBFileType.GERBER_FILE]: GerberAdapter,\n      [PCBFileType.IPC2581]: IPC2581Adapter,\n    };\n\n    const AdapterClass = TYPE_TO_ADAPTER_MAP[type];\n    return AdapterClass ? new AdapterClass(fileName, data) : null;\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"pcb-view\" }\n\nimport {\n  ref, onMounted, shallowRef, markRaw, computed, nextTick,\n} from 'vue';\n\nimport { PCBDrawer } from '@/services/PCBDrawer';\nimport {\n  PCBLayer, PCBPlate, PCBElement, PCBElementInfo,\n} from '@/models/abstract';\nimport { PCBColor, PCBControlsEvents, PCBElementsType } from '@/types/PCBTypes';\nimport { degToRad } from 'three/src/math/MathUtils';\nimport { PCBCanvas } from '@/components/canvas';\nimport { PCBAside } from '@/components/aside';\nimport { CircularRoller } from '@/components/loaders';\nimport { PCBFileReader } from '@/services/PCBFileReader';\nimport { ContentParserFactory } from '@/services/parsers';\nimport { AdapterFactory } from '@/services/adapters/AdapterFactory';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PCBView',\n  setup(__props) {\n\nconst pcbCanvasComponent = ref();\nlet pcbDrawer: PCBDrawer | null = null;\n\nconst pcbPlatesList = shallowRef<PCBPlate[]>([]);\nconst selectedPlate = shallowRef<PCBPlate | null>(null);\nconst plateLayers = shallowRef<readonly PCBLayer[]>([]);\nconst selectedElement = shallowRef<PCBElement | null>(null);\nconst isLoading = ref<boolean>(false);\n\nconst elementInfo = computed<PCBElementInfo | null>(() => {\n  if (selectedElement.value) {\n    return selectedElement.value.getInfo();\n  }\n  if (selectedPlate.value) {\n    return selectedPlate.value.getGeneral()?.getInfo() || null;\n  }\n  return null;\n});\n\nonMounted(() => {\n  const canvasElement = pcbCanvasComponent.value?.pcbCanvas;\n  if (!canvasElement) return;\n\n  pcbDrawer = new PCBDrawer(canvasElement);\n  pcbDrawer.draw();\n  pcbDrawer.addEventListener('elementClick', (event: Event) => {\n    const customEvent = event as CustomEvent<PCBElement>;\n    const element = customEvent.detail;\n\n    if (element) {\n      selectedElement.value = markRaw(element);\n    } else {\n      selectedElement.value = null;\n    }\n  });\n});\n\nconst refreshLayers = (): void => {\n  const layers = selectedPlate.value?.getLayers() || [];\n  plateLayers.value = layers.length > 0 ? markRaw(layers) : [];\n};\n\nconst handlePlateSelect = async (plate: PCBPlate | null): Promise<void> => {\n  if (selectedPlate.value === plate) return;\n  selectedPlate.value = plate;\n  selectedElement.value = null;\n  refreshLayers();\n\n  if (!plate) return;\n\n  isLoading.value = true;\n  await nextTick();\n  pcbDrawer?.clear();\n  pcbDrawer?.setPCB(plate);\n  pcbDrawer?.drawPCB();\n  isLoading.value = false;\n  await nextTick();\n};\n\nconst handleFileChange = async (file: File): Promise<void> => {\n  isLoading.value = true;\n  await nextTick();\n  const content = await PCBFileReader.readFile(file);\n  const parser = ContentParserFactory.createParser(file);\n  if (!parser) {\n    isLoading.value = false;\n    return;\n  }\n\n  const data = await parser.parse(file.name, content);\n  const adapter = AdapterFactory.createAdapter(file.name, data);\n  if (!adapter) {\n    isLoading.value = false;\n    return;\n  }\n\n  const pcbPlate = markRaw(adapter.adapt());\n\n  selectedPlate.value = pcbPlate;\n  pcbPlatesList.value = [...pcbPlatesList.value, pcbPlate];\n  refreshLayers();\n\n  console.time('drawPCB');\n  pcbDrawer?.setPCB(pcbPlate);\n  pcbDrawer?.drawPCB();\n  console.timeEnd('drawPCB');\n  isLoading.value = false;\n\n  // For debugging purposes\n  (window as any).PCBPLATES = pcbPlate;\n  (window as any).PCBDRAWER = pcbDrawer;\n};\n\nconst handleElementSelect = (element: PCBElement | null): void => {\n  selectedElement.value = element ? markRaw(element) : null;\n\n  if (element instanceof PCBLayer) {\n    pcbDrawer?.selectLayer(element);\n  } else {\n    pcbDrawer?.selectElement(element);\n  }\n};\n\nconst toggleElementVisibility = (element: PCBElement, visibility: boolean): void => {\n  element.setVisibility(visibility);\n  if (element instanceof PCBLayer) {\n    element.getElements().forEach((el) => el.setVisibility(visibility));\n    pcbDrawer?.toggleLayerVisibility(element, visibility);\n  } else {\n    pcbDrawer?.toggleElementVisibility(element, visibility);\n  }\n  refreshLayers();\n};\n\nconst handleToggleVisibility = (element: PCBElement): void => {\n  toggleElementVisibility(element, !element.getVisibility());\n};\n\nconst handleChangeColor = ({ layer, color }: { layer: PCBLayer; color: PCBColor }): void => {\n  layer.setColor(color);\n  pcbDrawer?.changeLayerColor(layer);\n  refreshLayers();\n};\n\nconst resetVisibilityByType = (type: PCBElementsType): void => {\n  if (!selectedPlate.value) return;\n\n  const elementsToReset: PCBElement[] = [];\n\n  selectedPlate.value.forEachLayer((layer) => {\n    if (type === PCBElementsType.Layer) {\n      layer.setVisibility(true);\n      layer.getElements().forEach((el) => el.setVisibility(true));\n    } else if (layer.getVisibility()) {\n      const elements = type === PCBElementsType.Component ? layer.getComponents() : layer.getNets();\n      elements.forEach((element) => {\n        if (!element.getVisibility()) {\n          element.setVisibility(true);\n          elementsToReset.push(element);\n        }\n      });\n    }\n  });\n\n  if (type === PCBElementsType.Layer) {\n    pcbDrawer?.resetLayersVisibility();\n  } else {\n    pcbDrawer?.resetElementsVisibility(elementsToReset);\n  }\n  refreshLayers();\n};\n\nconst handleResetVisibility = (type: PCBElementsType): void => {\n  resetVisibilityByType(type);\n};\n\nconst handleControlsClick = (event: PCBControlsEvents): void => {\n  const ZOOM_VALUE = 30;\n  const ROTATE_ANGLE = degToRad(30);\n\n  const actions = {\n    [PCBControlsEvents.ZoomIn]: () => pcbDrawer?.zoomCamera(ZOOM_VALUE),\n    [PCBControlsEvents.ZoomOut]: () => pcbDrawer?.zoomCamera(-ZOOM_VALUE),\n    [PCBControlsEvents.RotateLeft]: () => pcbDrawer?.rotateCameraZ(ROTATE_ANGLE),\n    [PCBControlsEvents.RotateRight]: () => pcbDrawer?.rotateCameraZ(-ROTATE_ANGLE),\n    [PCBControlsEvents.ResetView]: () => pcbDrawer?.resetCamera(),\n  };\n\n  actions[event]?.();\n};\n\nconst handleDeletePlate = (plate: PCBPlate): void => {\n  pcbPlatesList.value = pcbPlatesList.value.filter((p) => p !== plate);\n  if (selectedPlate.value === plate) {\n    selectedPlate.value = null;\n    plateLayers.value = [];\n    selectedElement.value = null;\n    pcbDrawer?.clear();\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_overlay = _resolveComponent(\"v-overlay\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_unref(PCBAside), {\n      pcbPlatesList: pcbPlatesList.value,\n      selectedPlate: selectedPlate.value,\n      plateLayers: plateLayers.value,\n      selectedElement: selectedElement.value,\n      onFileChange: handleFileChange,\n      onSelectPlate: handlePlateSelect,\n      onSelectElement: handleElementSelect,\n      onToggleVisibility: handleToggleVisibility,\n      onResetVisibility: handleResetVisibility,\n      onChangeColor: handleChangeColor,\n      onDeletePlate: handleDeletePlate\n    }, null, 8, [\"pcbPlatesList\", \"selectedPlate\", \"plateLayers\", \"selectedElement\"]),\n    _createVNode(_unref(PCBCanvas), {\n      ref_key: \"pcbCanvasComponent\",\n      ref: pcbCanvasComponent,\n      elementInfo: elementInfo.value,\n      onClick: handleControlsClick\n    }, null, 8, [\"elementInfo\"]),\n    _createVNode(_component_v_overlay, {\n      \"model-value\": isLoading.value,\n      class: \"align-center justify-center\"\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(CircularRoller))\n      ]),\n      _: 1\n    }, 8, [\"model-value\"])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"pcb-view\">\n    <!-- @vue-ignore -->\n    <PCBAside\n      :pcbPlatesList=\"pcbPlatesList\"\n      :selectedPlate=\"selectedPlate\"\n      :plateLayers=\"plateLayers\"\n      :selectedElement=\"selectedElement\"\n      @fileChange=\"handleFileChange\"\n      @selectPlate=\"handlePlateSelect\"\n      @selectElement=\"handleElementSelect\"\n      @toggleVisibility=\"handleToggleVisibility\"\n      @resetVisibility=\"handleResetVisibility\"\n      @changeColor=\"handleChangeColor\"\n      @deletePlate=\"handleDeletePlate\"\n    />\n    <!-- @vue-ignore -->\n    <PCBCanvas\n      ref=\"pcbCanvasComponent\"\n      :elementInfo=\"elementInfo\"\n      @click=\"handleControlsClick\"\n    />\n\n    <v-overlay\n      :model-value=\"isLoading\"\n      class=\"align-center justify-center\"\n    >\n      <CircularRoller />\n    </v-overlay>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  ref, onMounted, shallowRef, markRaw, computed, nextTick,\n} from 'vue';\n\nimport { PCBDrawer } from '@/services/PCBDrawer';\nimport {\n  PCBLayer, PCBPlate, PCBElement, PCBElementInfo,\n} from '@/models/abstract';\nimport { PCBColor, PCBControlsEvents, PCBElementsType } from '@/types/PCBTypes';\nimport { degToRad } from 'three/src/math/MathUtils';\nimport { PCBCanvas } from '@/components/canvas';\nimport { PCBAside } from '@/components/aside';\nimport { CircularRoller } from '@/components/loaders';\nimport { PCBFileReader } from '@/services/PCBFileReader';\nimport { ContentParserFactory } from '@/services/parsers';\nimport { AdapterFactory } from '@/services/adapters/AdapterFactory';\n\nconst pcbCanvasComponent = ref();\nlet pcbDrawer: PCBDrawer | null = null;\n\nconst pcbPlatesList = shallowRef<PCBPlate[]>([]);\nconst selectedPlate = shallowRef<PCBPlate | null>(null);\nconst plateLayers = shallowRef<readonly PCBLayer[]>([]);\nconst selectedElement = shallowRef<PCBElement | null>(null);\nconst isLoading = ref<boolean>(false);\n\nconst elementInfo = computed<PCBElementInfo | null>(() => {\n  if (selectedElement.value) {\n    return selectedElement.value.getInfo();\n  }\n  if (selectedPlate.value) {\n    return selectedPlate.value.getGeneral()?.getInfo() || null;\n  }\n  return null;\n});\n\nonMounted(() => {\n  const canvasElement = pcbCanvasComponent.value?.pcbCanvas;\n  if (!canvasElement) return;\n\n  pcbDrawer = new PCBDrawer(canvasElement);\n  pcbDrawer.draw();\n  pcbDrawer.addEventListener('elementClick', (event: Event) => {\n    const customEvent = event as CustomEvent<PCBElement>;\n    const element = customEvent.detail;\n\n    if (element) {\n      selectedElement.value = markRaw(element);\n    } else {\n      selectedElement.value = null;\n    }\n  });\n});\n\nconst refreshLayers = (): void => {\n  const layers = selectedPlate.value?.getLayers() || [];\n  plateLayers.value = layers.length > 0 ? markRaw(layers) : [];\n};\n\nconst handlePlateSelect = async (plate: PCBPlate | null): Promise<void> => {\n  if (selectedPlate.value === plate) return;\n  selectedPlate.value = plate;\n  selectedElement.value = null;\n  refreshLayers();\n\n  if (!plate) return;\n\n  isLoading.value = true;\n  await nextTick();\n  pcbDrawer?.clear();\n  pcbDrawer?.setPCB(plate);\n  pcbDrawer?.drawPCB();\n  isLoading.value = false;\n  await nextTick();\n};\n\nconst handleFileChange = async (file: File): Promise<void> => {\n  isLoading.value = true;\n  await nextTick();\n  const content = await PCBFileReader.readFile(file);\n  const parser = ContentParserFactory.createParser(file);\n  if (!parser) {\n    isLoading.value = false;\n    return;\n  }\n\n  const data = await parser.parse(file.name, content);\n  const adapter = AdapterFactory.createAdapter(file.name, data);\n  if (!adapter) {\n    isLoading.value = false;\n    return;\n  }\n\n  const pcbPlate = markRaw(adapter.adapt());\n\n  selectedPlate.value = pcbPlate;\n  pcbPlatesList.value = [...pcbPlatesList.value, pcbPlate];\n  refreshLayers();\n\n  console.time('drawPCB');\n  pcbDrawer?.setPCB(pcbPlate);\n  pcbDrawer?.drawPCB();\n  console.timeEnd('drawPCB');\n  isLoading.value = false;\n\n  // For debugging purposes\n  (window as any).PCBPLATES = pcbPlate;\n  (window as any).PCBDRAWER = pcbDrawer;\n};\n\nconst handleElementSelect = (element: PCBElement | null): void => {\n  selectedElement.value = element ? markRaw(element) : null;\n\n  if (element instanceof PCBLayer) {\n    pcbDrawer?.selectLayer(element);\n  } else {\n    pcbDrawer?.selectElement(element);\n  }\n};\n\nconst toggleElementVisibility = (element: PCBElement, visibility: boolean): void => {\n  element.setVisibility(visibility);\n  if (element instanceof PCBLayer) {\n    element.getElements().forEach((el) => el.setVisibility(visibility));\n    pcbDrawer?.toggleLayerVisibility(element, visibility);\n  } else {\n    pcbDrawer?.toggleElementVisibility(element, visibility);\n  }\n  refreshLayers();\n};\n\nconst handleToggleVisibility = (element: PCBElement): void => {\n  toggleElementVisibility(element, !element.getVisibility());\n};\n\nconst handleChangeColor = ({ layer, color }: { layer: PCBLayer; color: PCBColor }): void => {\n  layer.setColor(color);\n  pcbDrawer?.changeLayerColor(layer);\n  refreshLayers();\n};\n\nconst resetVisibilityByType = (type: PCBElementsType): void => {\n  if (!selectedPlate.value) return;\n\n  const elementsToReset: PCBElement[] = [];\n\n  selectedPlate.value.forEachLayer((layer) => {\n    if (type === PCBElementsType.Layer) {\n      layer.setVisibility(true);\n      layer.getElements().forEach((el) => el.setVisibility(true));\n    } else if (layer.getVisibility()) {\n      const elements = type === PCBElementsType.Component ? layer.getComponents() : layer.getNets();\n      elements.forEach((element) => {\n        if (!element.getVisibility()) {\n          element.setVisibility(true);\n          elementsToReset.push(element);\n        }\n      });\n    }\n  });\n\n  if (type === PCBElementsType.Layer) {\n    pcbDrawer?.resetLayersVisibility();\n  } else {\n    pcbDrawer?.resetElementsVisibility(elementsToReset);\n  }\n  refreshLayers();\n};\n\nconst handleResetVisibility = (type: PCBElementsType): void => {\n  resetVisibilityByType(type);\n};\n\nconst handleControlsClick = (event: PCBControlsEvents): void => {\n  const ZOOM_VALUE = 30;\n  const ROTATE_ANGLE = degToRad(30);\n\n  const actions = {\n    [PCBControlsEvents.ZoomIn]: () => pcbDrawer?.zoomCamera(ZOOM_VALUE),\n    [PCBControlsEvents.ZoomOut]: () => pcbDrawer?.zoomCamera(-ZOOM_VALUE),\n    [PCBControlsEvents.RotateLeft]: () => pcbDrawer?.rotateCameraZ(ROTATE_ANGLE),\n    [PCBControlsEvents.RotateRight]: () => pcbDrawer?.rotateCameraZ(-ROTATE_ANGLE),\n    [PCBControlsEvents.ResetView]: () => pcbDrawer?.resetCamera(),\n  };\n\n  actions[event]?.();\n};\n\nconst handleDeletePlate = (plate: PCBPlate): void => {\n  pcbPlatesList.value = pcbPlatesList.value.filter((p) => p !== plate);\n  if (selectedPlate.value === plate) {\n    selectedPlate.value = null;\n    plateLayers.value = [];\n    selectedElement.value = null;\n    pcbDrawer?.clear();\n  }\n};\n</script>\n\n<style lang=\"scss\">\nhtml {\n  overflow: hidden !important;\n}\n\n.pcb-view {\n  height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n}\n</style>\n","import script from \"./PCBView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PCBView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PCBView.vue?vue&type=style&index=0&id=386512f0&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createRouter, createWebHashHistory, RouteRecordRaw } from 'vue-router';\nimport PCBView from '../views/PCBView.vue';\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/',\n    name: 'pcb-view',\n    component: PCBView,\n  },\n  {\n    path: '/about',\n    name: 'about',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/AboutView.vue'),\n  },\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n});\n\nexport default router;\n","import { createStore } from 'vuex';\n\nexport default createStore({\n  state: {\n  },\n  getters: {\n  },\n  mutations: {\n  },\n  actions: {\n  },\n  modules: {\n  },\n});\n","<!-- eslint-disable max-len -->\n<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 496 496\"\n    fill=\"currentColor\"\n    xml:space=\"preserve\"\n  >\n    <path d=\"M448 192v-48h32v-16h-16V56c0-30.872-25.128-56-56-56s-56 25.128-56 56v72h-16v16h32v48H160v-48h16V0H32v144h16v48H0v304h496V192h-48zM368 56c0-22.056 17.944-40 40-40s40 17.944 40 40v72h-16V56h-48v16h32v56h-16V88h-16v40h-16V56zm64 88v48h-48v-48h48zM48 16h112v112H48V16zm96 128v48H64v-48h80zm336 336H16V208h32v80h16v-80h80v80h16v-80h208v112h16V208h48v112h16V208h32v272z\"/>\n    <path d=\"M176 240h16v16h-16zM304 240h16v16h-16zM304 288h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v144h16v-16h16v16h16v-16h16v16h16v-16h16v16h16v-16h16v16h16V272h-16v16zm0 96H192v-80h112v80zM144 304h16v16h-16zM112 240h16v16h-16zM112 272h16v16h-16zM112 304h16v16h-16zM80 240h16v16H80zM80 272h16v16H80zM80 304h16v16H80zM48 304h16v16H48zM336 240h16v16h-16zM400 240h16v16h-16zM336 272h16v16h-16zM208 240h16v16h-16zM240 240h16v16h-16zM272 240h16v16h-16zM400 272h16v16h-16zM336 304h16v16h-16zM400 304h16v16h-16zM48 336h16v16H48zM80 336h16v16H80zM112 336h16v16h-16zM144 336h16v16h-16zM336 336h16v16h-16zM368 336h16v16h-16zM400 336h16v16h-16zM432 336h16v16h-16zM48 368h16v16H48zM80 368h16v16H80zM112 368h16v16h-16zM144 368h16v16h-16zM336 368h16v16h-16zM368 368h16v16h-16zM400 368h16v16h-16zM432 368h16v16h-16zM48 400h16v16H48zM80 400h16v16H80zM112 400h16v16h-16zM144 400h16v16h-16zM336 400h16v16h-16zM368 400h16v16h-16zM400 400h16v16h-16zM432 400h16v16h-16zM48 432h16v16H48zM80 432h16v16H80zM112 432h16v16h-16zM144 432h16v16h-16zM176 432h16v16h-16zM208 432h16v16h-16zM240 432h16v16h-16zM272 432h16v16h-16zM304 432h16v16h-16zM336 432h16v16h-16zM368 432h16v16h-16zM400 432h16v16h-16zM432 432h16v16h-16zM104 32c-22.056 0-40 17.944-40 40s17.944 40 40 40 40-17.944 40-40-17.944-40-40-40zm0 64c-10.416 0-19.216-6.712-22.528-16h45.048c-3.304 9.288-12.104 16-22.52 16zM81.48 64c3.304-9.288 12.104-16 22.52-16s19.216 6.712 22.528 16H81.48z\"/>\n    <path d=\"M208 320h16v16h-16zM240 320h48v16h-48zM208 352h80v16h-80z\" />\n  </svg>\n</template>\n","import { render } from \"./PCBComponent.vue?vue&type=template&id=02b23262\"\nconst script = {}\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- eslint-disable max-len -->\n<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 496 496\"\n    fill=\"currentColor\"\n    xml:space=\"preserve\"\n  >\n    <path d=\"M92.688 0 48 44.688V80H0v112h48v128H0v64h48v112h448V0H92.688zM16 176V96h96v80H16zm0 192v-32h96v32H16zm464 112H64v-96h64v-24h16v-16h-16v-24H64V192h64v-16h16v-16h-16v-48h16V96h-16V80H64V51.312L99.312 16H480v464z\"/>\n    <path d=\"M304 448h112v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16V96h-16V80h16V64h-16V48H304v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16zm16-384h80v368h-80V64z\"/>\n    <circle\n      cx=\"360\"\n      cy=\"88\"\n      r=\"8\"\n    />\n    <path d=\"M256 64h-64v48h64V64zm-16 32h-32V80h32v16zM256 144h-64v48h64v-48zm-16 32h-32v-16h32v16zM144 216v16h-16v-16h-16v16H96v48h16v16h16v-16h16v16h16v-16h16v16h16v-16h16v-48h-16v-16h-16v16h-16v-16h-16zm48 32v16h-80v-16h80zM112 400c-17.648 0-32 14.352-32 32s14.352 32 32 32 32-14.352 32-32-14.352-32-32-32zm0 48c-8.824 0-16-7.176-16-16s7.176-16 16-16c8.816 0 16 7.176 16 16s-7.184 16-16 16zM192 400c-17.648 0-32 14.352-32 32s14.352 32 32 32 32-14.352 32-32-14.352-32-32-32zm0 48c-8.824 0-16-7.176-16-16s7.176-16 16-16c8.816 0 16 7.176 16 16s-7.184 16-16 16zM176 336h16v32h-16zM208 336h16v32h-16zM240 336h16v32h-16z\"/>\n    <circle\n      cx=\"96\"\n      cy=\"48\"\n      r=\"8\"\n    />\n  </svg>\n</template>\n","import { render } from \"./PCBLayer.vue?vue&type=template&id=10917992\"\nconst script = {}\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- eslint-disable max-len -->\n<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 496 496\"\n    fill=\"currentColor\"\n    xml:space=\"preserve\"\n  >\n    <path d=\"M432 48V32h-96.728C310.752 11.392 279.928 0 248 0c-31.928 0-62.752 11.392-87.272 32H64v16H0v448h16V64h48v16h60.24C116.248 97.6 112 116.704 112 136c0 5.112.48 10.472 1.192 16H64v16H32v328h16V184h16v16h64.224c8.04 14.968 18.824 28.576 31.776 39.6v8.4h-16v16h16v16h-16v16h16v16h-16v16h16v32h32v136h16V360h80v136h16V360h32v-32h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-8.4c12.952-11.024 23.736-24.632 31.776-39.6H432v-16h16v64h16v-80h-32v-16h-49.192c.712-5.528 1.192-10.888 1.192-16 0-19.296-4.248-38.4-12.24-56H432V64h48v432h16V48h-64zm-96 0h16v16h-16V48zm-192 0h16v16h-16V48zM80 64V48h48v16H80zm48 120H80v-16h48v16zm192 160H176v-16h144v16zm0-64h-16v16h16v16H176v-16h112v-16H176v-16h144v16zm32-96h-16v-16h16v16zm14.656-32H320v16h-48v16h48v16h29.44c-7.112 11.216-16.104 21.296-26.448 29.592L320 232v16h-64v-81.136c13.76-3.576 24-15.992 24-30.864 0-17.648-14.352-32-32-32s-32 14.352-32 32c0 14.872 10.232 27.288 24 30.864V248h-64v-16l-2.992-2.408c-10.344-8.304-19.336-18.384-26.448-29.592H176v-16h48v-16h-48v-16h-46.656c-.8-5.592-1.344-10.96-1.344-16 0-19.456 4.888-38.704 14.048-56H176V64h48V48h-48v-7.768C196.76 24.584 221.968 16 248 16c26.024 0 51.24 8.584 72 24.232V48h-48v16h48v16h33.952C363.112 97.296 368 116.544 368 136c0 5.04-.544 10.408-1.344 16zM248 152c-8.824 0-16-7.176-16-16s7.176-16 16-16c8.816 0 16 7.176 16 16s-7.184 16-16 16zm-104 32v-16h16v16h-16zm272-16v16h-48v-16h48zm0-104h-48V48h48v16z\"/>\n    <path d=\"M448 264h16v232h-16z\" />\n  </svg>\n</template>\n","import { render } from \"./PCBNet.vue?vue&type=template&id=399d9036\"\nconst script = {}\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- eslint-disable max-len -->\n<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 496 496\"\n    fill=\"currentColor\"\n    xml:space=\"preserve\"\n  >\n    <path d=\"M40 449.472V364.28L58.424 352H88v-16H53.576L24 355.72v93.752C14.704 452.784 8 461.584 8 472c0 13.232 10.768 24 24 24s24-10.768 24-24c0-10.416-6.712-19.216-16-22.528zM32 480c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8zM46.528 320H88v-16H46.528c-3.312-9.288-12.112-16-22.528-16-13.232 0-24 10.768-24 24s10.768 24 24 24c10.416 0 19.216-6.712 22.528-16zM16 312c0-4.416 3.584-8 8-8s8 3.584 8 8-3.584 8-8 8-8-3.584-8-8zM24 272c10.416 0 19.216-6.712 22.528-16H88v-16H46.528c-3.312-9.296-12.112-16-22.528-16-13.232 0-24 10.768-24 24s10.768 24 24 24zm0-32c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8zM56 272h32v16H56zM56 208h32v16H56zM0 176h88v16H0zM60.688 160H88v-16H67.312L48 124.688v-14.16C57.288 107.216 64 98.416 64 88c0-13.232-10.768-24-24-24S16 74.768 16 88c0 10.416 6.704 19.216 16 22.528v20.784L60.688 160zM40 80c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8zM144 67.312V88h16V60.688L131.312 32H0v16h124.688z\"/>\n    <path d=\"M176 35.312V88h16V28.688L163.312 0H0v16h156.688zM208 56h16v32h-16zM304 0h16v88h-16zM240 46.528V88h16V59.312l16 16V88h16V68.688L262.392 43.08C268.192 38.696 272 31.816 272 24c0-13.232-10.768-24-24-24s-24 10.768-24 24c0 10.416 6.704 19.216 16 22.528zM248 16c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8zM352 51.312 371.312 32h78.16A23.976 23.976 0 0 0 464 46.528v110.16L444.688 176H408v16h43.312L480 163.312V46.528c9.288-3.312 16-12.112 16-22.528 0-13.232-10.768-24-24-24-10.416 0-19.216 6.712-22.528 16h-84.784L336 44.688V88h16V51.312zM472 16c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8z\"/>\n    <path d=\"m414.08 97.392 17.92 17.92v9.376L412.688 144H408v16h11.312L448 131.312v-22.624L419.312 80h-4.784c-3.312-9.288-12.112-16-22.528-16-13.232 0-24 10.768-24 24s10.768 24 24 24c9.904 0 18.416-6.032 22.08-14.608zM392 96c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8zM408 208h88v16h-88zM480 449.472V268.688L451.312 240H408v16h36.688L464 275.312v41.376L451.312 304H408v16h36.688L464 339.312v110.16c-9.296 3.312-16 12.112-16 22.528 0 13.232 10.768 24 24 24s24-10.768 24-24c0-10.416-6.712-19.216-16-22.528zM472 480c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8z\"/>\n    <path d=\"M408 272h32v16h-32zM448 364.688 419.312 336H408v16h4.688L432 371.312V416h-80v-8h-16v24h96v12.688L412.688 464h-14.16c-3.312-9.288-12.112-16-22.528-16-13.232 0-24 10.768-24 24s10.768 24 24 24c10.416 0 19.216-6.712 22.528-16h20.784L448 451.312v-86.624zM376 480c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8zM160 408h-16v8h-41.472c-3.312-9.288-12.112-16-22.528-16-13.232 0-24 10.768-24 24s10.768 24 24 24c10.416 0 19.216-6.712 22.528-16H160v-24zm-80 24c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8zM304 408h16v88h-16zM272 408h16v88h-16zM240 420.688l-16 16V408h-16v41.472c-9.296 3.312-16 12.112-16 22.528 0 13.232 10.768 24 24 24s24-10.768 24-24c0-7.816-3.808-14.696-9.608-19.08L256 427.312V408h-16v12.688zM216 480c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8zM192 408h-16v20.688l-24 24V496h16v-36.688l24-24z\"/>\n    <path d=\"M336 392h16v-16h24v-24h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-24h-24v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-3.312L120 140.688V144h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v24h24v16h16v-16h16v16h16v-16h16v16h16v-16h16v16h16v-16h16v16h16v-16h16v16h16v-16h16v16zm-200-32V147.312L147.312 136H360v224H136z\"/>\n    <path d=\"m318.888 211.048 13.96-13.96-33.936-33.936-13.96 13.96A78.861 78.861 0 0 0 272 171.728V152h-48v19.728a78.287 78.287 0 0 0-12.952 5.384l-13.96-13.96-33.936 33.936 13.96 13.96A79.564 79.564 0 0 0 171.728 224H152v48h19.728c1.408 4.472 3.2 8.8 5.384 12.952l-13.96 13.96 33.936 33.936 13.96-13.96A79.27 79.27 0 0 0 224 324.272V344h48v-19.728c4.472-1.408 8.8-3.2 12.952-5.384l13.96 13.96 33.936-33.936-13.96-13.96A78.979 78.979 0 0 0 324.272 272H344v-48h-19.728a78.287 78.287 0 0 0-5.384-12.952zM328 256h-16.224l-1.416 6.224a63.715 63.715 0 0 1-8.216 19.792l-3.408 5.408 11.496 11.496-11.312 11.312-11.496-11.496-5.408 3.408a63.715 63.715 0 0 1-19.792 8.216L256 311.776V328h-16v-16.224l-6.224-1.416a63.715 63.715 0 0 1-19.792-8.216l-5.408-3.408-11.496 11.496-11.312-11.312 11.496-11.496-3.408-5.408a63.715 63.715 0 0 1-8.216-19.792L184.224 256H168v-16h16.224l1.416-6.224a63.715 63.715 0 0 1 8.216-19.792l3.408-5.408-11.496-11.496 11.312-11.312 11.496 11.488 5.408-3.408a63.715 63.715 0 0 1 19.792-8.216l6.224-1.408V168h16v16.224l6.224 1.416a63.715 63.715 0 0 1 19.792 8.216l5.408 3.408 11.496-11.488 11.312 11.312-11.496 11.496 3.408 5.408a63.715 63.715 0 0 1 8.216 19.792l1.416 6.216H328v16z\"/>\n    <path d=\"M248 208c-22.056 0-40 17.944-40 40s17.944 40 40 40 40-17.944 40-40-17.944-40-40-40zm0 64c-13.232 0-24-10.768-24-24s10.768-24 24-24 24 10.768 24 24-10.768 24-24 24z\"/>\n  </svg>\n</template>;\n","import { render } from \"./PCBPlate.vue?vue&type=template&id=6db1457e\"\nconst script = {}\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/* eslint-disable */\n// Styles\nimport '@mdi/font/css/materialdesignicons.css';\nimport 'vuetify/styles';\n\n// Vuetify\nimport { createVuetify } from 'vuetify';\nimport { aliases, mdi } from 'vuetify/iconsets/mdi';\nimport { h } from 'vue';\n\n// Custom icons\nimport * as CustomIcons from '@/assets/icons';\n\nexport default createVuetify({\n  theme: {\n    themes: {\n      light: {\n        colors: {\n          // Custom color aliases\n          'container-border-color': '#EEEEEE',\n          'container-background-color': '#FFFFFF',\n          'container-hover-background-color': '#FAFAFA',\n        },\n      },\n    },\n  },\n  icons: {\n    defaultSet: 'mdi',\n    aliases: {\n      ...aliases,\n      pcbComponent: CustomIcons.PCBComponentIcon,\n      pcbLayer: CustomIcons.PCBLayerIcon,\n      pcbNet: CustomIcons.PCBNetIcon,\n      pcbPlate: CustomIcons.PCBPlateIcon,\n    },\n    sets: {\n      mdi,\n      custom: {\n        component: (props: any) => {\n          const { icon, ...rest } = props;\n          return h(icon, rest);\n        },\n      },\n    },\n  },\n  // https://vuetifyjs.com/en/introduction/why-vuetify/#feature-guides\n});\n","/**\n * plugins/webfontloader.js\n *\n * webfontloader documentation: https://github.com/typekit/webfontloader\n */\n\nexport async function loadFonts() {\n  const webFontLoader = await import(/* webpackChunkName: \"webfontloader\" */'webfontloader');\n\n  webFontLoader.load({\n    google: {\n      families: ['Roboto:100,300,400,500,700,900&display=swap'],\n    },\n  });\n}\n","import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport vuetify from './plugins/vuetify';\nimport { loadFonts } from './plugins/webfontloader';\n\nloadFonts();\n\ncreateApp(App)\n  .use(router)\n  .use(store)\n  .use(vuetify)\n  .mount('#app');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + {\"53\":\"webfontloader\",\"594\":\"about\"}[chunkId] + \".\" + {\"53\":\"536d2edf\",\"594\":\"80f2c471\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"pcb_analyzer:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkpcb_analyzer\"] = self[\"webpackChunkpcb_analyzer\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(2307); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_router_view","_resolveComponent","_openBlock","_createBlock","_component_v_app","default","_withCtx","_createVNode","_component_v_main","_","defineComponent","name","data","__exports__","FormatUtils","formatFileSize","sizeInBytes","toFixed","GeometryUtils","applyOffsetToPoint","point","offset","isOffsetZero","x","y","applyOffsetToPoints","points","map","convertDegreesToRad","angle","Math","PI","getDiagonalLines","circlePoints","separatedLines","i","mid","round","length","push","parallelLines","line","getParallelLine","flat","getDistance","p1","p2","sideX","abs","sideY","distance","sqrt","from","to","dx","dy","scale","ox","oy","fromParallel","toParallel","getPointAngle","center","atan2","getBoundingBox","xMin","xMax","yMin","yMax","firstPoint","min","max","getOptimalPointForArc","radius","roundedPoints","getMiddlePoint","inverseLerp","a","mirrorPoints","isMirrored","rotatePoint","angleRad","cos","sin","rotatePoints","angleDeg","ParsingUtils","parseBoolean","v","toLowerCase","parseXMLID","id","split","pop","parseNonstandardAttribute","attributes","Object","fromEntries","filter","attr","Boolean","value","PCBDrawerUtils","adaptPointsToSegments","segments","createThreeColor","color","Color","setRGB","r","g","b","convertPointsToVertices","convertPointsLenToFacesLen","len","ceil","POSITION_VERTEX_LEN","POSITION_FACE_LEN","getPointAlfaChannelIndex","pointIndex","COLOR_VERTEX_LEN","createLineSegments","DEFAULT_COLOR","geometry","BufferGeometry","vertices","alfa","DEFAULT_ALPHA","colors","setAttribute","Float32BufferAttribute","material","LineBasicMaterial","vertexColors","transparent","LineSegments","createLineSegments2","thickness","offsetWidth","LineSegmentsGeometry","setPositions","LineMaterial","getHex","linewidth","resolution","set","LineSegments2","DEFAULT_SCALE","changeLineSegmentsColor","array","needsUpdate","_defineProperty","ScrollUtils","virtualScrollRef","targetIndex","options","itemHeight","containerHeight","$el","clientHeight","scrollTop","itemSize","itemTop","itemBottom","viewportTop","viewportBottom","isVisible","itemsPerView","floor","centerOffset","scrollToIndex","PCBElement","constructor","this","idSource","uuidv4","visible","setVisibility","getVisibility","PCBComponent","info","shapes","super","getInfo","C","getPoints","flatMap","shape","getThickness","PCBGeneral","PCBLayer","layerName","order","nets","components","nonFunctionals","setColor","getColor","getOrder","setOrder","setInfo","addNet","net","getNets","addComponent","component","getComponents","addNonFunctional","nonFunctional","getNonFunctional","getElements","isEmpty","every","arr","element","PCBNet","PCBNonFunctional","PCBPlate","Map","plateName","addLayer","layer","layers","has","getLayer","get","setGeneral","general","getGeneral","getLayers","Array","values","allPoints","forEach","layerPoints","removeLayer","delete","forEachLayer","callback","findLayer","find","PCBShape","coords","styles","DEFAULT_SHAPE_STYLES","lineWidth","rotation","mirror","xOffset","yOffset","subsetOfTHREE","Box3","Matrix4","Quaternion","Raycaster","Sphere","Spherical","Vector2","Vector3","Vector4","CameraControls","install","THREE","PCBDrawer","EventTarget","container","WeakMap","initializeComponents","clock","Clock","parameters","createDefaultParameters","scene","Scene","camera","createCamera","renderer","createRenderer","raycaster","controls","createControls","initResizeObserver","setupEventHandlers","destroy","resizeObserver","disconnect","removeAllEventListeners","dispose","draw","delta","getDelta","update","setPCB","pcbPlate","console","time","platePoints","timeEnd","log","boardSizes","curScaleAndCenterPoints","createPointTransform","generalElementData","parseGeneral","layersElementsData","parsePCBLayers","drawPCB","clearScene","drawLayers","drawGeneral","enableLayer","LAST_LAYER_INDEX","clear","layersMeshesData","meshElementsMap","meshRangeData","selectedElementMeshes","changeLayerColor","meshes","mesh","selectLayer","highlightLayerOpacity","resetLayersOpacity","selectElement","removeSelectedElement","drawSelectedElement","focusOnMesh","toggleLayerVisibility","action","layerIndex","index","toggleElementVisibility","rangeData","toggleMeshesVisibility","resetLayersVisibility","enableAll","resetElementsVisibility","elements","elemMeshes","zoomCamera","dolly","rotateCameraZ","rotateZ","resetCamera","reset","z","containerWidth","offsetHeight","aspect","near","far","background","cameraZPos","PerspectiveCamera","position","lookAt","WebGLRenderer","antialias","setSize","setClearColor","appendChild","domElement","smoothTime","draggingSmoothTime","dollyToCursor","minDistance","maxDistance","mouseButtons","left","ACTION","NONE","right","TRUCK","touches","one","bindedDraw","bind","addEventListener","recalculateLinesThickness","handleClick","entries","layerKey","drawLayer","drawPoints","isArray","setElementsMeshesData","renderOrder","add","rangeAcc","range","adaptElementsPoints","scaleThickness","p","parsePCBLayerElements","DEFAULT_THICKNESS","layersData","create","layersToDraw","l","sort","l1","l2","layerElements","thicknessScale","SELECTED_LINE_WIDTH","createSelectedMesh","adaptedPoints","SELECTED_COLOR","remove","event","mouseEvent","rect","getBoundingClientRect","clientX","clientY","top","updateRaycasterThreshold","setFromCamera","intersects","intersectObjects","children","getFirstIntersectedElement","dispatchEvent","CustomEvent","detail","MIN_DISTANCE","MAX_DISTANCE","MIN_THRESHOLD","threshold","params","Line","Points","Mesh","intersect","object","alfaIndex","allElements","faceIndex","enable","boardWidth","screenWidth","thicknessInPx","sizes","COEFF_PADDING","paddings","xScale","yScale","width","height","curScale","maxSize","scaledWidth","scaledHeight","resize","updateProjectionMatrix","THROTTLE_DELAY","throttledResize","throttle","ResizeObserver","entry","contentRect","observe","setLayersOpacity","DEFAULT_OPACITY","UNSELECTED_OPACITY","getOpacity","opacity","PADDING","fitToBox","paddingTop","paddingLeft","paddingBottom","paddingRight","toggleMeshVisibility","start","end","Number","meshData","PCBControlsEvents","PCBElementsType","PCBPLateType","_defineComponent","__name","emits","setup","__props","emit","__emit","icon","ZoomIn","ariaLabel","title","variant","ZoomOut","RotateLeft","RotateRight","ResetView","_component_v_card","class","_createElementBlock","_Fragment","_renderList","control","_component_v_btn","size","key","onClick","$event","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","props","infoData","_createElementVNode","_toDisplayString","subValue","subKey","elementInfo","expose","__expose","pcbCanvas","ref","_setBlockTracking","ref_key","cacheIndex","_unref","PCBControls","$emit","keys","PCBInfo","_createCommentVNode","PCBFileType","PCBFileTypeDetector","detectFileType","file","fileName","fileType","TYPE_PATTERNS","pattern","extensions","some","ext","endsWith","UNKNOWN","getAllFileExtensions","getFileExtension","IPC2581","GERBER_ARCHIVE","GERBER_FILE","_hoisted_5","_hoisted_6","isProcessing","fileExtensions","join","processFile","async","reader","FileReader","onload","onerror","readAsArrayBuffer","selectedFile","onDelete","onSubmit","onChange","input","target","files","_component_v_form","_withModifiers","tag","loading","_createTextVNode","type","hidden","accept","rounded","disabled","isDisabled","isSelected","_withDirectives","_normalizeClass","tabindex","onKeydown","_withKeys","_component_v_icon","density","_directive_ripple","selectedComponent","search","computed","allComponents","comps","filteredComponents","searchValue","trim","toLocaleLowerCase","item","includes","handleComponentSelect","handleToggleVisibility","handleResetVisibility","scrollToSelectedComponent","selectedIndex","findIndex","scrollToHiddenItem","watch","flush","_component_v_text_field","modelValue","label","clearable","_component_v_virtual_scroll","items","PCBComponentItem","onToggleVisibility","style","backgroundColor","colorPickerOpen","selectedColor","isOpen","handleColorCancel","handleColorSubmit","_normalizeStyle","_component_v_menu","activator","menuProps","_mergeProps","_component_v_color_picker","mode","elevation","_component_v_card_actions","_component_v_spacer","text","selectedLayer","filteredLayers","handleLayerSelect","handleChangeColor","PCBLayerItem","onChangeColor","plate","selected","role","plates","selectedPlate","PCBPlateItem","onDeletePlate","selectedNet","netsList","filteredNets","handleNetSelect","scrollToSelectedNet","PCBNetItem","message","Tabs","pcbPlatesList","plateLayers","selectedElement","selectedTab","PLATES","tabsConfig","LAYERS","NETS","COMPONENTS","_component_v_tabs","direction","tab","_component_v_tab","_component_v_tabs_window","_component_v_tabs_window_item","PCBUploadForm","PCBPlatesList","onSelectPlate","PCBAsideEmptyState","PCBLayersList","onSelectLayer","onResetVisibility","Layer","PCBNetsList","onSelectNet","Net","PCBComponentsList","onSelectComponent","Component","script","PCBFileReader","readFile","Promise","resolve","reject","e","content","result","readAsText","Error","ShapeEnum","ContentParser","GerberArchiveParser","zip","JSZip","parse","arrayBuffer","loadAsync","all","relativePath","TextDecoder","decode","IPC2581XmlParser","xmlParser","XMLParser","ignoreAttributes","attributeNamePrefix","parseAttributeValue","tagName","TAG_TO_ARRAY","updateTag","attrName","POLY_STEP_NAMES","polyStepCounter","xmlString","GerberFileParser","ContentParserFactory","createParser","FILE_TYPE_TO_PARSER","ContentParserClass","IPC2581Component","pins","refDes","pinsPoints","pin","otherPoints","location","rotatedPoints","mirroredPoints","pinsThickness","otherThickness","undefined","IPC2581General","IPC2581Layer","IPC2581Net","IPC2581NonFunctional","IPC2581Pin","number","IPC2581Plate","COLOR_PREFIX_REGEX","IPC2581ContentParser","xmlObjContent","getFromContent","contentKey","innerKey","idToFind","normalizeId","contentSection","getColorByID","normalizeColorId","str","replace","getStandardByID","getUserSpecialByID","getLineDescByID","LayerRef","layerId","IPC2581EcadParser","xmlEcad","getCadDataStep","CadData","Step","StepList","getCadDataLayers","LayerDesc","getUnits","CadHeader","units","getLayerSpec","specId","spec","Spec","s","parseSpecFields","fields","field","Property","getLayerInfoFromCadDataStackup","stackupLayers","Stackup","StackupGroup","StackupLayer","stackup","layerData","layerOrGroupRef","SpecRef","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","divisions","d","getPoint","t","twoPi","deltaAngle","samePoints","EPSILON","tx","ty","Arc","args","startAngle","endAngle","curve","clockwise","QuadraticBezierCurve","v0","v1","v2","QuadraticBezier","QuadraticBezierP0","k","QuadraticBezierP1","QuadraticBezierP2","p0","Path","currentPoint","moveTo","lineTo","absarc","aRadius","curvePoints","lastPoint","quadraticCurveTo","aCPx","aCPy","RectChamPath","chamfer","chamCorners","halfWidth","halfHeight","cx","cy","pLeftTop","pRightTop","pRightBot","pLeftBot","path","leftTop","rightTop","rightBot","leftBot","RectRoundPath","roundCorners","Circle","diameter","Polyline","begin","linePath","segment","centerX","centerY","pointWithOffset","Contour","polylines","cutouts","cutout","Diamond","p3","p4","Donut","amountOfPoints","innerDiameter","outerDiameter","outerRadius","innerRadius","outerRingCurve","outerRing","innerRingCurve","innerRing","Ellipse","radiusX","radiusY","Hexagon","POINTS_NUMBER","middlePoint","Octagon","Oval","rectRound","RectCenter","x1","y1","x2","y2","RectCham","upperLeft","upperRight","lowerLeft","lowerRight","rectChamfer","RectCorner","lowerLeftX","lowerLeftY","upperRightX","upperRightY","RectRound","Thermal","spokeStartAngle","gap","spokeCount","diagonalLinesRotation","diagonalCircleCurve","diagonalCircle","diagonalLinesOffset","diagonalLines","Triangle","base","IPC2581XmlShapeNumberOfPointsType","IPC2581XmlUNITS","IPC2581ShapeFactory","createArcs","arcXml","getLineStyles","arc","startX","startY","endX","endY","createCircles","circleXml","circle","Location","parseXform","Xform","createContours","contours","contour","parsePolylineCoords","Polygon","Cutout","polyline","createDiamonds","diamondXml","diamond","createDonuts","donutsXml","donut","getNumberOfPointsByType","createEllipses","ellipseXml","ellipse","createHexagons","hexagonsXml","hexagon","createHoles","holesXml","Hole","hole","createLines","linesXml","createOctagons","octagonsXml","octagon","createOutlines","outlinesXml","Outline","outline","createOvals","ovalsXml","oval","createPolylines","createRectCenters","rectCenters","rectCenter","createRectChams","rectChams","rectCham","createRectCorners","rectCorners","rectCorner","createRectRounds","rectRounds","createThermals","thermalsXml","thermal","createTriangles","trianglesXml","triangle","SHAPE_TYPES","ROUND","SQUARE","HEXAGON","OCTAGON","polylineCoords","LineDescRef","LineDesc","FillDescRef","PolyBegin","rest","IPC2581ShapeParser","contentParser","styleID","stylesRef","getShapes","shapeData","shapeTypes","getShape","arcs","circles","diamonds","donuts","ellipses","hexagons","holes","lines","octagons","outlines","ovals","rectsCenter","rectsCorner","thermals","triangles","getShapesByRef","StandardPrimitiveRef","UserPrimitiveRef","UserSpecial","getFeaturesShapes","feature","netFeature","assign","getSetShapes","layerSet","Features","Pad","pad","SlotCavity","IPC2581ComponentParser","shapeParser","getPins","ipc2581Pins","pinShapes","pinInfo","electricalType","getMarkings","markingData","Marking","getSilkScreen","silkScreenData","Target","parseComponents","step","componentsByLayer","layerRef","shapeRef","Package","pack","packageRef","Pin","sMarkings","SilkScreen","aMarkings","AssemblyDrawing","markings","markingsShapes","outlineShapes","othersShapes","componentId","componentInfo","part","mountType","NonstandardAttribute","componentPosition","pcbComponent","IPC2581_FORMAT","MISSING_IPC_FORMAT_ERROR","MISSING_SECTIONS_ERROR","IPC2581Adapter","xmlData","Content","ecad","Ecad","ecadParser","componentParser","adapt","setGeneralData","setLayers","setColors","setLayersInfo","setLayerFeatures","setComponents","setLayersOrder","profile","Profile","contourData","generalInfo","contentLayers","ecadLayers","allLayers","infoFromStackup","layerInfo","layerFeature","LayerFeature","Set","netInfo","ipc2581Net","nonFunctionalInfo","ipc2581NonFunctional","sequence","GerberFileType","GerberUnits","GerberCoordinateDCode","GerberGCodeInterpolationMode","GerberGCode","GerberDCode","GerberMCode","GerberApertureType","GerberApertureFunction","GerberAttributeType","GerberObjectAttribute","GerberMacroPrimitiveType","GerberMacroExposure","GerberLineType","GerberComponent","GerberGeneral","GerberLayer","GerberNet","N","GerberNonFunctional","GerberPlate","GERBER","PCBAdapter","GerberLineClassifier","classifyLine","trimmed","startsWith","parseDrillComment","match","parseDrillToolDefinition","parseDrillToolSelection","parseDrillFormat","parseDrillMetric","parseDrillHeaderEnd","parseDrillSequence","parseFormatSpec","parseUnits","parseLayerPolarity","parseFileAttribute","parseObjectAttribute","parseAttributeDelete","parseApertureAttribute","parseApertureDefinition","parseAttribute","parseComment","parseApertureMacro","parseApertureMacroComment","parseApertureMacroPrimitive","parseGCode","parseMCode","parseApertureSelection","parseOperation","parseCoordinates","raw","EMPTY","macroMatch","macroName","isComplexMacroWithComments","parseComplexMacro","isRoundedRectMacro","parseRoundedRectMacro","isFreePolyMacro","parseFreePolyMacro","APERTURE_MACRO","test","nameMatch","primitives","primitiveStrings","replaceAll","primStr","parseFloat","exposure","DARK","CLEAR","slice","macro","MACRO","macroContent","indexOf","lastIndexOf","primitiveStr","primitiveTypeNum","parseInt","primitiveType","numVertices","coordinates","xCoord","yCoord","lastParam","rotationValue","comments","substring","isNaN","parseVariableOrNumber","rotationParam","processedParams","param","parseVariableExpression","comment","expr","parts","reduce","sum","product","FORMAT_SPEC","format","leading","absolute","xFormat","yFormat","MILLIMETERS","INCHES","UNITS","standardMatch","paramStr","APERTURE_DEF","aperture","code","dCode","toString","ATTRIBUTE_TYPE_MAP","FILE_FUNCTION","FILE_ATTRIBUTE","OBJECT","OBJECT_ATTRIBUTE","APERTURE","APERTURE_ATTRIBUTE","DELETE","ATTRIBUTE_DELETE","attribute","COMMENT","G_CODE","gCode","M_CODE","mCode","D_APERTURE_SELECT","extractCoordinates","dMatch","gMatch","D_OPERATION","COORDINATES","xMatch","yMatch","iMatch","jMatch","parseCoord","coord","num","j","DRILL_COMMENT_SEMICOLON","DRILL_TOOL_DEF","toolNumber","DRILL_TOOL_SELECT","DRILL_FORMAT","drillFormat","DRILL_METRIC","zeroSuppression","DRILL_HEADER_END","DRILL_SEQUENCE","sequenceNumber","polarity","LAYER_POLARITY","commentText","APERTURE_MACRO_COMMENT","primitiveData","APERTURE_MACRO_PRIMITIVE","GerberShapeFactory","createShape","elementData","isMacroAperture","createMacroShape","isFlashOperation","createSimpleShape","isDrawOperation","createPolyline","isMacroType","hasPrimitives","isSingleCoordinate","isFlashCode","FLASH","hasParameters","hasMultipleCoordinates","macroData","processedAperture","substituteMacroParameters","processedData","createRoundedRectangleMacro","createFreePolyMacro","processedPrimitives","primitive","processedParameters","evaluateExpression","varIndex","processedExpr","variableMatches","variable","centerPoint","vectorLines","VECTOR_LINE","CIRCLE","cornerRadius","rectWidth","rectHeight","rotationAngle","outlinePrimitive","OUTLINE","firstVertex","lastVertex","startPoint","pathPoints","shapeCreator","SIMPLE_SHAPE_CREATORS","coordinate","prevCoord","absoluteCenterX","absoluteCenterY","isClockwiseArc","CLOCKWISE_ARC","restPoints","createOval","ovalWidth","ovalHeight","createCircle","circleDiameter","createRectangle","createPolygon","sideLength","_GerberShapeFactory","RECTANGLE","OBROUND","POLYGON","GerberElementFactory","createElement","lineInfo","elementFunction","function","parseGerberLayer","gbrLines","parseGBRLines","state","initializeParserState","processGerberLines","buildLayer","gcodeOptions","currentApertures","currentMacros","currentObjectAttributes","currentApertureFunction","currentApertureDCode","currentElement","notParsed","SKIPPABLE_LINE_TYPES","handleElementBreaking","processLineByType","warn","isBreakingType","ELEMENT_BREAKING_TYPES","handleFileAttribute","handleFormatSpec","handleUnits","handleLayerPolarity","handleGCode","handleApertureAttribute","handleApertureDef","handleDApertureSelect","handleAttributeDeleteLine","handleObjectAttributeLine","handleDOperation","handleApertureMacro","processGCode","processApertureDefinition","processMacroDefinition","apertureFunction","macroWithParams","processObjectAttribute","interpolationMode","LINEAR","shouldBreakCurrentElement","apertureDCode","MOVE","processedElements","createPCBElements","addElementsToLayer","logDebugInfo","allPCBElements","pcbElement","createPCBElement","elementToShape","gcode","GCODE_OPTIONS_MAP","record","handleAttributeDeleteType","handleAttributeSetType","newRecord","isLastLineClosed","isLineComplete","wasLastLineClosed","LINEAR_INTERPOLATION","COUNTERCLOCKWISE_ARC","MULTI_QUADRANT_MODE","circularMode","multiQuadrant","DrillFileParser","parseDrillLayer","initializeDrillParserState","processDrillLines","buildDrillLayer","currentTools","currentTool","drillHits","DRILL_SKIPPABLE_LINE_TYPES","processDrillLineByType","handleDrillFormat","handleDrillMetric","handleDrillToolDef","handleDrillToolSelect","handleDrillCoordinates","handleDrillGCode","handleDrillMCode","handleDrillComment","handleDrillSequence","trailing","nextApertureFunction","scaleFactor","tool","attrMatch","attrType","attrValue","drillElements","createDrillElements","logDrillDebugInfo","hit","hitsByTool","acc","GerberJobFileParser","parseGerberJobFile","jobData","JSON","Header","CreationDate","Date","error","GerberAdapter","gerberData","processAllFiles","setLayersColor","jobFileData","GERBER_JOB","parseLayer","parseGerberGeneral","updateLayers","EXCELLON_DRILL","GeneralSpecs","DesignRules","rule","Layers","gerberGeneral","FilesAttributes","MaterialStackup","FilePolarity","FileFunction","foundLayer","functionParts","layerPosition","layerType","shift","isSameType","Type","isSamePosition","Name","other","curOrder","newRandomColor","random","AdapterFactory","createAdapter","TYPE_TO_ADAPTER_MAP","AdapterClass","pcbCanvasComponent","pcbDrawer","shallowRef","isLoading","onMounted","canvasElement","customEvent","markRaw","refreshLayers","handlePlateSelect","nextTick","handleFileChange","parser","adapter","window","PCBPLATES","PCBDRAWER","handleElementSelect","visibility","el","resetVisibilityByType","elementsToReset","handleControlsClick","ZOOM_VALUE","ROTATE_ANGLE","degToRad","actions","handleDeletePlate","PCBAside","onFileChange","onSelectElement","PCBCanvas","_component_v_overlay","CircularRoller","routes","PCBView","router","createRouter","history","createWebHashHistory","createStore","getters","mutations","modules","xmlns","viewBox","fill","createVuetify","theme","themes","light","icons","defaultSet","aliases","CustomIcons","pcbLayer","pcbNet","sets","mdi","custom","h","loadFonts","webFontLoader","load","google","families","createApp","App","use","store","vuetify","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","splice","n","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","then","ns","def","current","getOwnPropertyNames","definition","o","defineProperty","enumerable","f","chunkId","promises","u","miniCssF","globalThis","Function","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","url","done","needAttach","scripts","document","getElementsByTagName","getAttribute","charset","timeout","nc","src","onScriptComplete","prev","clearTimeout","doneFns","parentNode","removeChild","setTimeout","head","Symbol","toStringTag","nmd","paths","installedChunks","installedChunkData","promise","loadingEnded","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}