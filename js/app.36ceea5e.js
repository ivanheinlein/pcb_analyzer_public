(function(){"use strict";var e={2307:function(e,t,s){var r=s(5130),n=s(6768),i=s(9547),a=s(1541);function o(e,t,s,r,o,l){const c=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.Wv)(i.E,null,{default:(0,n.k6)(()=>[(0,n.bF)(a.Y,null,{default:(0,n.k6)(()=>[(0,n.bF)(c)]),_:1})]),_:1})}var l=(0,n.pM)({name:"App",data(){return{}}}),c=s(1241);const h=(0,c.A)(l,[["render",o]]);var u=h,p=s(1387),d=(s(4114),s(8111),s(2489),s(7588),s(144)),m=s(1114),y=(s(1701),s(8371)),v=s(8776),f=s(2536),E=s(8626),g=s(697);class C{static formatFileSize(e){return e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(2)} KB`:e<1073741824?`${(e/1048576).toFixed(2)} MB`:`${(e/1073741824).toFixed(2)} GB`}}class L{static applyOffsetToPoint(e,t){if(!t)return e;const s=0===t.x&&0===t.y;return s?e:{x:e.x+t.x,y:e.y+t.y}}static applyOffsetToPoints(e,t){if(!t)return e;const s=0===t.x&&0===t.y;return s?e:e.map(({x:e,y:s})=>({x:e+t.x,y:s+t.y}))}static convertDegreesToRad(e){return e*Math.PI/180}static getDiagonalLines(e,t){const s=[];for(let n=0,i=Math.round(e.length/2);n<i;n+=1)s.push([e[n],e[n+i-1]]);const r=s.map(e=>[L.getParallelLine(e,t),L.getParallelLine(e,-t)]).flat();return r}static getDistance(e,t){const s=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y),n=Math.sqrt(s**2+r**2);return n}static getParallelLine(e,t){if(0===t)return e;const[s,r]=e,[n,i]=[s.x-r.x,s.y-r.y],a=t/(n*n+i*i)**.5,[o,l]=[-i*a,n*a],c={x:o+s.x,y:l+s.y},h={x:o+r.x,y:l+r.y};return[c,h]}static getPointAngle(e,t){const s=t.x-e.x,r=t.y-e.y,n=Math.atan2(r,s);return n}static getBoundingBox(e){if(0===e.length)return{xMin:0,xMax:0,yMin:0,yMax:0};const t=e[0];let s=t.x,r=t.x,n=t.y,i=t.y;for(let a=1;a<e.length;a+=1){const{x:t,y:o}=e[a];s=Math.min(s,t),r=Math.max(r,t),n=Math.min(n,o),i=Math.max(i,o)}return{xMin:s,xMax:r,yMin:n,yMax:i}}static getOptimalPointForArc(e){if(e<=0)return 0;const t=4+6*Math.sqrt(e),s=2*Math.round(t/2);return Math.min(12,Math.max(4,s))}static getMiddlePoint(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}static inverseLerp(e,t,s){return(s-e)/(t-e)}static mirrorPoints(e,t,s){return s?e.map(({x:e,y:s})=>({x:2*t.x-e,y:s})):e}static rotatePoint(e,t,s){return{x:Math.cos(s)*(e.x-t.x)-Math.sin(s)*(e.y-t.y)+t.x,y:Math.sin(s)*(e.x-t.x)+Math.cos(s)*(e.y-t.y)+t.y}}static rotatePoints(e,t,s){if(!s||0===s)return e;const r=L.convertDegreesToRad(s);return e.map(e=>L.rotatePoint(e,t,r))}}class b{static parseBoolean(e){return"boolean"===typeof e?e:"string"===typeof e&&"true"===e.toLowerCase()}static parseXMLID(e){return e&&e.split(":").pop()||""}static parseNonstandardAttribute(e){return e?Object.fromEntries(e.filter(e=>Boolean(e.value)).map(e=>[e.name,e.value])):{}}}var A=s(3752),T=s(3667);class P{static adaptPointsToSegments(e){if(e.length<=1)return[...e];const t=[e[0]];for(let s=1;s<e.length-1;s+=1)t.push(e[s],e[s]);return e.length>1&&t.push(e[e.length-1]),t}static createThreeColor(e){return(new y.Q1f).setRGB(e.r/255,e.g/255,e.b/255)}static convertPointsToVertices(e){return e.map(({x:e,y:t})=>[e,t,0]).flat()}static convertPointsLenToFacesLen(e){return Math.ceil(e*P.POSITION_VERTEX_LEN/P.POSITION_FACE_LEN)}static getPointAlfaChannelIndex(e){return(e+1)*P.COLOR_VERTEX_LEN-1}static createLineSegments(e,t=P.DEFAULT_COLOR){const s=new y.LoY,r=P.convertPointsToVertices(e),n=P.DEFAULT_ALPHA,i=e.map(()=>[t.r,t.g,t.b,n]).flat();s.setAttribute("position",new y.qtW(r,P.POSITION_VERTEX_LEN)),s.setAttribute("color",new y.qtW(i,P.COLOR_VERTEX_LEN));const a=new y.mrM({vertexColors:!0,transparent:!0}),o=new y.DXC(s,a);return o}static createLineSegments2(e,t,s,r=P.DEFAULT_COLOR){const n=new A.n;n.setPositions(P.convertPointsToVertices(e));const i=new T.G({color:r.getHex(),transparent:!0,linewidth:t});i.resolution.set(s,s);const a=new f.b(n,i);return a.scale.set(P.DEFAULT_SCALE,P.DEFAULT_SCALE,P.DEFAULT_SCALE),a}static changeLineSegmentsColor(e,t){const{geometry:s}=e,r=s.attributes.color.array,{r:n,g:i,b:a}=t;for(let o=0;o<r.length;o+=P.COLOR_VERTEX_LEN)r[o]=n,r[o+1]=i,r[o+2]=a;s.attributes.color.needsUpdate=!0}}(0,m.A)(P,"COLOR_VERTEX_LEN",4),(0,m.A)(P,"POSITION_VERTEX_LEN",3),(0,m.A)(P,"POSITION_FACE_LEN",6),(0,m.A)(P,"DEFAULT_ALPHA",1),(0,m.A)(P,"DEFAULT_COLOR",new y.Q1f("#000")),(0,m.A)(P,"DEFAULT_SCALE",1),(0,m.A)(P,"DEFAULT_THICKNESS",1),(0,m.A)(P,"DEFAULT_OPACITY",1),(0,m.A)(P,"SELECTED_COLOR",new y.Q1f("#1867c0")),(0,m.A)(P,"UNSELECTED_OPACITY",.2);class R{}(0,m.A)(R,"scrollToHiddenItem",(e,t,s={itemHeight:30})=>{if(!e||t<0)return;const r=e.$el.clientHeight,{scrollTop:n}=e.$el,i=e.itemSize||s.itemHeight,a=t*i,o=a+i,l=n,c=n+r,h=a>=l&&o<=c;if(h)return;const u=Math.floor(r/i),p=Math.floor(u/2),d=Math.max(0,t-p);e.scrollToIndex(d)});s(531);var O=s(7939);class M{constructor(){(0,m.A)(this,"idSource",void 0),(0,m.A)(this,"visible",void 0),this.idSource=(0,O.A)(),this.visible=!0}get id(){return this.idSource}setVisibility(e){this.visible=e}getVisibility(){return this.visible}}class D extends M{constructor(e,t){super(),(0,m.A)(this,"info",void 0),(0,m.A)(this,"shapes",void 0),(0,m.A)(this,"points",void 0),this.info=e,this.shapes=t,this.points=[]}get name(){return this.getInfo().C}getInfo(){return this.info}getPoints(){return this.points.length>0||(this.points=this.shapes.flatMap(e=>e.getPoints())||[]),this.points}getThickness(){return this.shapes.flatMap(e=>e.getThickness())}}class x extends M{constructor(e,t){super(),(0,m.A)(this,"info",void 0),(0,m.A)(this,"shapes",void 0),(0,m.A)(this,"points",void 0),this.info=e,this.shapes=t,this.points=[]}get name(){return"General"}getPoints(){if(this.points.length>0)return this.points;const e=this.shapes?.flatMap(e=>e.getPoints())||[];return this.points=e,e}getInfo(){return this.info}getThickness(){return this.shapes?.flatMap(e=>e.getThickness())||[]}}class _ extends M{constructor(e){super(),(0,m.A)(this,"layerName",void 0),(0,m.A)(this,"nets",void 0),(0,m.A)(this,"components",void 0),(0,m.A)(this,"nonFunctionals",void 0),(0,m.A)(this,"order",void 0),(0,m.A)(this,"color",void 0),(0,m.A)(this,"info",void 0),this.layerName=e,this.color={r:0,g:0,b:0},this.info={},this.order=0,this.nets=[],this.components=[],this.nonFunctionals=[]}get name(){return this.layerName}setColor(e){this.color={...e}}getColor(){return this.color}getOrder(){return this.order}setOrder(e){this.order=e}getInfo(){return this.info}setInfo(e){this.info={...this.info,...e}}addNet(e){this.nets.push(e)}getNets(){return this.nets}addComponent(e){this.components.push(e)}getComponents(){return this.components}addNonFunctional(e){this.nonFunctionals.push(e)}getNonFunctional(){return this.nonFunctionals}getElements(){return[...this.nets,...this.components,...this.nonFunctionals]}isEmpty(){return[this.nets,this.components,this.nonFunctionals].every(e=>0===e.length)}getPoints(){return this.getElements().map(e=>e.getPoints()).flat()}getThickness(){return this.getElements().map(e=>e.getThickness()).flat()}}class I extends M{constructor(e,t){super(),(0,m.A)(this,"info",void 0),(0,m.A)(this,"shape",void 0),(0,m.A)(this,"points",void 0),this.info=e,this.shape=t,this.points=[]}getPoints(){if(this.points.length>0)return this.points;const e=this.shape.getPoints()||[];return this.points=e,e}getInfo(){return this.info}getThickness(){return this.shape.getThickness()||[]}}class w extends M{constructor(e,t){super(),(0,m.A)(this,"info",void 0),(0,m.A)(this,"shape",void 0),(0,m.A)(this,"points",void 0),this.info=e,this.shape=t,this.points=[]}getPoints(){if(this.points.length>0)return this.points;const e=this.shape.getPoints()||[];return this.points=e,e}getInfo(){return this.info}getThickness(){return this.shape.getThickness()||[]}}s(116);class S{constructor(e){(0,m.A)(this,"plateName",void 0),(0,m.A)(this,"general",null),(0,m.A)(this,"layers",new Map),this.plateName=e}get name(){return this.plateName}addLayer(e){this.layers.has(e.name)||this.layers.set(e.name,e)}getLayer(e){return this.layers.get(e)}setGeneral(e){this.general=e}getGeneral(){return this.general}getLayers(){return Array.from(this.layers.values())}getNets(){return Array.from(this.layers.values()).map(e=>e.getNets()).flat()}getComponents(){return Array.from(this.layers.values()).map(e=>e.getComponents()).flat()}getPoints(){const e=[];return this.layers.forEach(t=>{const s=t.getPoints();e.push(...s)}),e.push(...this.general?.getPoints()||[]),e}removeLayer(e){return this.layers.delete(e)}forEachLayer(e){this.layers.forEach(e)}findLayer(e){return Array.from(this.layers.values()).find(e)}}class N{constructor(e,t){(0,m.A)(this,"coords",void 0),(0,m.A)(this,"styles",void 0),this.coords=e,this.styles={...N.DEFAULT_SHAPE_STYLES,...t}}}(0,m.A)(N,"DEFAULT_SHAPE_STYLES",{lineWidth:1,rotation:0,mirror:!1,xOffset:0,yOffset:0});const k={Box3:y.NRn,Matrix4:y.kn4,Quaternion:y.PTz,Raycaster:y.tBo,Sphere:y.iyt,Spherical:y.YHV,Vector2:y.I9Y,Vector3:y.Pq0,Vector4:y.IUQ};g.A.install({THREE:k});class F extends EventTarget{constructor(e){super(),(0,m.A)(this,"clock",void 0),(0,m.A)(this,"parameters",void 0),(0,m.A)(this,"scene",void 0),(0,m.A)(this,"camera",void 0),(0,m.A)(this,"renderer",void 0),(0,m.A)(this,"raycaster",void 0),(0,m.A)(this,"controls",void 0),(0,m.A)(this,"container",void 0),(0,m.A)(this,"resizeObserver",null),(0,m.A)(this,"boardSizes",{xMin:0,xMax:0,yMin:0,yMax:0}),(0,m.A)(this,"curScaleAndCenterPoints",null),(0,m.A)(this,"generalElementData",null),(0,m.A)(this,"layersElementsData",{}),(0,m.A)(this,"layersMeshesData",{}),(0,m.A)(this,"meshElementsMap",new WeakMap),(0,m.A)(this,"meshRangeData",{}),(0,m.A)(this,"selectedElementMeshes",[]),this.container=e,this.initializeComponents()}initializeComponents(){this.clock=new y.zD7,this.parameters=this.createDefaultParameters(),this.scene=new y.Z58,this.camera=this.createCamera(),this.renderer=this.createRenderer(),this.raycaster=new y.tBo,this.controls=this.createControls(),this.initResizeObserver(),this.setupEventHandlers()}destroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.controls.removeAllEventListeners(),this.controls.dispose()}draw(){const e=this.clock.getDelta();this.controls.update(e),this.renderer.render(this.scene,this.camera)}setPCB(e){console.time("allPoints");const t=e.getPoints().flat();console.timeEnd("allPoints"),console.log("allPCBPoints",t),this.boardSizes=L.getBoundingBox(t),this.curScaleAndCenterPoints=this.createPointTransform(this.boardSizes),this.generalElementData=this.parseGeneral(e.getGeneral()),this.layersElementsData=this.parsePCBLayers(e.getLayers())}drawPCB(){this.clearScene(),this.drawLayers(this.layersElementsData),this.drawGeneral(this.generalElementData),this.enableLayer(F.LAST_LAYER_INDEX),this.draw()}clear(){this.clearScene(),this.curScaleAndCenterPoints=null,this.generalElementData=null,this.layersElementsData={},this.layersMeshesData={},this.meshElementsMap=new WeakMap,this.meshRangeData={},this.selectedElementMeshes=[],this.draw()}changeLayerColor(e){const t=P.createThreeColor(e.getColor()),s=this.layersMeshesData[e.name];s.forEach(e=>{P.changeLineSegmentsColor(e,t)}),this.draw()}selectLayer(e){e&&!e.isEmpty()&&e.getVisibility()?this.highlightLayerOpacity(e):this.resetLayersOpacity(),this.draw()}selectElement(e){this.removeSelectedElement(),this.resetLayersOpacity(),e&&e.getVisibility()?(this.drawSelectedElement(e),this.focusOnMesh(this.selectedElementMeshes[0]),this.draw()):this.draw()}toggleLayerVisibility(e,t){const s=t?"enable":"disable",r=this.layersElementsData[e.name].index;this.raycaster.layers[s](r),this.camera.layers[s](r),this.draw()}toggleElementVisibility(e,t){const s=this.meshRangeData[e.id];s&&(this.toggleMeshesVisibility(s,t),this.draw())}resetLayersVisibility(){this.raycaster.layers.enableAll(),this.camera.layers.enableAll(),this.draw()}resetElementsVisibility(e){e.forEach(e=>{const t=this.meshRangeData[e.id];t&&this.toggleMeshesVisibility(t,!0)}),this.draw()}zoomCamera(e){this.controls.dolly(e),this.draw()}rotateCameraZ(e){this.scene.rotateZ(e),this.draw()}resetCamera(){this.controls.reset(),this.rotateCameraZ(-1*this.scene.rotation.z),this.draw()}createDefaultParameters(){const e=this.container.offsetWidth,t=this.container.offsetHeight;return{angle:45,aspect:e/t,near:1,far:1e3,background:16053492,cameraZPos:200}}createCamera(){const e=new y.ubm(this.parameters.angle,this.parameters.aspect,this.parameters.near,this.parameters.far);return e.position.set(0,0,this.parameters.cameraZPos),e.lookAt(0,0,0),e}createRenderer(){const e=new v.JeP({antialias:!0}),t=this.container.offsetWidth,s=this.container.offsetHeight;return e.setSize(t,s),e.setClearColor(this.parameters.background),this.container.appendChild(e.domElement),e}createControls(){const e=new g.A(this.camera,this.renderer.domElement);return e.smoothTime=0,e.draggingSmoothTime=0,e.dollyToCursor=!0,e.minDistance=this.parameters.near,e.maxDistance=this.parameters.far,e.mouseButtons.left=g.A.ACTION.NONE,e.mouseButtons.right=g.A.ACTION.TRUCK,e.touches.one=g.A.ACTION.NONE,e}setupEventHandlers(){const e=this.draw.bind(this);this.controls.addEventListener("control",e),this.controls.addEventListener("controlstart",e),this.controls.addEventListener("controlend",e),this.controls.addEventListener("update",this.recalculateLinesThickness.bind(this)),this.renderer.domElement.addEventListener("click",this.handleClick.bind(this))}drawLayers(e){Object.entries(e).forEach(([e,t])=>{this.drawLayer(e,t)})}drawLayer(e,t){const s=t.elements.map(({points:e})=>e).flat(),r=this.drawPoints(s,t.color,t.index);this.enableLayer(t.index),Array.isArray(this.layersMeshesData[e])||(this.layersMeshesData[e]=[]),this.layersMeshesData[e].push(r),this.meshElementsMap.set(r,t.elements.map(e=>e.points.map(()=>e.element)).flat()),this.setElementsMeshesData(t.elements,r)}drawGeneral(e){e&&this.drawPoints(e.points,e.color,e.index)}drawPoints(e,t,s){const r=P.createLineSegments(e,t);return r.layers.set(s),r.renderOrder=s,this.scene.add(r),r}setElementsMeshesData(e,t){let s=0;e.forEach(({element:e,points:r})=>{e instanceof I||e instanceof D?(this.meshRangeData[e.id]||(this.meshRangeData[e.id]=[]),this.meshRangeData[e.id].push({mesh:t,range:[s,s+r.length]}),s+=r.length):s+=r.length})}adaptElementsPoints({element:e,points:t,thickness:s}){return{element:e,points:P.adaptPointsToSegments(this.curScaleAndCenterPoints(t)),thickness:this.scaleThickness(s)}}parseGeneral(e){if(!e)return null;const t=e.getPoints();return 0===t.length?null:{points:t.map(e=>P.adaptPointsToSegments(this.curScaleAndCenterPoints(e))).flat(),color:P.DEFAULT_COLOR,index:F.LAST_LAYER_INDEX}}parsePCBLayerElements(e){return e.map(e=>e.getPoints().map((t,s)=>({element:e,points:t,thickness:e.getThickness()?.[s]||P.DEFAULT_THICKNESS}))).flat().map(e=>this.adaptElementsPoints(e))}parsePCBLayers(e){const t=Object.create(null),s=e.filter(e=>!e.isEmpty()).sort((e,t)=>t.getOrder()-e.getOrder());return s.forEach((e,s)=>{const r=this.parsePCBLayerElements(e.getElements());t[e.name]={elements:r,color:P.createThreeColor(e.getColor()),index:s}}),t}recalculateLinesThickness(){const e=Math.abs(this.parameters.cameraZPos/this.camera.position.z);this.selectedElementMeshes.forEach(t=>{t.material.linewidth=F.SELECTED_LINE_WIDTH*e})}createSelectedMesh(e){const t=e.getPoints().map(e=>this.curScaleAndCenterPoints(P.adaptPointsToSegments(e))),s=P.createLineSegments2(t.flat(),this.renderer.domElement.offsetWidth,F.SELECTED_LINE_WIDTH,P.SELECTED_COLOR);return s}drawSelectedElement(e){0!==e.getPoints().length&&(this.selectedElementMeshes.push(this.createSelectedMesh(e)),this.selectedElementMeshes.forEach(e=>{e.layers.set(F.LAST_LAYER_INDEX),e.renderOrder=F.LAST_LAYER_INDEX,this.scene.add(e)}),this.recalculateLinesThickness())}removeSelectedElement(){0!==this.selectedElementMeshes.length&&(this.selectedElementMeshes.forEach(e=>{this.scene.remove(e)}),this.selectedElementMeshes=[])}handleClick(e){this.removeSelectedElement();const t=e,{domElement:s}=this.renderer,r=s.getBoundingClientRect(),n=(t.clientX-r.left)/s.offsetWidth*2-1,i=-(t.clientY-r.top)/s.offsetHeight*2+1;this.updateRaycasterThreshold(),this.raycaster.setFromCamera(new y.I9Y(n,i),this.camera);const a=this.raycaster.intersectObjects(this.scene.children),o=this.getFirstIntersectedElement(a);this.dispatchEvent(new CustomEvent("elementClick",{detail:o})),o&&this.drawSelectedElement(o),this.draw()}updateRaycasterThreshold(){const e=Math.abs(this.camera.position.z),t=this.parameters.near,s=500,r=.005,n=Math.max(L.inverseLerp(t,s,e),r);this.raycaster.params.Line.threshold=n,this.raycaster.params.Points.threshold=n,this.raycaster.params.Mesh.threshold=n}getFirstIntersectedElement(e){if(0===e.length)return null;for(let t=0;t<e.length;t+=1){const s=e[t];if(s.object instanceof y.DXC){const e=P.getPointAlfaChannelIndex(s.index),t=s.object.geometry.attributes.color.array,r=0!==t[e];if(!r)continue;const n=this.meshElementsMap.get(s.object)||[],i=n[s.index];if(i)return i}if(s.object instanceof f.b){if(!s.object.visible||!s.faceIndex)continue;const e=this.meshElementsMap.get(s.object)||[],t=e[s.faceIndex];if(t)return t}}return null}enableLayer(e){this.raycaster.layers.enable(e),this.camera.layers.enable(e)}scaleThickness(e){if(!e)return P.DEFAULT_THICKNESS;const t=this.boardSizes.xMax-this.boardSizes.xMin,s=this.renderer.domElement.offsetWidth,r=s/t*e;return r}clearScene(){while(this.scene.children.length>0)this.scene.remove(this.scene.children[0])}createPointTransform(e){const t=this.parameters.far/this.parameters.cameraZPos,s=40,r=this.renderer.domElement.offsetWidth/s,n=this.renderer.domElement.offsetWidth/t-r,i=this.renderer.domElement.offsetHeight/t-r,a=e.xMax-e.xMin,o=e.yMax-e.yMin,[l,c]=a>o?[n,a]:[i,o],h=L.inverseLerp(0,c,a)*l,u=L.inverseLerp(0,c,o)*l;return t=>t.map(t=>{const s=L.inverseLerp(0,c,t.x-e.xMin)*l-h/2,r=L.inverseLerp(0,c,t.y-e.yMin)*l-u/2;return{x:s,y:r}})}resize(e,t){this.renderer.setSize(e,t),this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.draw()}initResizeObserver(){const e=400,t=(0,E.throttle)((e,t)=>this.resize(e,t),e);this.resizeObserver=new ResizeObserver(e=>{e.forEach(e=>{const{width:s,height:r}=e.contentRect;t(s,r)})}),this.resizeObserver.observe(this.container)}highlightLayerOpacity(e){this.setLayersOpacity(t=>t===e.name?P.DEFAULT_OPACITY:P.UNSELECTED_OPACITY)}resetLayersOpacity(){this.setLayersOpacity(()=>P.DEFAULT_OPACITY)}setLayersOpacity(e){Object.entries(this.layersMeshesData).forEach(([t,s])=>{const r=e(t);s.forEach(e=>{e.material.opacity=r})})}focusOnMesh(e){if(!e)return;const t=5;this.controls.fitToBox(e,!1,{paddingTop:t,paddingLeft:t,paddingBottom:t,paddingRight:t})}toggleMeshVisibility(e,t){const{mesh:s,range:r}=e,n=s.geometry.attributes.color.array,[i,a]=r;for(let o=i;o<a;o+=1){const e=P.getPointAlfaChannelIndex(o);n[e]=Number(t)}s.geometry.attributes.color.needsUpdate=!0}toggleMeshesVisibility(e,t){0!==e.length&&e.forEach(e=>this.toggleMeshVisibility(e,t))}}var z,V,B;(0,m.A)(F,"LAST_LAYER_INDEX",31),(0,m.A)(F,"SELECTED_LINE_WIDTH",2),function(e){e["ZoomIn"]="zoomIn",e["ZoomOut"]="zoomOut",e["RotateLeft"]="rotateLeft",e["RotateRight"]="rotateRight",e["ResetView"]="resetView"}(z||(z={})),function(e){e["Layer"]="layer",e["Component"]="component",e["Net"]="net",e["NonFunctional"]="nonFunctional"}(V||(V={})),function(e){e["IPC2581"]="IPC2581",e["GERBER"]="GERBER"}(B||(B={}));var U=s(6034),H=s(5098),X=s(6131),W=(0,n.pM)({__name:"PCBControls",emits:["click"],setup(e,{emit:t}){const s=t,r=[{icon:"mdi-magnify-plus-outline",event:z.ZoomIn,ariaLabel:"Zoom in",title:"Zoom in",variant:"flat"},{icon:"mdi-magnify-minus-outline",event:z.ZoomOut,ariaLabel:"Zoom out",title:"Zoom out",variant:"text"},{icon:"mdi-rotate-left",event:z.RotateLeft,ariaLabel:"Rotate left",title:"Rotate left",variant:"text"},{icon:"mdi-rotate-right",event:z.RotateRight,ariaLabel:"Rotate right",title:"Rotate right",variant:"text"},{icon:"mdi-crop-free",event:z.ResetView,ariaLabel:"Reset view",title:"Reset view",variant:"text"}];return(e,t)=>((0,n.uX)(),(0,n.Wv)(X.J,{variant:"flat",class:"pcb-controls"},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(r,e=>(0,n.bF)(H.D,{size:"small",key:e.event,icon:e.icon,variant:e.variant||"text","aria-label":e.ariaLabel,title:e.title,onClick:t=>s("click",e.event)},null,8,["icon","variant","aria-label","title","onClick"])),64))]),_:1}))}});const G=W;var j=G,Y=s(4232);const $={class:"pcb-info-content"},K={class:"text-caption text-grey-darken-4"},J={key:0},Q={key:1,class:"text-caption text-grey-darken-1 text-end"};var q=(0,n.pM)({__name:"PCBInfo",props:{infoData:{}},setup(e){return(e,t)=>((0,n.uX)(),(0,n.Wv)(X.J,{class:"pcb-info"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",$,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.infoData,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"pcb-info-content__row",key:t},[(0,n.Lk)("span",K,(0,Y.v_)(t)+":",1),"object"===typeof e?((0,n.uX)(),(0,n.CE)("span",J,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,(e,t)=>((0,n.uX)(),(0,n.CE)("span",{class:"text-grey-darken-1 text-end text-caption d-block",key:t},(0,Y.v_)(t)+":"+(0,Y.v_)(e),1))),128))])):((0,n.uX)(),(0,n.CE)("span",Q,(0,Y.v_)(e),1))]))),128))])]),_:1}))}});const Z=q;var ee=Z;const te={class:"pcb-canvas-container"};var se=(0,n.pM)({__name:"PCBCanvas",props:{elementInfo:{}},emits:["click"],setup(e,{expose:t,emit:s}){const r=(0,d.KR)(null);return t({pcbCanvas:r}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",te,[t[0]||((0,n.Vq)(-1,!0),(t[0]=(0,n.Lk)("div",{class:"pcb-canvas",ref_key:"pcbCanvas",ref:r},null,512)).cacheIndex=0,(0,n.Vq)(1),t[0]),(0,n.bF)((0,d.R1)(j),{onClick:t[1]||(t[1]=t=>e.$emit("click",t))}),e.elementInfo&&Object.keys(e.elementInfo).length>0?((0,n.uX)(),(0,n.Wv)((0,d.R1)(ee),{key:0,infoData:e.elementInfo},null,8,["infoData"])):(0,n.Q3)("",!0)]))}});const re=se;var ne,ie=re;s(3579);(function(e){e["IPC2581"]="IPC2581",e["GERBER_ARCHIVE"]="GERBER_ARCHIVE",e["GERBER_FILE"]="GERBER_FILE",e["UNKNOWN"]="UNKNOWN"})(ne||(ne={}));class ae{static detectFileType(e){const t="string"===typeof e?e:e.name.toLowerCase(),[s]=Object.entries(this.TYPE_PATTERNS).find(([,e])=>e.extensions.some(e=>t.endsWith(e)))||[ne.UNKNOWN];return s}static getAllFileExtensions(){return Object.values(this.TYPE_PATTERNS).flatMap(e=>e.extensions)}static getFileExtension(e){const t=e.split(".").pop()?.toLowerCase();return t||null}}(0,m.A)(ae,"TYPE_PATTERNS",{[ne.IPC2581]:{extensions:[".xml",".cvg"]},[ne.GERBER_ARCHIVE]:{extensions:[".zip"]},[ne.GERBER_FILE]:{extensions:[".gbr",".drl"]}});var oe=s(1529);const le={class:"pcb-upload-form-buttons"},ce=["accept"],he={class:"pcb-upload-form-file"},ue={class:"pcb-upload-form-file__info"},pe=["title"],de={class:"text-grey-darken-1 text-body-2"};var me=(0,n.pM)({__name:"PCBUploadForm",emits:["submit","progress"],setup(e,{emit:t}){const s=t,i=(0,d.KR)(null),a=(0,d.KR)(!1),o=ae.getAllFileExtensions().join(","),l=async e=>{a.value=!0;const t=new FileReader;t.onload=()=>{a.value=!1},t.onerror=()=>{a.value=!1},t.readAsArrayBuffer(e)},c=()=>{i.value=null,a.value=!1},h=()=>{i.value&&!a.value&&(s("submit",i.value),i.value=null)},u=e=>{i.value=null;const t=e.target;t.files?.[0]?([i.value]=t.files,l(i.value)):(i.value=null,a.value=!1)};return(e,t)=>((0,n.uX)(),(0,n.Wv)(oe.n,{class:"pcb-upload-form",onSubmit:(0,r.D$)(h,["prevent"])},{default:(0,n.k6)(()=>[(0,n.Lk)("div",le,[(0,n.bF)(H.D,{class:"pcb-upload-form-buttons__upload","prepend-icon":"mdi-upload","aria-label":"Upload PCB",variant:"outlined",color:"primary",tag:"label",loading:a.value},{default:(0,n.k6)(()=>[t[0]||(t[0]=(0,n.eW)(" Upload PCB ",-1)),(0,n.Lk)("input",{type:"file",hidden:"",accept:(0,d.R1)(o),onChange:u},null,40,ce)]),_:1},8,["loading"]),(0,n.bF)(H.D,{type:"submit",icon:"mdi-check",size:"small",color:"success","aria-label":"Submit PCB",variant:"text",rounded:"false",disabled:!i.value||a.value},null,8,["disabled"])]),(0,n.Lk)("div",he,[(0,n.Lk)("div",ue,[(0,n.Lk)("span",{class:"text-grey-darken-1 text-body-2 text-truncate",title:i.value?.name||"-"}," File name: "+(0,Y.v_)(i.value?.name||"-"),9,pe),(0,n.Lk)("span",de," File size: "+(0,Y.v_)(i.value?(0,d.R1)(C).formatFileSize(i.value.size):"-"),1)]),(0,n.bF)(H.D,{icon:"mdi-delete",size:"small",color:"error","aria-label":"Delete {{ file?.name }}",variant:"text",disabled:!i.value||a.value,onClick:c},null,8,["disabled"])])]),_:1}))}});const ye=me;var ve=ye,fe=s(365),Ee=s(7354);const ge={class:"pcb-component-item__visibility"},Ce={class:"text-body-2 text-grey-darken-4 text-truncate"};var Le=(0,n.pM)({__name:"PCBComponentItem",props:{isVisible:{type:Boolean},isDisabled:{type:Boolean},isSelected:{type:Boolean},name:{}},emits:["click","toggleVisibility"],setup(e,{emit:t}){const s=t,i=()=>{s("click")};return(e,t)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,Y.C4)(["pcb-component-item",{"pcb-component-item--selected":e.isSelected}]),tabindex:"0",onClick:i,onKeydown:(0,r.jR)(i,["enter"])},[(0,n.Lk)("span",ge,[e.isDisabled?((0,n.uX)(),(0,n.Wv)(fe.w,{key:1,icon:"mdi-eye-outline",size:"small",color:"grey",variant:"text"})):((0,n.uX)(),(0,n.Wv)(H.D,{key:0,density:"compact",size:"small",variant:"text",icon:e.isVisible?"mdi-eye":"mdi-eye-off",onClick:t[0]||(t[0]=(0,r.D$)(e=>s("toggleVisibility"),["stop"]))},null,8,["icon"]))]),(0,n.Lk)("span",Ce,(0,Y.v_)(e.name),1)],34)),[[Ee.n]])}});const be=Le;var Ae=be,Te=s(9978),Pe=s(850);const Re={class:"pcb-components-list"},Oe={class:"pcb-components-list-header"},Me={class:"text-h6 pcb-components-list-header__title"},De={class:"pcb-components-list-header__actions"};var xe=(0,n.pM)({__name:"PCBComponentsList",props:{selectedComponent:{},layers:{}},emits:["selectComponent","toggleVisibility","resetVisibility"],setup(e,{emit:t}){const s=e,r=t,i=(0,d.KR)(""),a=(0,d.KR)(null),o=(0,n.EW)(()=>{const e=[];return s.layers.forEach(t=>{const s=t.getComponents();s.forEach(s=>{e.push({component:s,layer:t})})}),e}),l=(0,n.EW)(()=>{const e=i.value?.trim().toLocaleLowerCase();return e?o.value.filter(t=>t.component.name.toLocaleLowerCase().includes(e)):o.value}),c=e=>{s.selectedComponent?.id!==e.id?r("selectComponent",e):r("selectComponent",null)},h=e=>{r("toggleVisibility",e)},u=()=>{r("resetVisibility")},p=()=>{if(!s.selectedComponent||!a.value)return;const e=l.value.findIndex(e=>e.component.id===s.selectedComponent.id);R.scrollToHiddenItem(a.value,e,{itemHeight:30})};return(0,n.wB)(()=>s.selectedComponent,()=>{p()},{flush:"post"}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",Re,[(0,n.Lk)("div",Oe,[(0,n.Lk)("h4",Me,"PCB Components ("+(0,Y.v_)(o.value.length)+")",1),(0,n.Lk)("div",De,[(0,n.bF)(H.D,{density:"compact",size:"small",variant:"text",icon:"mdi-eye","aria-label":"Show all components",title:"Show all components",onClick:u}),(0,n.bF)(Te.W,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),"append-inner-icon":"mdi-magnify",density:"compact",label:"Search layer by name",variant:"outlined","hide-details":"","single-line":"",clearable:""},null,8,["modelValue"])])]),(0,n.bF)(Pe.h,{ref_key:"virtualScrollRef",ref:a,items:l.value},{default:(0,n.k6)(({item:e})=>[((0,n.uX)(),(0,n.Wv)((0,d.R1)(Ae),{key:e.component.id,isSelected:s.selectedComponent?.id===e.component.id,isVisible:e.component.getVisibility(),isDisabled:!e.layer.getVisibility(),name:e.component.name,onClick:t=>c(e.component),onToggleVisibility:t=>h(e.component)},null,8,["isSelected","isVisible","isDisabled","name","onClick","onToggleVisibility"]))]),_:1},8,["items"])]))}});const _e=xe;var Ie=_e,we=s(6978),Se=s(3788),Ne=s(4990),ke=s(2171);const Fe={class:"pcb-layer-item__visibility"},ze={key:1,class:"pcb-layer-item__color-button pcb-layer-item__color-button--disabled",style:{backgroundColor:"rgba(0, 0, 0, 0.12)"}};var Ve=(0,n.pM)({__name:"PCBLayerItem",props:{isEmpty:{type:Boolean},isVisible:{type:Boolean},isSelected:{type:Boolean},layerName:{},color:{}},emits:["click","toggleVisibility","changeColor"],setup(e,{emit:t}){const s=e,i=t,a=(0,d.KR)(!1),o=(0,d.KR)(null);(0,n.wB)(a,e=>{e&&(o.value=s.color)});const l=()=>{i("click")},c=()=>{a.value=!1,o.value=s.color},h=()=>{o.value&&(i("changeColor",o.value),a.value=!1)};return(e,t)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,Y.C4)(["pcb-layer-item",{"pcb-layer-item--selected":e.isSelected}]),tabindex:"0",onClick:l,onKeydown:(0,r.jR)(l,["enter"])},[(0,n.Lk)("span",Fe,[e.isEmpty?((0,n.uX)(),(0,n.Wv)(fe.w,{key:1,icon:"mdi-eye-outline",size:"small",color:"grey",variant:"text"})):((0,n.uX)(),(0,n.Wv)(H.D,{key:0,density:"compact",size:"small",variant:"text",icon:e.isVisible?"mdi-eye":"mdi-eye-off",onClick:t[0]||(t[0]=(0,r.D$)(e=>i("toggleVisibility"),["stop"]))},null,8,["icon"]))]),(0,n.Lk)("span",{class:"pcb-layer-item__color",style:(0,Y.Tr)({"--layer-color":`rgb(${Object.values(e.color).join(",")})`})},[e.isEmpty?((0,n.uX)(),(0,n.CE)("span",ze)):((0,n.uX)(),(0,n.Wv)(ke.q,{key:0,modelValue:a.value,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value=e),"close-on-content-click":!1,"offset-y":""},{activator:(0,n.k6)(({props:e})=>[(0,n.bo)((0,n.Lk)("span",(0,n.v6)(e,{class:"pcb-layer-item__color-button",onClick:t[1]||(t[1]=(0,r.D$)(()=>{},["stop"]))}),null,16),[[Ee.n]])]),default:(0,n.k6)(()=>[(0,n.bF)(X.J,null,{default:(0,n.k6)(()=>[(0,n.bF)(Se._,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),mode:"rgb",elevation:"0","hide-inputs":""},null,8,["modelValue"]),(0,n.bF)(we.S,null,{default:(0,n.k6)(()=>[(0,n.bF)(Ne.h),(0,n.bF)(H.D,{text:"",onClick:c},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.eW)(" Cancel ",-1)])]),_:1}),(0,n.bF)(H.D,{color:"primary",onClick:h},{default:(0,n.k6)(()=>[...t[5]||(t[5]=[(0,n.eW)(" Apply ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))],4),(0,n.Lk)("span",{class:(0,Y.C4)(["text-body-2 text-truncate",{"text-grey-darken-4":!e.isEmpty,"text-grey-darken-1":e.isEmpty}])},(0,Y.v_)(e.layerName),3)],34)),[[Ee.n]])}});const Be=Ve;var Ue=Be;const He={class:"pcb-layers-list"},Xe={class:"pcb-layers-list-header"},We={class:"text-h6 pcb-layers-list-header__title"},Ge={class:"pcb-layers-list-header__actions"},je={class:"pcb-layers-list-scroll-wrap"},Ye={class:"pcb-layers-list-list"};var $e=(0,n.pM)({__name:"PCBLayersList",props:{selectedLayer:{},layers:{}},emits:["selectLayer","toggleVisibility","changeColor","resetVisibility"],setup(e,{emit:t}){const s=e,r=t,i=(0,d.KR)(""),a=(0,n.EW)(()=>i.value?s.layers.filter(e=>e.name.toLowerCase().includes(i.value.toLowerCase())):s.layers),o=e=>{s.selectedLayer?.id!==e.id?r("selectLayer",e):r("selectLayer",null)},l=e=>{r("toggleVisibility",e)},c=()=>{r("resetVisibility")},h=(e,t)=>{r("changeColor",e,t)};return(e,t)=>((0,n.uX)(),(0,n.CE)("div",He,[(0,n.Lk)("div",Xe,[(0,n.Lk)("h4",We,"PCB Layers ("+(0,Y.v_)(e.layers.length)+")",1),(0,n.Lk)("div",Ge,[(0,n.bF)(H.D,{density:"compact",size:"small",variant:"text",icon:"mdi-eye","aria-label":"Show all layers",title:"Show all layers",onClick:c}),(0,n.bF)(Te.W,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),"append-inner-icon":"mdi-magnify",density:"compact",label:"Search layer by name",variant:"outlined","hide-details":"","single-line":"",clearable:""},null,8,["modelValue"])])]),(0,n.Lk)("div",je,[(0,n.Lk)("ul",Ye,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id},[(0,n.bF)((0,d.R1)(Ue),{isSelected:s.selectedLayer?.id===e.id,isEmpty:e.isEmpty(),isVisible:e.getVisibility(),layerName:e.name,color:e.getColor(),onClick:t=>o(e),onToggleVisibility:t=>l(e),onChangeColor:t=>h(e,t)},null,8,["isSelected","isEmpty","isVisible","layerName","color","onClick","onToggleVisibility","onChangeColor"])]))),128))])])]))}});const Ke=$e;var Je=Ke;const Qe={class:"pcb-plate-item__img"},qe={class:"pcb-plate-item__info"},Ze=["title"],et={class:"text-body-2 text-grey-darken-1"},tt={class:"pcb-plate-item__controls"};var st=(0,n.pM)({__name:"PCBPlateItem",props:{plate:{},selected:{type:Boolean}},emits:["click","deletePlate"],setup(e){return(e,t)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,Y.C4)(["pcb-plate-item",{"pcb-plate-item--selected":e.selected}]),tabindex:"0",role:"button",onClick:t[1]||(t[1]=t=>e.$emit("click")),onKeydown:t[2]||(t[2]=(0,r.jR)(t=>e.$emit("click"),["enter"]))},[(0,n.Lk)("div",Qe,[((0,n.uX)(),(0,n.Wv)(fe.w,{key:1,icon:"$pcbPlate",size:"48"}))]),(0,n.Lk)("div",qe,[(0,n.Lk)("span",{class:"text-body-2 text-grey-darken-4 text-truncate",title:e.plate.name},(0,Y.v_)(e.plate.name),9,Ze),(0,n.Lk)("span",et,(0,Y.v_)(e.plate.type),1)]),(0,n.Lk)("div",tt,[(0,n.bF)(H.D,{icon:"mdi-delete",size:"small",color:"error","aria-label":"Delete {{ plate.name }}",variant:"text",onClick:t[0]||(t[0]=(0,r.D$)(t=>e.$emit("deletePlate",e.plate),["stop"]))})])],34)),[[Ee.n]])}});const rt=st;var nt=rt;const it={class:"pcb-plates-list"},at={class:"pcb-plates-list-scroll-wrap"},ot={class:"pcb-plates-list-list"};var lt=(0,n.pM)({__name:"PCBPlatesList",props:{plates:{},selectedPlate:{}},emits:["selectPlate","deletePlate"],setup(e,{emit:t}){const s=t;return(e,t)=>((0,n.uX)(),(0,n.CE)("div",it,[t[1]||(t[1]=(0,n.Lk)("div",{class:"pcb-plates-list-header"},[(0,n.Lk)("h3",{class:"text-h6"},"PCB Plates")],-1)),(0,n.Lk)("div",at,[(0,n.Lk)("ul",ot,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.plates,r=>((0,n.uX)(),(0,n.CE)("li",{key:r.name},[(0,n.bF)((0,d.R1)(nt),{plate:r,selected:e.selectedPlate?.name===r.name,onClick:e=>s("selectPlate",r),onDeletePlate:t[0]||(t[0]=e=>s("deletePlate",e))},null,8,["plate","selected","onClick"])]))),128))])])]))}});const ct=lt;var ht=ct;const ut={class:"pcb-net-item__visibility"},pt={class:"text-body-2 text-grey-darken-4 text-truncate"};var dt=(0,n.pM)({__name:"PCBNetItem",props:{isVisible:{type:Boolean},isDisabled:{type:Boolean},isSelected:{type:Boolean},name:{}},emits:["click","toggleVisibility"],setup(e,{emit:t}){const s=t,i=()=>{s("click")};return(e,t)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{class:(0,Y.C4)(["pcb-net-item",{"pcb-net-item--selected":e.isSelected}]),tabindex:"0",onClick:i,onKeydown:(0,r.jR)(i,["enter"])},[(0,n.Lk)("span",ut,[e.isDisabled?((0,n.uX)(),(0,n.Wv)(fe.w,{key:1,icon:"mdi-eye-outline",size:"small",color:"grey",variant:"text"})):((0,n.uX)(),(0,n.Wv)(H.D,{key:0,density:"compact",size:"small",variant:"text",icon:e.isVisible?"mdi-eye":"mdi-eye-off",onClick:t[0]||(t[0]=(0,r.D$)(e=>s("toggleVisibility"),["stop"]))},null,8,["icon"]))]),(0,n.Lk)("span",pt,(0,Y.v_)(e.name),1)],34)),[[Ee.n]])}});const mt=dt;var yt=mt;const vt={class:"pcb-nets-list"},ft={class:"pcb-nets-list-header"},Et={class:"text-h6 pcb-nets-list-header__title"},gt={class:"pcb-nets-list-header__actions"};var Ct=(0,n.pM)({__name:"PCBNetsList",props:{selectedNet:{},layers:{}},emits:["selectNet","toggleVisibility","resetVisibility"],setup(e,{emit:t}){const s=e,r=t,i=(0,d.KR)(""),a=(0,d.KR)(null),o=(0,n.EW)(()=>{const e=[];return s.layers.forEach(t=>{t.getNets().forEach(s=>{e.push({net:s,layer:t})})}),e}),l=(0,n.EW)(()=>{const e=i.value?.trim().toLocaleLowerCase();return e?o.value.filter(t=>t.net.name.toLowerCase().includes(e)):o.value}),c=e=>{s.selectedNet?.id!==e.id?r("selectNet",e):r("selectNet",null)},h=e=>{r("toggleVisibility",e)},u=()=>{r("resetVisibility")},p=()=>{if(!s.selectedNet||!a.value)return;const e=l.value.findIndex(e=>e.net.id===s.selectedNet.id);R.scrollToHiddenItem(a.value,e,{itemHeight:30})};return(0,n.wB)(()=>s.selectedNet,()=>{p()},{flush:"post"}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",vt,[(0,n.Lk)("div",ft,[(0,n.Lk)("h4",Et,"PCB Nets ("+(0,Y.v_)(o.value.length)+")",1),(0,n.Lk)("div",gt,[(0,n.bF)(H.D,{density:"compact",size:"small",variant:"text",icon:"mdi-eye","aria-label":"Show all nets",title:"Show all nets",onClick:u}),(0,n.bF)(Te.W,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),"append-inner-icon":"mdi-magnify",density:"compact",label:"Search layer by name",variant:"outlined","hide-details":"","single-line":"",clearable:""},null,8,["modelValue"])])]),(0,n.bF)(Pe.h,{ref_key:"virtualScrollRef",ref:a,items:l.value},{default:(0,n.k6)(({item:t})=>[((0,n.uX)(),(0,n.Wv)((0,d.R1)(yt),{key:t.net.id,isSelected:e.selectedNet?.id===t.net.id,isVisible:t.net.getVisibility(),isDisabled:!t.layer.getVisibility(),name:t.net.name,onClick:e=>c(t.net),onToggleVisibility:e=>h(t.net)},null,8,["isSelected","isVisible","isDisabled","name","onClick","onToggleVisibility"]))]),_:1},8,["items"])]))}});const Lt=Ct;var bt=Lt;const At={class:"pcb-aside-empty-state"},Tt={class:"pcb-aside-empty-state-content"},Pt={class:"text-body-1 text-grey-darken-1"};var Rt=(0,n.pM)({__name:"PCBAsideEmptyState",props:{icon:{},message:{}},setup(e){return(e,t)=>((0,n.uX)(),(0,n.CE)("div",At,[(0,n.Lk)("div",Tt,[(0,n.bF)(fe.w,{icon:e.icon,size:"64",color:"grey lighten-1"},null,8,["icon"]),(0,n.Lk)("span",Pt,(0,Y.v_)(e.message),1)])]))}});const Ot=Rt;var Mt=Ot,Dt=s(2253),xt=s(1679),_t=s(3381),It=s(3283);const wt={class:"pcb-aside"};var St;(function(e){e["PLATES"]="plates",e["LAYERS"]="layers",e["NETS"]="nets",e["COMPONENTS"]="components"})(St||(St={}));var Nt=(0,n.pM)({__name:"PCBAside",props:{pcbPlatesList:{},selectedPlate:{},plateLayers:{},selectedElement:{}},emits:["fileChange","selectPlate","selectElement","toggleVisibility","resetVisibility","changeColor","deletePlate"],setup(e,{emit:t}){const s=t,r=e,i=(0,d.KR)(St.PLATES),a=(0,n.EW)(()=>[{value:St.PLATES,title:"PCB Plates",icon:"$pcbPlate"},{value:St.LAYERS,title:"PCB Layers",icon:"$pcbLayer"},{value:St.NETS,title:"PCB Nets",icon:"$pcbNet"},{value:St.COMPONENTS,title:"PCB Components",icon:"$pcbComponent"}]);return(e,t)=>((0,n.uX)(),(0,n.CE)("aside",wt,[(0,n.bF)(Dt.h,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),class:"pcb-aside-tabs-panel",direction:"vertical"},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,e=>((0,n.uX)(),(0,n.Wv)(xt.U,{key:e.value,value:e.value,title:e.title,color:"primary",class:"pcb-aside-tab"},{default:(0,n.k6)(()=>[(0,n.bF)(fe.w,{icon:e.icon},null,8,["icon"])]),_:2},1032,["value","title"]))),128))]),_:1},8,["modelValue"]),(0,n.bF)(_t.l,{modelValue:i.value,"onUpdate:modelValue":t[14]||(t[14]=e=>i.value=e),class:"pcb-aside-tabs-window"},{default:(0,n.k6)(()=>[(0,n.bF)(It.Y,{value:St.PLATES,class:"pcb-aside-tabs-window-item"},{default:(0,n.k6)(()=>[(0,n.bF)((0,d.R1)(ve),{class:"pcb-aside-upload-form",onSubmit:t[1]||(t[1]=e=>s("fileChange",e))}),r.pcbPlatesList.length>0?((0,n.uX)(),(0,n.Wv)((0,d.R1)(ht),{key:0,selectedPlate:r.selectedPlate,plates:r.pcbPlatesList,onSelectPlate:t[2]||(t[2]=e=>s("selectPlate",e)),onDeletePlate:t[3]||(t[3]=e=>s("deletePlate",e))},null,8,["selectedPlate","plates"])):((0,n.uX)(),(0,n.Wv)((0,d.R1)(Mt),{key:1,icon:"$pcbPlate",message:"No PCB plates available. Please upload a PCB file."}))]),_:1},8,["value"]),(0,n.bF)(It.Y,{value:St.LAYERS,class:"pcb-aside-tabs-window-item"},{default:(0,n.k6)(()=>[r.plateLayers.length>0?((0,n.uX)(),(0,n.Wv)((0,d.R1)(Je),{key:0,layers:r.plateLayers,selectedLayer:r.selectedElement,onSelectLayer:t[4]||(t[4]=e=>s("selectElement",e)),onToggleVisibility:t[5]||(t[5]=e=>s("toggleVisibility",e)),onResetVisibility:t[6]||(t[6]=()=>s("resetVisibility",(0,d.R1)(V).Layer)),onChangeColor:t[7]||(t[7]=(e,t)=>s("changeColor",{layer:e,color:t}))},null,8,["layers","selectedLayer"])):((0,n.uX)(),(0,n.Wv)((0,d.R1)(Mt),{key:1,icon:"$pcbLayer",message:"No layers available. Please select a PCB plate with layers."}))]),_:1},8,["value"]),(0,n.bF)(It.Y,{value:St.NETS,class:"pcb-aside-tabs-window-item"},{default:(0,n.k6)(()=>[r.plateLayers.length>0?((0,n.uX)(),(0,n.Wv)((0,d.R1)(bt),{key:0,layers:r.plateLayers,selectedNet:r.selectedElement,onSelectNet:t[8]||(t[8]=e=>s("selectElement",e)),onToggleVisibility:t[9]||(t[9]=e=>s("toggleVisibility",e)),onResetVisibility:t[10]||(t[10]=()=>s("resetVisibility",(0,d.R1)(V).Net))},null,8,["layers","selectedNet"])):((0,n.uX)(),(0,n.Wv)((0,d.R1)(Mt),{key:1,icon:"$pcbNet",message:"No nets available. Please select a PCB plate with layers."}))]),_:1},8,["value"]),(0,n.bF)(It.Y,{value:St.COMPONENTS,class:"pcb-aside-tabs-window-item"},{default:(0,n.k6)(()=>[r.plateLayers.length>0?((0,n.uX)(),(0,n.Wv)((0,d.R1)(Ie),{key:0,layers:r.plateLayers,selectedComponent:r.selectedElement,onSelectComponent:t[11]||(t[11]=e=>s("selectElement",e)),onToggleVisibility:t[12]||(t[12]=e=>s("toggleVisibility",e)),onResetVisibility:t[13]||(t[13]=()=>s("resetVisibility",(0,d.R1)(V).Component))},null,8,["layers","selectedComponent"])):((0,n.uX)(),(0,n.Wv)((0,d.R1)(Mt),{key:1,icon:"$pcbComponent",message:"No components available. Please select a PCB plate with layers."}))]),_:1},8,["value"])]),_:1},8,["modelValue"])]))}});const kt=Nt;var Ft=kt;const zt={class:"lds-roller"};function Vt(e,t){return(0,n.uX)(),(0,n.CE)("div",zt,[...t[0]||(t[0]=[(0,n.Lk)("div",null,null,-1),(0,n.Lk)("div",null,null,-1),(0,n.Lk)("div",null,null,-1),(0,n.Lk)("div",null,null,-1),(0,n.Lk)("div",null,null,-1),(0,n.Lk)("div",null,null,-1),(0,n.Lk)("div",null,null,-1),(0,n.Lk)("div",null,null,-1)])])}const Bt={},Ut=(0,c.A)(Bt,[["render",Vt]]);var Ht=Ut;class Xt{static readFile(e){return new Promise((t,s)=>{const r=new FileReader;r.onload=e=>{const s=e.target?.result;t(s)},r.onerror=e=>{s(e)};const n=ae.detectFileType(e);n===ne.GERBER_ARCHIVE&&r.readAsArrayBuffer(e),n===ne.GERBER_FILE&&r.readAsText(e),n===ne.IPC2581&&r.readAsText(e),n===ne.UNKNOWN&&s(new Error("Unknown PCB file type"))})}}var Wt,Gt=s(4813),jt=s.n(Gt);class Yt{}class $t extends Yt{constructor(){super(),(0,m.A)(this,"zip",void 0),this.zip=new(jt())}async parse(e,t){const s=await this.zip.loadAsync(t),r={};return await Promise.all(Object.entries(s.files).map(async([e,t])=>{const s=await t.async("arraybuffer");r[e]=(new TextDecoder).decode(s)})),r}}(function(e){e["Arc"]="Arc",e["Circle"]="Circle",e["Contour"]="Contour",e["Diamond"]="Diamond",e["Donut"]="Donut",e["Ellipse"]="Ellipse",e["Hexagon"]="Hexagon",e["Hole"]="Hole",e["Line"]="Line",e["Octagon"]="Octagon",e["Outline"]="Outline",e["Oval"]="Oval",e["Polyline"]="Polyline",e["RectCenter"]="RectCenter",e["RectCham"]="RectCham",e["RectCorner"]="RectCorner",e["RectRound"]="RectRound",e["Thermal"]="Thermal",e["Triangle"]="Triangle"})(Wt||(Wt={}));var Kt=s(3927);class Jt extends Yt{constructor(){super(),(0,m.A)(this,"xmlParser",void 0),(0,m.A)(this,"TAG_TO_ARRAY",["Pin","Pad","Component","Cutout","Features","Set","NonstandardAttribute",...Object.values(Wt)]),(0,m.A)(this,"POLY_STEP_NAMES",["PolyStepSegment","PolyStepCurve"]),(0,m.A)(this,"polyStepCounter",0),this.xmlParser=new Kt.A({ignoreAttributes:!1,attributeNamePrefix:"",parseAttributeValue:!0,isArray:e=>this.TAG_TO_ARRAY.includes(e),updateTag:e=>this.POLY_STEP_NAMES.includes(e)?(this.polyStepCounter+=1,`${e}_${this.polyStepCounter}`):e})}parse(e,t){return this.polyStepCounter=0,this.xmlParser.parse(t)}}class Qt extends Yt{async parse(e,t){return{[e]:t}}}class qt{static createParser(e){const t=ae.detectFileType(e),s={[ne.IPC2581]:Jt,[ne.GERBER_ARCHIVE]:$t,[ne.GERBER_FILE]:Qt},r=s[t];return r?new r:null}}class Zt extends D{constructor(e,t,s,r){super(e,r||[]),(0,m.A)(this,"position",void 0),(0,m.A)(this,"pins",void 0),this.pins=s,this.position=t}get name(){return this.getInfo().refDes||"Component"}getPoints(){if(this.points.length>0)return this.points;const e=this.pins.map(e=>e.getPoints()).flat(),t=this.shapes.map(e=>e.getPoints()).flat(),s=[...e,...t],{location:r,rotation:n}=this.position,i=s.map(e=>L.applyOffsetToPoints(e,r)),a=i.map(e=>L.rotatePoints(e,r,n??0)),o=b.parseBoolean(this.position.mirror||""),l=a.map(e=>L.mirrorPoints(e,r,o));return this.points=l,l}getThickness(){const e=this.pins.map(e=>e.getThickness()).flat(),t=this.shapes.map(e=>e.getThickness()).flat();return[...e,...t].filter(e=>void 0!==e)}}class es extends x{}class ts extends _{}class ss extends I{get name(){return this.getInfo().net}}class rs extends w{get name(){return"NonFunctional element"}}class ns extends M{constructor(e,t){super(),(0,m.A)(this,"info",void 0),(0,m.A)(this,"shape",void 0),(0,m.A)(this,"points",void 0),this.info=e,this.shape=t,this.points=[]}get name(){return this.info.number||""}getPoints(){if(this.points.length>0)return this.points;const e=this.shape.getPoints()||[];return this.points=e,e}getInfo(){return this.info}getThickness(){return this.shape.getThickness()||[]}}class is extends S{get type(){return B.IPC2581}}const as=/^color_/i;class os{constructor(e){(0,m.A)(this,"xmlObjContent",void 0),this.xmlObjContent=e}getFromContent(e,t,s,r=e=>e){const n=this.xmlObjContent[e],i=n?.[t];if(i&&Array.isArray(i))return i.find(e=>r(e.id)===s)}getColorByID(e){const t=e=>b.parseXMLID(e.replace(as,""));return this.getFromContent("DictionaryColor","EntryColor",e,t)}getStandardByID(e){return this.getFromContent("DictionaryStandard","EntryStandard",e)}getUserSpecialByID(e){return this.getFromContent("DictionaryUser","EntryUser",e)}getLineDescByID(e){return this.getFromContent("DictionaryLineDesc","EntryLineDesc",e)}getLayers(){const e=this.xmlObjContent.LayerRef;return e?e.map(e=>"object"===typeof e?e.name:e).filter(e=>""!==e):[]}}class ls{constructor(e){(0,m.A)(this,"xmlEcad",void 0),this.xmlEcad=e}getCadDataStep(){return this.xmlEcad.CadData.Step||this.xmlEcad.CadData.StepList?.Step}getCadDataLayers(){return this.xmlEcad.CadData.Layer||this.xmlEcad.CadData.LayerDesc?.Layer}getUnits(){return this.xmlEcad.CadHeader.units??""}getLayerSpec(e){if(!e)return null;const t=this.xmlEcad.CadHeader.Spec.find(t=>t.name===e);if(!t)return null;const s=e=>e.map(e=>({type:e.type,value:{...e.Property}})),r=Object.fromEntries(Object.entries(t).filter(([,e])=>Array.isArray(e)).map(([e,t])=>[e.toLocaleLowerCase(),s(t)]));return r}getLayerInfoFromCadDataStackup(e){const t=this.xmlEcad.CadData.Stackup?.StackupGroup?.StackupLayer,s=t?.find(t=>t.layerOrGroupRef===e);if(!s)return{};const r=s.SpecRef?this.getLayerSpec(s.SpecRef.id):{};return{...s,spec:r}}getLayers(){const e=this.getCadDataLayers();return e?e.map(e=>e.name).filter(e=>void 0!==e):[]}}class cs{constructor(e=0,t=0,s=1,r=1,n=0,i=2*Math.PI,a=!1,o=0){(0,m.A)(this,"aX",void 0),(0,m.A)(this,"aY",void 0),(0,m.A)(this,"xRadius",void 0),(0,m.A)(this,"yRadius",void 0),(0,m.A)(this,"aStartAngle",void 0),(0,m.A)(this,"aEndAngle",void 0),(0,m.A)(this,"aClockwise",void 0),(0,m.A)(this,"aRotation",void 0),this.aX=e,this.aY=t,this.xRadius=s,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=i,this.aClockwise=a,this.aRotation=o,this.aStartAngle===this.aEndAngle&&(this.aEndAngle=this.aClockwise?this.aStartAngle-2*Math.PI:this.aStartAngle+2*Math.PI)}getPoints(e=12){const t=[];for(let s=0;s<=e;s+=1)t.push(this.getPoint(s/e));return t}getPoint(e){const t=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const r=Math.abs(s)<Number.EPSILON;while(s<0)s+=t;while(s>t)s-=t;s<Number.EPSILON&&(s=r?0:t),!0!==this.aClockwise||r||(s===t?s=-t:s-=t);const n=this.aStartAngle+e*s;let i=this.aX+this.xRadius*Math.cos(n),a=this.aY+this.yRadius*Math.sin(n);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),s=i-this.aX,r=a-this.aY;i=s*e-r*t+this.aX,a=s*t+r*e+this.aY}return{x:i,y:a}}}class hs extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Arc)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),s=L.applyOffsetToPoint(this.coords.start,e),r=L.applyOffsetToPoint(this.coords.end,e),n=L.getDistance(s,t),i=L.getPointAngle(t,s),a=L.getPointAngle(t,r),o=new cs(t.x,t.y,n,n,i,a,this.coords.clockwise),l=o.getPoints();return[l]}getThickness(){return[this.styles.lineWidth]}}class us{constructor(e,t,s){(0,m.A)(this,"v0",void 0),(0,m.A)(this,"v1",void 0),(0,m.A)(this,"v2",void 0),this.v0=e,this.v1=t,this.v2=s}getPoints(e=5){const t=[];for(let s=0;s<=e;s+=1)t.push(this.getPoint(s/e));return t}getPoint(e){const{v0:t,v1:s,v2:r}=this,n=us.QuadraticBezier(e,t.x,s.x,r.x),i=us.QuadraticBezier(e,t.y,s.y,r.y),a={x:n,y:i};return a}static QuadraticBezierP0(e,t){const s=1-e;return s*s*t}static QuadraticBezierP1(e,t){return 2*(1-e)*e*t}static QuadraticBezierP2(e,t){return e*e*t}static QuadraticBezier(e,t,s,r){return us.QuadraticBezierP0(e,t)+us.QuadraticBezierP1(e,s)+us.QuadraticBezierP2(e,r)}}class ps{constructor(){(0,m.A)(this,"points",void 0),(0,m.A)(this,"currentPoint",void 0),this.points=[],this.currentPoint={x:0,y:0}}moveTo(e,t){this.points.push({x:e,y:t}),this.currentPoint={x:e,y:t}}lineTo(e,t){this.points.push({x:e,y:t}),this.currentPoint={x:e,y:t}}getPoints(){return this.points}absarc(e,t,s,r,n,i){const a=new cs(e,t,s,s,r,n,i,0),o=a.getPoints(L.getOptimalPointForArc(s));this.points.push(...o);const l=o[o.length-1];this.currentPoint={x:l.x,y:l.y}}quadraticCurveTo(e,t,s,r){const n=new us({...this.currentPoint},{x:e,y:t},{x:s,y:r});this.points.push(...n.getPoints()),this.currentPoint={x:s,y:r}}}class ds{constructor(e,t,s,r,n){(0,m.A)(this,"center",void 0),(0,m.A)(this,"width",void 0),(0,m.A)(this,"height",void 0),(0,m.A)(this,"chamfer",void 0),(0,m.A)(this,"chamCorners",void 0),this.center=e,this.width=t,this.height=s,this.chamfer=r,this.chamCorners=n}getPoints(){const e=this.width/2,t=this.height/2,{x:s,y:r}=this.center,n={x:s-e,y:r+t},i={x:s+e,y:r+t},a={x:s+e,y:r-t},o={x:s-e,y:r-t},l=new ps;this.chamCorners.leftTop?l.moveTo(n.x+this.chamfer,n.y):l.moveTo(n.x,n.y),this.chamCorners.rightTop?(l.lineTo(i.x-this.chamfer,i.y),l.lineTo(i.x,i.y-this.chamfer)):l.lineTo(i.x,i.y),this.chamCorners.rightBot?(l.lineTo(a.x,a.y+this.chamfer),l.lineTo(a.x-this.chamfer,a.y)):l.lineTo(a.x,a.y),this.chamCorners.leftBot?(l.lineTo(o.x+this.chamfer,o.y),l.lineTo(o.x,o.y+this.chamfer)):l.lineTo(o.x,o.y),this.chamCorners.leftTop?(l.lineTo(n.x,n.y-this.chamfer),l.lineTo(n.x+this.chamfer,n.y)):l.lineTo(n.x,n.y);const c=l.getPoints();return c}}class ms{constructor(e,t,s,r,n){(0,m.A)(this,"center",void 0),(0,m.A)(this,"width",void 0),(0,m.A)(this,"height",void 0),(0,m.A)(this,"radius",void 0),(0,m.A)(this,"roundCorners",void 0),this.center=e,this.width=t,this.height=s,this.radius=r,this.roundCorners=n}getPoints(){const e=this.width/2,t=this.height/2,{x:s,y:r}=this.center,n={x:s-e,y:r-t},i={x:s+e,y:r-t},a={x:s+e,y:r+t},o={x:s-e,y:r+t},l=new ps;l.moveTo(n.x+this.radius,n.y),l.lineTo(i.x-this.radius,i.y),this.roundCorners.rightBot?l.quadraticCurveTo(i.x,i.y,i.x,i.y+this.radius):l.lineTo(i.x,i.y),l.lineTo(a.x,a.y-this.radius),this.roundCorners.rightTop?l.quadraticCurveTo(a.x,a.y,a.x-this.radius,a.y):l.lineTo(a.x,a.y),l.moveTo(o.x+this.radius,o.y),this.roundCorners.leftTop?l.quadraticCurveTo(o.x,o.y,o.x,o.y-this.radius):l.lineTo(o.x,o.y),l.moveTo(n.x,n.y+this.radius),this.roundCorners.leftBot?l.quadraticCurveTo(n.x,n.y,n.x+this.radius,n.y):(l.lineTo(n.x,n.y),l.lineTo(n.x+this.radius,n.y));const c=l.getPoints();return c}}class ys extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Circle)}getPoints(){const e=L.applyOffsetToPoint(this.coords.center,{x:this.styles.xOffset,y:this.styles.yOffset}),t=this.styles.diameter/2,s=new cs(e.x,e.y,t,t),r=s.getPoints();return[r]}getThickness(){return[this.styles.lineWidth]}}class vs extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Polyline)}getPoints(){const{begin:e,location:t,path:s}=this.coords,r=new ps;r.moveTo(e.x,e.y),s.forEach((t,s,n)=>{if(void 0!==t.centerX&&void 0!==t.centerY){const i=n[s-1]||e,a={x:t.centerX,y:t.centerY},o=L.getDistance(a,t),l=L.getPointAngle(a,i),c=L.getPointAngle(a,t);r.absarc(a.x,a.y,o,l,c,t.clockwise)}else r.lineTo(t.x,t.y)});const n=r.getPoints(),{rotation:i,mirror:a}=this.styles,o=L.applyOffsetToPoints(n,{x:this.styles.xOffset,y:this.styles.yOffset}),l=L.applyOffsetToPoints(o,t),c=L.rotatePoints(l,t,i),h=L.mirrorPoints(c,t,a);return[h]}getThickness(){return[this.styles.lineWidth]}}class fs extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Contour)}getPoints(){const e=[];this.coords.polylines&&e.push(new vs({...this.coords.polylines,location:{...this.coords.location}},this.styles)),this.coords.cutouts&&this.coords.cutouts.forEach(t=>{e.push(new vs({...t,location:{...this.coords.location}},this.styles))});const t=e.map(e=>e.getPoints()).flat();return t}getThickness(){return[this.coords.polylines,...this.coords.cutouts||[]].filter(e=>!!e).map(()=>this.styles.lineWidth)}}class Es extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Diamond)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),{width:s,height:r,rotation:n}=this.styles,i={x:t.x,y:t.y-r/2},a={x:t.x+s/2,y:t.y},o={x:t.x,y:t.y+r/2},l={x:t.x-s/2,y:t.y},c=[i,a,o,l,i],h=L.rotatePoints(c,t,n);return[h]}getThickness(){return[this.styles.lineWidth]}}class gs extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Donut)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),{amountOfPoints:s,innerDiameter:r,outerDiameter:n}=this.styles,i=n/2,a=r/2,o=new cs(t.x,t.y,i,i),l=o.getPoints(s),c=new cs(t.x,t.y,a,a),h=c.getPoints(s);return[l,h]}getThickness(){return[this.styles.lineWidth]}}class Cs extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Ellipse)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),s=this.styles.width/2,r=this.styles.height/2,n=L.convertDegreesToRad(this.styles.rotation),i=new cs(t.x,t.y,s,r,0,2*Math.PI,!1,n),a=i.getPoints(),o=L.mirrorPoints(a,t,this.styles.mirror);return[o]}getThickness(){return[this.styles.lineWidth]}}class Ls extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Hexagon)}getPoints(){const e=6,{center:t}=this.coords,s=this.styles.length/2,r=L.convertDegreesToRad(this.styles.rotation),n=new cs(t.x,t.y,s,s,0,2*Math.PI,!1,r),i=n.getPoints(e);return[i]}getThickness(){return[this.styles.lineWidth]}}class bs extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Line)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.start,e),s=L.applyOffsetToPoint(this.coords.end,e),r=L.getMiddlePoint(t,s),n=L.rotatePoints([t,s],r,this.styles.rotation);return[n]}getThickness(){return[this.styles.lineWidth]}}class As extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Octagon)}getPoints(){const e=8,t={x:this.styles.xOffset,y:this.styles.yOffset},s=L.applyOffsetToPoint(this.coords.center,t),r=this.styles.length/2,n=L.convertDegreesToRad(this.styles.rotation),i=new cs(s.x,s.y,r,r,0,2*Math.PI,!1,n),a=i.getPoints(e);return[a]}getThickness(){return[this.styles.lineWidth]}}class Ts extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Oval)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),{width:s,height:r,rotation:n,mirror:i}=this.styles,a=Math.min(r,s)/2,o=new ms(t,s,r,a,{leftTop:!0,leftBot:!0,rightTop:!0,rightBot:!0}),l=o.getPoints(),c=L.rotatePoints(l,t,n),h=L.mirrorPoints(c,t,i);return[h]}getThickness(){return[this.styles.lineWidth]}}class Ps extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.RectCenter)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),{width:s,height:r,rotation:n,mirror:i}=this.styles,a=t.x-s/2,o=t.y-r/2,l=t.x+s/2,c=t.y+r/2,h=[{x:a,y:o},{x:l,y:o},{x:l,y:c},{x:a,y:c},{x:a,y:o}],u=L.rotatePoints(h,t,n),p=L.mirrorPoints(u,t,i);return[p]}getThickness(){return[this.styles.lineWidth]}}class Rs extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.RectCham)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),{width:s,height:r,chamfer:n,upperLeft:i,upperRight:a,lowerLeft:o,lowerRight:l,rotation:c,mirror:h}=this.styles,u=new ds(t,s,r,n,{leftTop:i,leftBot:o,rightTop:a,rightBot:l}),p=u.getPoints(),d=L.rotatePoints(p,t,-c),m=L.mirrorPoints(d,t,h);return[m]}getThickness(){return[this.styles.lineWidth]}}class Os extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.RectCorner)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),{lowerLeftX:s,lowerLeftY:r,upperRightX:n,upperRightY:i,rotation:a,mirror:o}=this.styles,l=[{x:s,y:r},{x:s,y:i},{x:n,y:i},{x:n,y:r},{x:s,y:r}],c=L.rotatePoints(l,t,a),h=L.mirrorPoints(c,t,o);return[h]}getThickness(){return[this.styles.lineWidth]}}class Ms extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.RectRound)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),{width:s,height:r,radius:n,upperLeft:i,upperRight:a,lowerLeft:o,lowerRight:l,rotation:c,mirror:h}=this.styles,u=new ms(t,s,r,n,{leftTop:i,leftBot:o,rightTop:a,rightBot:l}),p=u.getPoints(),d=L.rotatePoints(p,t,-c),m=L.mirrorPoints(d,t,h);return[m]}getThickness(){return[this.styles.lineWidth]}}class Ds extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Thermal)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),{amountOfPoints:s,outerDiameter:r,innerDiameter:n,spokeStartAngle:i,gap:a,spokeCount:o}=this.styles,l=r/2,c=n/2,h=new cs(t.x,t.y,l,l),u=h.getPoints(s),p=new cs(t.x,t.y,c,c),d=p.getPoints(s),m=L.convertDegreesToRad(i),y=new cs(t.x,t.y,l,l,0,2*Math.PI,!1,m),v=y.getPoints(o),f=a/2,E=L.getDiagonalLines(v,f);return[u,d,...E]}getThickness(){return[this.styles.lineWidth]}}class xs extends N{constructor(...e){super(...e),(0,m.A)(this,"type",Wt.Triangle)}getPoints(){const e={x:this.styles.xOffset,y:this.styles.yOffset},t=L.applyOffsetToPoint(this.coords.center,e),{base:s,height:r,mirror:n,rotation:i}=this.styles,a={x:t.x,y:t.y+r/2},o={x:t.x+s/2,y:t.y-r/2},l={x:t.x-s/2,y:t.y-r/2},c=[a,o,l,a],h=L.rotatePoints(c,t,i),u=L.mirrorPoints(h,t,n);return[u]}getThickness(){return[this.styles.lineWidth]}}var _s,Is;(function(e){e["HEXAGON"]="HEXAGON",e["OCTAGON"]="OCTAGON",e["ROUND"]="ROUND",e["SQUARE"]="SQUARE"})(_s||(_s={})),function(e){e["INCH"]="INCH",e["MILLIMETER"]="MILLIMETER",e["MICRON"]="MICRON"}(Is||(Is={}));class ws{static createArcs(e,t){return e.Arc.map(e=>new hs({center:{x:e.centerX,y:e.centerY},start:{x:e.startX,y:e.startY},end:{x:e.endX,y:e.endY},clockwise:b.parseBoolean(e.clockwise)},t(e)||{}))}static createCircles(e){return e.Circle.map(t=>new ys({center:{...e.Location}},{diameter:t.diameter,...ws.parseXform(e.Xform)}))}static createContours(e,t){return e.Contour.map(s=>new fs({location:{...e.Location||{x:0,y:0}},polylines:ws.parsePolylineCoords(s.Polygon),cutouts:s.Cutout?.map(e=>ws.parsePolylineCoords(e)).filter(e=>!!e)},{...ws.parseXform(e.Xform),...t(s)||{}}))}static createDiamonds(e){return e.Diamond.map(t=>new Es({center:{...e.Location}},{...ws.parseXform(e.Xform),width:t.width,height:t.height}))}static createDonuts(e){return e.Donut.map(t=>new gs({center:{...e.Location}},{outerDiameter:t.outerDiameter,innerDiameter:t.innerDiameter,amountOfPoints:ws.getNumberOfPointsByType(t.shape),...ws.parseXform(e.Xform)}))}static createEllipses(e){return e.Ellipse.map(t=>new Cs({center:{...e.Location}},{...ws.parseXform(e.Xform),width:t.width,height:t.height}))}static createHexagons(e){return e.Hexagon.map(t=>new Ls({center:{...e.Location}},{...ws.parseXform(e.Xform),length:t.length}))}static createHoles(e){return e.Hole.map(e=>new ys({center:{x:e.x,y:e.y}},{diameter:e.diameter}))}static createLines(e,t){return e.Line.map(s=>new bs({start:{x:s.startX,y:s.startY},end:{x:s.endX,y:s.endY}},{...ws.parseXform(e.Xform),...t(s)||{}}))}static createOctagons(e){return e.Octagon.map(t=>new As({center:{...e.Location}},{...ws.parseXform(e.Xform),length:t.length}))}static createOutlines(e,t){return e.Outline.map(s=>new fs({location:{...e.Location||{x:0,y:0}},polylines:ws.parsePolylineCoords(s.Polygon)},{...ws.parseXform(e.Xform),...t(s)||{}}))}static createOvals(e){return e.Oval.map(t=>new Ts({center:{...e.Location}},{...ws.parseXform(e.Xform),width:t.width,height:t.height}))}static createPolylines(e,t){return e.Polyline.map(s=>new vs({...ws.parsePolylineCoords(s),location:{...e.Location}},{...ws.parseXform(e.Xform),...t(s)||{}}))}static createRectCenters(e){return e.RectCenter.map(t=>new Ps({center:{...e.Location}},{...ws.parseXform(e.Xform),width:t.width,height:t.height}))}static createRectChams(e){return e.RectCham.map(t=>new Rs({center:{...e.Location}},{...ws.parseXform(e.Xform),width:t.width,height:t.height,chamfer:t.chamfer,upperLeft:b.parseBoolean(t.upperLeft),upperRight:b.parseBoolean(t.upperRight),lowerLeft:b.parseBoolean(t.lowerLeft),lowerRight:b.parseBoolean(t.lowerRight)}))}static createRectCorners(e){return e.RectCorner.map(t=>new Os({center:{...e.Location}},{...ws.parseXform(e.Xform),...t}))}static createRectRounds(e){return e.RectRound.map(t=>new Ms({center:{...e.Location}},{...ws.parseXform(e.Xform),width:t.width,height:t.height,radius:t.radius,upperLeft:b.parseBoolean(t.upperLeft),upperRight:b.parseBoolean(t.upperRight),lowerLeft:b.parseBoolean(t.lowerLeft),lowerRight:b.parseBoolean(t.lowerRight)}))}static createThermals(e){return e.Thermal.map(t=>new Ds({center:{...e.Location}},{...ws.parseXform(e.Xform),gap:t.gap,innerDiameter:t.innerDiameter,outerDiameter:t.outerDiameter,spokeCount:t.spokeCount,spokeStartAngle:t.spokeStartAngle,amountOfPoints:ws.getNumberOfPointsByType(t.shape)}))}static createTriangles(e){return e.Triangle.map(t=>new xs({center:{...e.Location}},{...ws.parseXform(e.Xform),base:t.base,height:t.height}))}static getNumberOfPointsByType(e){const t={[_s.ROUND]:void 0,[_s.SQUARE]:4,[_s.HEXAGON]:6,[_s.OCTAGON]:8};return t[e]}static parseXform(e){return e?{rotation:e.rotation??0,mirror:b.parseBoolean(e.mirror??""),xOffset:e.xOffset??0,yOffset:e.yOffset??0}:{}}static parsePolylineCoords(e){if(!e)return;const{LineDescRef:t,LineDesc:s,FillDescRef:r,PolyBegin:n,...i}=e;return{location:{x:0,y:0},begin:{...n},path:Object.values(i).map(e=>{const{clockwise:t,...s}=e;return{...s,...void 0===t?{}:{clockwise:b.parseBoolean(t)}}})}}}class Ss{constructor(e){(0,m.A)(this,"contentParser",void 0),this.contentParser=e}getLineStyles(e){if(e.LineDescRef){const t=e.LineDescRef.id,s=this.contentParser.getLineDescByID(t);return s&&{...s.LineDesc}}if(e.LineDesc)return{...e.LineDesc}}getShapes(e){const t=Object.keys(Wt).filter(t=>!!e[t]),s=this.getLineStyles.bind(this),r={[Wt.Arc]:e=>ws.createArcs(e,s),[Wt.Circle]:e=>ws.createCircles(e),[Wt.Contour]:e=>ws.createContours(e,s),[Wt.Diamond]:e=>ws.createDiamonds(e),[Wt.Donut]:e=>ws.createDonuts(e),[Wt.Ellipse]:e=>ws.createEllipses(e),[Wt.Hexagon]:e=>ws.createHexagons(e),[Wt.Hole]:e=>ws.createHoles(e),[Wt.Line]:e=>ws.createLines(e,s),[Wt.Octagon]:e=>ws.createOctagons(e),[Wt.Outline]:e=>ws.createOutlines(e,s),[Wt.Oval]:e=>ws.createOvals(e),[Wt.Polyline]:e=>ws.createPolylines(e,s),[Wt.RectCenter]:e=>ws.createRectCenters(e),[Wt.RectCham]:e=>ws.createRectChams(e),[Wt.RectCorner]:e=>ws.createRectCorners(e),[Wt.RectRound]:e=>ws.createRectRounds(e),[Wt.Thermal]:e=>ws.createThermals(e),[Wt.Triangle]:e=>ws.createTriangles(e)};return t.map(t=>r[t](e)).flat()}getShapesByRef(e){if(e.StandardPrimitiveRef){const t=e.StandardPrimitiveRef.id,s=this.contentParser.getStandardByID(t);return s?this.getShapes({...e,...s}):[]}if(e.UserPrimitiveRef){const t=e.UserPrimitiveRef.id,s=this.contentParser.getUserSpecialByID(t);if(!s)return[];const r={...e,...s.UserSpecial};return this.getShapes(r)}return[]}getFeaturesShapes(e){const t={...e};return t.UserPrimitiveRef?this.getShapesByRef(t):(t.UserSpecial&&(Object.assign(t,t.UserSpecial),delete t.UserSpecial),this.getShapes(t))}getSetShapes(e){return e.Features?e.Features.map(e=>this.getFeaturesShapes(e)).flat(3):e.Hole?this.getShapes(e):e.Pad?e.Pad.map(e=>this.getShapesByRef(e)).flat():e.SlotCavity?this.getShapes(e.SlotCavity):[]}}class Ns{constructor(e){(0,m.A)(this,"shapeParser",void 0),this.shapeParser=e}getPins(e){if(!e)return[];const t=e.map(e=>{let t;t=e.StandardPrimitiveRef?this.shapeParser.getShapesByRef(e):this.shapeParser.getShapes(e);const s={number:e.number,type:e.type,electricalType:e.electricalType};return t?.map(e=>new ns(s,e))||[]});return t.flat()}static getMarkings(e){return e?.Marking?"object"===typeof e.Marking?[e.Marking]:e.Marking:[]}static getSilkScreen(e){return e?.Target?Array.isArray(e.Target)?e.Target:[e.Target]:[]}parseComponents(e){const t=new Map;return e.Component?.forEach(s=>{const r=s.layerRef;if(!r)return;const n=e.Package.find(e=>e.name===s.packageRef);if(!n)return;const i=this.getPins(n.Pin||[]),a=Ns.getSilkScreen(n.SilkScreen),o=Ns.getMarkings(n.AssemblyDrawing),l=[...a,...o].flat(),c=l.map(e=>this.shapeParser.getShapes(e)).flat(),h=this.shapeParser.getShapes(n),u=c.length>0?c:h,p=b.parseXMLID(s.refDes),d=Object.fromEntries(Object.entries({refDes:p,part:s.part,mountType:s.mountType,...b.parseNonstandardAttribute(s.NonstandardAttribute)}).filter(([,e])=>void 0!==e)),m={location:{...s.Location},...s.Xform},y=new Zt(d,m,i,u);t.has(r)||t.set(r,[]),t.get(r).push(y)}),t}}const ks="IPC-2581",Fs="Invalid IPC-2581 file format: missing IPC-2581 root element",zs="Invalid IPC-2581 file format: missing Content or Ecad sections";class Vs{constructor(e,t){if((0,m.A)(this,"result",void 0),(0,m.A)(this,"contentParser",void 0),(0,m.A)(this,"ecadParser",void 0),(0,m.A)(this,"shapeParser",void 0),(0,m.A)(this,"componentParser",void 0),!t?.[ks])throw new Error(Fs);const s=t[ks].Content,r=t[ks].Ecad;if(!s||!r)throw new Error(zs);this.result=new is(e),this.contentParser=new os(s),this.ecadParser=new ls(r),this.shapeParser=new Ss(this.contentParser),this.componentParser=new Ns(this.shapeParser)}adapt(){return this.setGeneralData(),this.setLayers(),this.setColors(),this.setLayersInfo(),this.setLayerFeatures(),this.setComponents(),this.setLayersOrder(),this.result}setGeneralData(){const e=this.ecadParser.getUnits();let t=null;const s=this.ecadParser.getCadDataStep();if(s?.Profile){const e={[Wt.Contour]:[s.Profile]};t=this.shapeParser.getShapes(e)}const r={units:e},n=new es(r,t||null);this.result.setGeneral(n)}setLayers(){const e=this.contentParser.getLayers(),t=this.ecadParser.getLayers(),s=e.length>0?e:t;s.forEach(e=>{""!==e&&this.result.addLayer(new ts(e))})}setColors(){this.result.forEachLayer(e=>{const t=this.contentParser.getColorByID(e.name);t&&e.setColor(t.Color)})}setLayersInfo(){const e=this.ecadParser.getCadDataLayers();e?.forEach(e=>{const t=e.name;if(!t)return;const s=this.ecadParser.getLayerInfoFromCadDataStackup(t),r={...e,...s};this.result.getLayer(t)?.setInfo(r)})}setLayerFeatures(){const e=this.ecadParser.getCadDataStep()?.LayerFeature;e?.forEach(e=>{const t=e.layerRef;for(let s=0;s<e.Set.length;s+=1){const r=e.Set[s],n=this.shapeParser.getSetShapes(r);n?.forEach(e=>{if(r.net){const s={...b.parseNonstandardAttribute(r.NonstandardAttribute),net:b.parseXMLID(r.net)},n=new ss(s,e);this.result.getLayer(t)?.addNet(n)}else{const s=b.parseNonstandardAttribute(r.NonstandardAttribute),n=new rs(s,e);this.result.getLayer(t)?.addNonFunctional(n)}})}})}setComponents(){const e=this.ecadParser.getCadDataStep();if(!e)return;const t=this.componentParser.parseComponents(e);t.forEach((e,t)=>{const s=this.result.getLayer(t);s&&e.forEach(e=>{s.addComponent(e)})})}setLayersOrder(){let e=0;this.result.forEachLayer(t=>{const s=t.getInfo().sequence??e;t.setOrder(Number(s)),e+=1})}}var Bs,Us,Hs,Xs,Ws,Gs,js,Ys,$s,Ks,Js,Qs,qs,Zs;(function(e){e["GERBER"]="gbr",e["EXCELLON_DRILL"]="drl",e["GERBER_JOB"]="gbrjob"})(Bs||(Bs={})),function(e){e["MILLIMETERS"]="MM",e["INCHES"]="IN"}(Us||(Us={})),function(e){e["DRAW"]="D01",e["MOVE"]="D02",e["FLASH"]="D03"}(Hs||(Hs={})),function(e){e["LINEAR"]="LINEAR",e["CLOCKWISE_ARC"]="CLOCKWISE_ARC",e["COUNTERCLOCKWISE_ARC"]="COUNTERCLOCKWISE_ARC"}(Xs||(Xs={})),function(e){e["LINEAR_INTERPOLATION"]="G01",e["CLOCKWISE_ARC"]="G02",e["COUNTERCLOCKWISE_ARC"]="G03",e["COMMENT"]="G04",e["POLYGON_AREA_START"]="G36",e["POLYGON_AREA_END"]="G37",e["MULTI_QUADRANT_MODE"]="G75",e["ABSOLUTE_COORDINATES"]="G90"}(Ws||(Ws={})),function(e){e["D10"]="D10",e["D11"]="D11",e["D12"]="D12",e["D13"]="D13",e["D14"]="D14",e["D15"]="D15",e["D16"]="D16",e["D17"]="D17",e["D18"]="D18",e["D19"]="D19",e["D20"]="D20"}(Gs||(Gs={})),function(e){e["END_OF_FILE"]="M02",e["END_OF_PROGRAM"]="M30"}(js||(js={})),function(e){e["CIRCLE"]="C",e["RECTANGLE"]="R",e["OBROUND"]="O",e["POLYGON"]="P",e["MACRO"]="MACRO"}(Ys||(Ys={})),function(e){e["COMPONENT_PAD"]="ComponentPad",e["COMPONENT_DRILL"]="ComponentDrill",e["VIA_PAD"]="ViaPad",e["VIA_DRILL"]="ViaDrill",e["CONDUCTOR"]="Conductor",e["MECHANICAL_DRILL"]="MechanicalDrill",e["THERMAL_PAD"]="ThermalPad",e["SOLDER_MASK"]="SolderMask",e["FIDUCIAL"]="Fiducial"}($s||($s={})),function(e){e["FILE_FUNCTION"]="TF",e["OBJECT"]="TO",e["APERTURE"]="TA",e["DELETE"]="TD"}(Ks||(Ks={})),function(e){e["COMPONENT"]="C",e["NET"]="N",e["PIN"]="P"}(Js||(Js={})),function(e){e[e["CIRCLE"]=1]="CIRCLE",e[e["OUTLINE"]=4]="OUTLINE",e[e["REGULAR_POLYGON"]=5]="REGULAR_POLYGON",e[e["MOIRE_PATTERN"]=6]="MOIRE_PATTERN",e[e["THERMAL_PATTERN"]=7]="THERMAL_PATTERN",e[e["VECTOR_LINE"]=20]="VECTOR_LINE",e[e["CENTER_LINE"]=21]="CENTER_LINE"}(Qs||(Qs={})),function(e){e["CLEAR"]="clear",e["DARK"]="dark"}(qs||(qs={})),function(e){e["G_CODE"]="G_CODE",e["M_CODE"]="M_CODE",e["D_OPERATION"]="D_OPERATION",e["D_APERTURE_SELECT"]="D_APERTURE_SELECT",e["COORDINATES"]="COORDINATES",e["FORMAT_SPEC"]="FORMAT_SPEC",e["UNITS"]="UNITS",e["LAYER_POLARITY"]="LAYER_POLARITY",e["APERTURE_DEF"]="APERTURE_DEF",e["APERTURE_MACRO"]="APERTURE_MACRO",e["APERTURE_MACRO_COMMENT"]="APERTURE_MACRO_COMMENT",e["APERTURE_MACRO_PRIMITIVE"]="APERTURE_MACRO_PRIMITIVE",e["FILE_ATTRIBUTE"]="FILE_ATTRIBUTE",e["OBJECT_ATTRIBUTE"]="OBJECT_ATTRIBUTE",e["APERTURE_ATTRIBUTE"]="APERTURE_ATTRIBUTE",e["ATTRIBUTE_DELETE"]="ATTRIBUTE_DELETE",e["COMMENT"]="COMMENT",e["DRILL_TOOL_DEF"]="DRILL_TOOL_DEF",e["DRILL_TOOL_SELECT"]="DRILL_TOOL_SELECT",e["DRILL_FORMAT"]="DRILL_FORMAT",e["DRILL_METRIC"]="DRILL_METRIC",e["DRILL_HEADER_END"]="DRILL_HEADER_END",e["DRILL_SEQUENCE"]="DRILL_SEQUENCE",e["DRILL_COMMENT_SEMICOLON"]="DRILL_COMMENT_SEMICOLON",e["EMPTY"]="EMPTY",e["UNKNOWN"]="UNKNOWN"}(Zs||(Zs={}));class er extends D{}class tr extends x{}class sr extends _{}class rr extends I{get name(){return this.getInfo().N}}class nr extends w{get name(){return"NonFunctional"}}class ir extends S{get type(){return B.GERBER}}class ar{}var or;s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698),s(8237);class lr{static classifyLine(e){const t=e.trim();return t?t.startsWith(";")?this.parseDrillComment(t):t.match(/^T\d+C\d*\.?\d+/)?this.parseDrillToolDefinition(t):t.match(/^T\d+$/)?this.parseDrillToolSelection(t):t.startsWith("FMAT,")?this.parseDrillFormat(t):t.startsWith("METRIC,")?this.parseDrillMetric(t):"%"===t?this.parseDrillHeaderEnd(t):t.match(/^N\d+$/)?this.parseDrillSequence(t):t.startsWith("%FS")?this.parseFormatSpec(t):t.startsWith("%MO")?this.parseUnits(t):t.startsWith("%LP")?this.parseLayerPolarity(t):t.startsWith("%TF")?this.parseFileAttribute(t):t.startsWith("%TO")?this.parseObjectAttribute(t):t.startsWith("%TD")?this.parseAttributeDelete(t):t.startsWith("%TA")?this.parseApertureAttribute(t):t.startsWith("%ADD")?this.parseApertureDefinition(t):t.startsWith("G04")&&t.includes("#@!")?this.parseAttribute(t):t.startsWith("G04")?this.parseComment(t):t.startsWith("%AM")?this.parseApertureMacro(t):t.match(/^0\s+.+\*$/)?this.parseApertureMacroComment(t):t.match(/^[\d,$+\-*.]+\*%?$/)?this.parseApertureMacroPrimitive(t):t.match(/^G\d+/)?this.parseGCode(t):t.match(/^M\d+/)?this.parseMCode(t):t.match(/^D\d+\*?$/)?this.parseApertureSelection(t):t.match(/[XY]\d+/)&&t.match(/D\d+/)?this.parseOperation(t):t.match(/^[XY]\d+/)?this.parseCoordinates(t):{type:Zs.UNKNOWN,raw:e}:{type:Zs.EMPTY,raw:e}}static parseApertureMacro(e){const t=e.match(/%AM([^*]+)\*/);if(!t)return{type:Zs.UNKNOWN,raw:e};const s=t[1];return this.isComplexMacroWithComments(e)?this.parseComplexMacro(e,s):this.isRoundedRectMacro(e)?this.parseRoundedRectMacro(e,s):this.isFreePolyMacro(e)?this.parseFreePolyMacro(e,s):{type:Zs.APERTURE_MACRO,raw:e}}static isRoundedRectMacro(e){return/^%AM[^*]+\*(?:(?:1|20|21),[^*]+\*)+%$/.test(e)&&!e.includes("*4,")}static isFreePolyMacro(e){return/^%AM[^*]+\*4,1,\d+,[^*]+\*%$/.test(e)}static parseRoundedRectMacro(e,t){const s=e.match(/%AM([^*]+)\*(.*)/);if(!s)return{type:Zs.APERTURE_MACRO,raw:e};const r=s[2],n=[],i=r.replaceAll("*%","").split("*").filter(e=>e.trim());return i.forEach(e=>{const t=e.split(",").map(e=>parseFloat(e.trim()));0!==t.length&&n.push({type:t[0],exposure:t[1]?qs.DARK:qs.CLEAR,parameters:t.slice(2)})}),{type:Zs.APERTURE_MACRO,raw:e,content:{macro:{type:Ys.MACRO,name:t,primitives:n}}}}static parseFreePolyMacro(e,t){const s=e.slice(e.indexOf("*")+1,e.lastIndexOf("*")),r=s.split("*").filter(e=>e.length>0),n=[];return r.forEach(e=>{const t=e.split(",");if(0===t.length)return;const s=parseInt(t[0],10),r=s,i="1"===t[1]?qs.DARK:qs.CLEAR;if(4===s){const e=parseInt(t[2],10),s=[];for(let r=0;r<e;r+=1){const e=t[3+2*r],n=t[4+2*r];e&&n&&(s.push(parseFloat(e)||0),s.push(parseFloat(n)||0))}const a=t[3+2*e],o=a?.startsWith("$")?0:parseFloat(a||"0");n.push({type:r,exposure:i,parameters:[e,...s,o]})}else n.push({type:r,exposure:i,parameters:t.slice(2).map(e=>parseFloat(e)||0)})}),{type:Zs.APERTURE_MACRO,raw:e,content:{macro:{type:Ys.MACRO,name:t,primitives:n}}}}static isComplexMacroWithComments(e){return e.includes("*0 ")&&/\*[1-9]\d*,/.test(e)}static parseComplexMacro(e,t){const s=e.slice(e.indexOf("*")+1,e.lastIndexOf("*")),r=s.split("*").filter(e=>e.length>0),n=[],i=[];return r.forEach(e=>{const t=e.trim();if(t.startsWith("0 "))i.push(t.substring(2).trim());else if(t.match(/^[\d,$+\-*.]+$/)){const e=t.split(",");if(0===e.length)return;const s=parseInt(e[0],10);if(Number.isNaN(s))return;const r=s,i="1"===e[1]?qs.DARK:qs.CLEAR;if(4===s){const t=this.parseVariableOrNumber(e[2]),s=[];for(let r=0;r<t;r+=1){const t=e[3+2*r],n=e[4+2*r];t&&n&&(s.push(this.parseVariableOrNumber(t)),s.push(this.parseVariableOrNumber(n)))}const a=e[3+2*t],o=this.parseVariableOrNumber(a||"0");n.push({type:r,exposure:i,parameters:[t,...s,o]})}else{const t=e.slice(2).map(e=>e.includes("+")?this.parseVariableExpression(e):this.parseVariableOrNumber(e));n.push({type:r,exposure:i,parameters:t})}}}),{type:Zs.APERTURE_MACRO,raw:e,content:{macro:{type:Ys.MACRO,name:t,primitives:n},comment:i.join("; ")}}}static parseVariableOrNumber(e){return e.startsWith("$")?0:parseFloat(e)||0}static parseVariableExpression(e){if(e.includes("$"))return 0;if(e.includes("+")){const t=e.split("+");return t.reduce((e,t)=>e+(parseFloat(t.trim())||0),0)}if(e.includes("*")){const t=e.split("*");return t.reduce((e,t)=>e*(parseFloat(t.trim())||1),1)}return parseFloat(e)||0}static parseFormatSpec(e){const t=e.match(/%FS([LT])([AI])X(\d+)Y(\d+)\*?%?/);return{type:Zs.FORMAT_SPEC,raw:e,content:{format:t?{leading:t[1],absolute:"A"===t[2],xFormat:t[3],yFormat:t[4]}:void 0}}}static parseUnits(e){const t=e.includes("MM")?Us.MILLIMETERS:Us.INCHES;return{type:Zs.UNITS,raw:e,content:{units:t}}}static parseApertureDefinition(e){const t=e.match(/%AD(D\d+)([CROP]),([^*]*)\*?%?/);if(t){const s=t[3],r=s.split(/[X,]/).map(e=>parseFloat(e)).filter(e=>!Number.isNaN(e));return{type:Zs.APERTURE_DEF,raw:e,content:{aperture:{code:t[1],type:t[2],parameters:r}}}}const s=e.match(/%AD(D\d+)([A-Za-z][A-Za-z0-9]*),?([^*]*)\*?%?/);if(s){const t=s[1],r=s[2],n=s[3]||"",i=n?n.split(/[X,]/).map(e=>parseFloat(e.trim())).filter(e=>!Number.isNaN(e)):[];return{type:Zs.APERTURE_DEF,raw:e,content:{macro:{type:Ys.MACRO,code:t,name:r,primitives:[]},parameters:i.map(e=>e.toString())}}}return{type:Zs.APERTURE_DEF,raw:e}}static parseAttribute(e){const t=e.match(/G04\s*#@!\s*(TF|TO|TA|TD)\.?([^,*]*),?([^*]*)/),s={[Ks.FILE_FUNCTION]:Zs.FILE_ATTRIBUTE,[Ks.OBJECT]:Zs.OBJECT_ATTRIBUTE,[Ks.APERTURE]:Zs.APERTURE_ATTRIBUTE,[Ks.DELETE]:Zs.ATTRIBUTE_DELETE};let r=Zs.FILE_ATTRIBUTE;return t&&(r=s[t[1]]),{type:r,raw:e,content:{attribute:t?{type:t[1],name:t[2],value:t[3]}:void 0}}}static parseComment(e){return{type:Zs.COMMENT,raw:e,content:{comment:e.substring(3).trim()}}}static parseGCode(e){const t=e.match(/^(G\d+)/);return{type:Zs.G_CODE,raw:e,content:{gCode:t?t[1]:void 0}}}static parseMCode(e){const t=e.match(/^(M\d+)/);return{type:Zs.M_CODE,raw:e,content:{mCode:t?t[1]:void 0}}}static parseApertureSelection(e){const t=e.match(/^D(\d+)/);return{type:Zs.D_APERTURE_SELECT,raw:e,content:{dCode:t?`D${t[1]}`:void 0}}}static parseOperation(e){const t=this.extractCoordinates(e),s=e.match(/D(\d+)/),r=e.match(/(G\d+)/);return{type:Zs.D_OPERATION,raw:e,content:{coordinates:t,dCode:s?`D${s[1]}`:void 0,gCode:r?r[1]:void 0}}}static parseCoordinates(e){return{type:Zs.COORDINATES,raw:e,content:{coordinates:this.extractCoordinates(e)}}}static extractCoordinates(e){const t=e.match(/X([-+]?\d*\.?\d+)/),s=e.match(/Y([-+]?\d*\.?\d+)/),r=e.match(/I([-+]?\d*\.?\d+)/),n=e.match(/J([-+]?\d*\.?\d+)/),i=e.match(/D(\d+)/),a=e=>{if(!e)return;if(e.includes(".")){const t=parseFloat(e);return Number.isNaN(t)?void 0:t}const t=parseInt(e,10);return Number.isNaN(t)?void 0:t/1e6};return{x:a(t?.[1])||0,y:a(s?.[1])||0,i:a(r?.[1]),j:a(n?.[1]),dCode:i?.[1]?`D${i[1]}`:void 0}}static parseDrillComment(e){return{type:Zs.DRILL_COMMENT_SEMICOLON,raw:e,content:{comment:e.substring(1).trim()}}}static parseDrillToolDefinition(e){const t=e.match(/^T(\d+)C(\d*\.?\d+)/);return{type:Zs.DRILL_TOOL_DEF,raw:e,content:{toolNumber:t?parseInt(t[1],10):void 0,diameter:t?parseFloat(t[2]):void 0}}}static parseDrillToolSelection(e){const t=e.match(/^T(\d+)$/);return{type:Zs.DRILL_TOOL_SELECT,raw:e,content:{toolNumber:t?parseInt(t[1],10):void 0}}}static parseDrillFormat(e){const t=e.match(/^FMAT,(\d+)/);return{type:Zs.DRILL_FORMAT,raw:e,content:{drillFormat:t?parseInt(t[1],10):void 0}}}static parseDrillMetric(e){return{type:Zs.DRILL_METRIC,raw:e,content:{units:Us.MILLIMETERS,zeroSuppression:e.includes("TZ")?"trailing":"leading"}}}static parseDrillHeaderEnd(e){return{type:Zs.DRILL_HEADER_END,raw:e}}static parseDrillSequence(e){const t=e.match(/^N(\d+)$/);return{type:Zs.DRILL_SEQUENCE,raw:e,content:{sequenceNumber:t?parseInt(t[1],10):void 0}}}static parseLayerPolarity(e){const t=e.match(/%LP([DC])\*?%?/);let s;return t&&(s="D"===t[1]?qs.DARK:qs.CLEAR),{type:Zs.LAYER_POLARITY,raw:e,content:{polarity:s}}}static parseFileAttribute(e){const t=e.match(/%TF\.([^,*]+),?([^*]*)\*?%?/);let s="",r="";return t&&([,s,r]=t),{type:Zs.FILE_ATTRIBUTE,raw:e,content:{attribute:{type:Ks.FILE_FUNCTION,name:s,value:r}}}}static parseObjectAttribute(e){const t=e.match(/%TO\.([^,*]+),?([^*]*)\*?%?/);let s="",r="";return t&&([,s,r]=t),{type:Zs.OBJECT_ATTRIBUTE,raw:e,content:{attribute:{type:Ks.OBJECT,name:s,value:r}}}}static parseApertureMacroComment(e){const t=e.substring(1).replace(/\*$/,"").trim();return{type:Zs.APERTURE_MACRO_COMMENT,raw:e,content:{comment:t}}}static parseApertureMacroPrimitive(e){const t=e.replace(/\*%?$/,"").trim(),s=t.split(",").map(e=>e.trim());return{type:Zs.APERTURE_MACRO_PRIMITIVE,raw:e,content:{primitiveType:s[0]?parseInt(s[0],10):void 0,parameters:s.slice(1)}}}static parseApertureAttribute(e){const t=e.match(/%TA\.([^,*]+),?([^*]*)\*?%?/);let s="",r="";return t&&([,s,r]=t),{type:Zs.APERTURE_ATTRIBUTE,raw:e,content:{attribute:{type:Ks.APERTURE,name:s,value:r}}}}static parseAttributeDelete(e){return{type:Zs.ATTRIBUTE_DELETE,raw:e,content:{attribute:{type:Ks.DELETE,name:"DeleteAll",value:""}}}}}class cr{static createShape(e){return this.isMacroAperture(e)?this.createMacroShape(e):this.isFlashOperation(e)?this.createSimpleShape(e):this.isDrawOperation(e)?this.createPolyline(e):null}static isMacroAperture(e){const{aperture:t}=e,s=t.type===Ys.MACRO,r="primitives"in t;return s&&r}static isFlashOperation(e){const{aperture:t,coords:s}=e,r=1===s.length,n=s[0]?.dCode===Hs.FLASH,i="parameters"in t;return r&&n&&i}static isDrawOperation(e){const{aperture:t,coords:s}=e,r=s.length>1,n="parameters"in t;return r&&n}static createMacroShape(e){const{aperture:t}=e,s=t.parameters||e.parameters||[],r=this.substituteMacroParameters(t,s),n={...e,aperture:r};return this.isRoundedRectMacro(t.name)?this.createRoundedRectangleMacro(n):this.isFreePolyMacro(t.name)?this.createFreePolyMacro(n):null}static isRoundedRectMacro(e){return/^round(ed)?[_-]?rect.{0,}$/i.test(e)}static isFreePolyMacro(e){return/^free[_-]?poly\d*$/i.test(e)}static substituteMacroParameters(e,t){const s=e.primitives?.map(e=>{const s=e.parameters.map(e=>{if("number"===typeof e)return e;if("string"===typeof e){if(e.includes("$")&&e.includes("+"))return this.evaluateExpression(e,t);if(e.startsWith("$")){const s=parseInt(e.substring(1),10)-1;return s<t.length?parseFloat(t[s]):0}return parseFloat(e)||0}return e});return{...e,parameters:s}})||[];return{...e,primitives:s}}static evaluateExpression(e,t){let s=e;const r=e.match(/\$(\d+)/g);if(r&&r.forEach(e=>{const r=parseInt(e.substring(1),10)-1,n=r<t.length?t[r]:"0";s=s.replace(e,n)}),s.includes("+")){const e=s.split("+");return e.reduce((e,t)=>e+(parseFloat(t.trim())||0),0)}if(s.includes("*")){const e=s.split("*");return e.reduce((e,t)=>e*(parseFloat(t.trim())||1),1)}return parseFloat(s)||0}static createRoundedRectangleMacro(e){const{coords:t,aperture:s}=e,r={x:t[0].x,y:t[0].y},n=s.primitives?.filter(({type:e})=>e===Qs.VECTOR_LINE)||[],i=s.primitives?.filter(({type:e})=>e===Qs.CIRCLE)||[],a=Math.max(...i.map(e=>e.parameters[0])),o=Math.max(...n.map(e=>e.parameters[0])),l=Math.max(...n.map(e=>{const[,t,s,r,n]=e.parameters;return L.getDistance({x:t,y:s},{x:r,y:n})})),c=Math.max(...n.map(e=>e.parameters[5]||0));return new Ms({center:r},{width:o,height:l,radius:a,rotation:c,upperLeft:!0,upperRight:!0,lowerLeft:!0,lowerRight:!0})}static createFreePolyMacro(e){const{coords:t,aperture:s}=e,r={x:t[0].x,y:t[0].y},n=s.primitives?.find(({type:e})=>e===Qs.OUTLINE);if(!n)return null;const[i,...a]=n.parameters,o=[];for(let p=0;p<i;p+=1){const e=a[2*p]||0,t=a[2*p+1]||0;o.push({x:e,y:t})}0===o.length&&o.push({x:0,y:0});const l=o[0],c=o[o.length-1];l.x===c.x&&l.y===c.y||o.push({...l});const[h,...u]=o;return new vs({location:r,begin:h,path:u},{})}static createSimpleShape(e){const t=this.SIMPLE_SHAPE_CREATORS[e.aperture.type];return t?t(e):null}static createPolyline(e){const{coords:t,aperture:s}=e,r=t.map((e,s)=>{const r={x:e.x,y:e.y};if((void 0!==e.i||void 0!==e.j)&&e.mode){const n=s>0?t[s-1]:e,i=n.x+(e.i||0),a=n.y+(e.j||0);r.centerX=i,r.centerY=a;const o=e.mode===Xs.CLOCKWISE_ARC;r.clockwise=o}return r}),[n,...i]=r;return new vs({location:{x:0,y:0},begin:n||{x:0,y:0},path:i},{lineWidth:Math.max(...s.parameters)})}static createOval(e){const{coords:t,aperture:s}=e,r={x:t[0].x,y:t[0].y},[n,i]=s.parameters;return new Ts({center:r},{width:n,height:i})}static createCircle(e){const{coords:t,aperture:s}=e,r={x:t[0].x,y:t[0].y},n=s.parameters[0];return new ys({center:r},{diameter:n})}static createRectangle(e){const{coords:t,aperture:s}=e,r={x:t[0].x,y:t[0].y},[n,i]=s.parameters;return new Ps({center:r},{width:n,height:i})}static createPolygon(e){const{coords:t,aperture:s}=e,r={x:t[0].x,y:t[0].y},[n,i,a]=s.parameters;if(3===i){const e=new xs({center:r},{base:n,height:n,rotation:a});return e}if(4===i){const e=n/Math.sqrt(2);return new Ps({center:r},{width:e,height:e,rotation:a})}return new ys({center:r},{diameter:n})}}or=cr,(0,m.A)(cr,"SIMPLE_SHAPE_CREATORS",{[Ys.CIRCLE]:or.createCircle,[Ys.RECTANGLE]:or.createRectangle,[Ys.OBROUND]:or.createOval,[Ys.POLYGON]:or.createPolygon});class hr{static createElement(e){const{shape:t,attributes:s,elementFunction:r}=e,n={...s};return r&&(n.function=r),s.C?new er(n,[t]):s.N?new rr(n,t):new nr(n,t)}}class ur{static parseGerberLayer(e,t){const s=ur.parseGBRLines(t),r=ur.initializeParserState();return ur.processGerberLines(s,r),ur.buildLayer(e,r)}static initializeParserState(){return{layerInfo:{},gcodeOptions:{},currentApertures:{},currentMacros:{},allElements:[],currentObjectAttributes:{},currentApertureFunction:null,currentApertureDCode:null,currentElement:null,notParsed:[]}}static processGerberLines(e,t){e.forEach((e,s)=>{const r=lr.classifyLine(e);ur.SKIPPABLE_LINE_TYPES.has(r.type)||(ur.handleElementBreaking(r,t),r.type!==Zs.UNKNOWN?ur.processLineByType(r,t):console.warn(`Unknown Gerber line at ${s+1}: ${e}`))})}static handleElementBreaking(e,t){const s=!ur.ELEMENT_BREAKING_TYPES.has(e.type);s&&t.currentElement&&(t.allElements.push(t.currentElement),t.currentElement=null)}static processLineByType(e,t){switch(e.type){case Zs.FILE_ATTRIBUTE:ur.handleFileAttribute(e,t);break;case Zs.FORMAT_SPEC:ur.handleFormatSpec(e,t);break;case Zs.UNITS:ur.handleUnits(e,t);break;case Zs.LAYER_POLARITY:ur.handleLayerPolarity(e,t);break;case Zs.G_CODE:ur.handleGCode(e,t);break;case Zs.APERTURE_ATTRIBUTE:ur.handleApertureAttribute(e,t);break;case Zs.APERTURE_DEF:ur.handleApertureDef(e,t);break;case Zs.D_APERTURE_SELECT:ur.handleDApertureSelect(e,t);break;case Zs.ATTRIBUTE_DELETE:ur.handleAttributeDeleteLine(e,t);break;case Zs.OBJECT_ATTRIBUTE:ur.handleObjectAttributeLine(e,t);break;case Zs.D_OPERATION:ur.handleDOperation(e,t);break;case Zs.APERTURE_MACRO:ur.handleApertureMacro(e,t);break;default:t.notParsed.push(e)}}static handleFileAttribute(e,t){const s=e.content?.attribute;s&&(t.layerInfo[s.name]=s.value)}static handleFormatSpec(e,t){t.layerInfo.format=e.content?.format}static handleUnits(e,t){t.layerInfo.units=e.content?.units}static handleLayerPolarity(e,t){t.layerInfo.polarity=e.content?.polarity}static handleGCode(e,t){t.gcodeOptions={...t.gcodeOptions,...ur.processGCode(e.content?.gCode)}}static handleApertureAttribute(e,t){const s=e.content?.attribute;s&&(t.currentApertureFunction=s.value)}static handleApertureDef(e,t){e.content?.aperture&&ur.processApertureDefinition(e,t),e.content?.macro&&ur.processMacroDefinition(e,t)}static processApertureDefinition(e,t){const s=e.content.aperture;t.currentApertures[s.code]=s,t.currentApertureFunction&&(t.currentApertures[s.code].apertureFunction=t.currentApertureFunction)}static processMacroDefinition(e,t){const s={...t.currentMacros[e.content.macro.name],parameters:e.content.parameters};t.currentApertures[e.content.macro.code]=s,t.currentApertureFunction&&(t.currentApertures[e.content.macro.code].apertureFunction=t.currentApertureFunction)}static handleDApertureSelect(e,t){const s=e.content?.dCode;s&&(t.currentApertureDCode=s)}static handleAttributeDeleteLine(e,t){const s=e.content?.attribute;s&&(t.currentObjectAttributes=ur.processObjectAttribute(t.currentObjectAttributes,s))}static handleObjectAttributeLine(e,t){const s=e.content?.attribute;s&&(t.currentObjectAttributes=ur.processObjectAttribute(t.currentObjectAttributes,s))}static handleDOperation(e,t){const s=e.content?.coordinates;s&&(s.mode=t.gcodeOptions.interpolationMode||Xs.LINEAR,ur.shouldBreakCurrentElement(s,t)&&(t.allElements.push(t.currentElement),t.currentElement=null),t.currentElement||(t.currentElement={coords:[],apertureDCode:t.currentApertureDCode,attributes:{...t.currentObjectAttributes}}),t.currentElement.coords.push(s))}static shouldBreakCurrentElement(e,t){return e&&[Hs.FLASH,Hs.MOVE].includes(e.dCode)&&null!==t.currentElement}static handleApertureMacro(e,t){const s=e.content?.macro;s&&(t.currentMacros[s.name]=s)}static buildLayer(e,t){const s=new sr(e);s.setInfo(t.layerInfo);const r=ur.createPCBElements(t);return ur.addElementsToLayer(s,r),ur.logDebugInfo(t,r),s}static createPCBElements(e){const t=[];return e.allElements.forEach(s=>{const r=ur.createPCBElement(s,e);r&&t.push(r)}),t}static createPCBElement(e,t){const s=t.currentApertures[e.apertureDCode];if(!s)return console.warn(`Aperture not found for D-code: ${e.apertureDCode}`),null;const r={aperture:s,coords:e.coords},n=cr.createShape(r);if(!n)return console.warn(`Shape could not be created for element with D-code: ${e.apertureDCode}`),null;const i=hr.createElement({elementFunction:s.apertureFunction,attributes:e.attributes,shape:n});return i||(console.warn(`PCB Element could not be created for shape with D-code: ${e.apertureDCode}`),null)}static addElementsToLayer(e,t){t.forEach(t=>{t instanceof er?e.addComponent(t):t instanceof rr?e.addNet(t):e.addNonFunctional(t)})}static logDebugInfo(e,t){e.notParsed.length&&console.warn("Some Gerber lines were not parsed:",e.notParsed),console.log("currentMacros",e.currentMacros),console.log("currentApertures",e.currentApertures),console.log("allElements",e.allElements),console.log("allShapes",t.map(e=>e))}static processGCode(e){return e&&ur.GCODE_OPTIONS_MAP[e]||{}}static processObjectAttribute(e,t){return t.type===Ks.DELETE?ur.handleAttributeDeleteType(e,t):t.type===Ks.OBJECT?ur.handleAttributeSetType(e,t):e}static handleAttributeDeleteType(e,t){if(t.value&&Object.values(Js).includes(t.value)){const s={...e};return delete s[t.name],s}return{}}static handleAttributeSetType(e,t){return{...e,[t.name]:t.value||""}}static parseGBRLines(e){const t=e.split(/\r?\n/),s=[];let r=!0;return t.forEach(e=>{r?s.push(e):s[s.length-1]+=e,r=ur.isLineComplete(e,r)}),s}static isLineComplete(e,t){return!(e.startsWith("%")||!t)||e.endsWith("%")}}(0,m.A)(ur,"GCODE_OPTIONS_MAP",{[Ws.LINEAR_INTERPOLATION]:{interpolationMode:Xs.LINEAR},[Ws.CLOCKWISE_ARC]:{interpolationMode:Xs.CLOCKWISE_ARC},[Ws.COUNTERCLOCKWISE_ARC]:{interpolationMode:Xs.COUNTERCLOCKWISE_ARC},[Ws.MULTI_QUADRANT_MODE]:{circularMode:!0,multiQuadrant:!0}}),(0,m.A)(ur,"SKIPPABLE_LINE_TYPES",new Set([Zs.EMPTY,Zs.COMMENT,Zs.M_CODE])),(0,m.A)(ur,"ELEMENT_BREAKING_TYPES",new Set([Zs.D_OPERATION,Zs.G_CODE]));class pr{static parseDrillLayer(e,t){const s=t.split(/\r?\n/),r=pr.initializeDrillParserState();return pr.processDrillLines(s,r),pr.buildDrillLayer(e,r)}static initializeDrillParserState(){return{layerInfo:{},currentTools:{},currentTool:null,drillHits:[],attributes:{},format:null,units:null,notParsed:[]}}static processDrillLines(e,t){e.forEach((e,s)=>{const r=lr.classifyLine(e);pr.DRILL_SKIPPABLE_LINE_TYPES.has(r.type)||(r.type!==Zs.UNKNOWN?pr.processDrillLineByType(r,t):console.warn(`Unknown Drill line at ${s+1}: ${e}`))})}static processDrillLineByType(e,t){switch(e.type){case Zs.DRILL_FORMAT:pr.handleDrillFormat(e,t);break;case Zs.DRILL_METRIC:pr.handleDrillMetric(e,t);break;case Zs.DRILL_TOOL_DEF:pr.handleDrillToolDef(e,t);break;case Zs.DRILL_TOOL_SELECT:pr.handleDrillToolSelect(e,t);break;case Zs.COORDINATES:pr.handleDrillCoordinates(e,t);break;case Zs.G_CODE:pr.handleDrillGCode(e,t);break;case Zs.M_CODE:pr.handleDrillMCode(e,t);break;case Zs.DRILL_COMMENT_SEMICOLON:pr.handleDrillComment(e,t);break;case Zs.DRILL_SEQUENCE:pr.handleDrillSequence(e,t);break;default:t.notParsed.push(e)}}static handleDrillFormat(e,t){const s=e.content?.drillFormat;void 0!==s&&(t.layerInfo.drillFormat=s,2===s&&(t.format={leading:"2",trailing:"4"}))}static handleDrillMetric(e,t){t.units=e.content?.units||Us.MILLIMETERS,t.layerInfo.units=t.units,t.layerInfo.zeroSuppression=e.content?.zeroSuppression||"trailing"}static handleDrillToolDef(e,t){const s=e.content?.toolNumber,r=e.content?.diameter;void 0!==s&&void 0!==r&&(t.currentTools[s]={diameter:r,apertureFunction:t.layerInfo.nextApertureFunction},delete t.layerInfo.nextApertureFunction)}static handleDrillToolSelect(e,t){const s=e.content?.toolNumber;void 0!==s&&(t.currentTool=s)}static handleDrillCoordinates(e,t){const s=e.content?.coordinates;if(s&&null!==t.currentTool){const e=t.units===Us.MILLIMETERS?1:25.4;t.drillHits.push({x:(s.x||0)*e,y:(s.y||0)*e,tool:t.currentTool})}}static handleDrillGCode(e,t){const s=e.content?.gCode;s&&(t.layerInfo.gCode=s)}static handleDrillMCode(e,t){const s=e.content?.mCode;s&&(t.layerInfo.mCode=s)}static handleDrillComment(e,t){const s=e.content?.comment;if(s&&s.includes("#@!")){const e=s.match(/#@!\s*(TF|TO|TA)\.([^,]+),?(.*)$/);if(e){const[,s,r,n]=e;if(s===Ks.APERTURE&&"AperFunction"===r){const e=n;t.layerInfo.nextApertureFunction=e}else s===Ks.FILE_FUNCTION?t.layerInfo[r]=n:s===Ks.OBJECT&&(t.attributes[r]=n)}}}static handleDrillSequence(e,t){const s=e.content?.sequenceNumber;void 0!==s&&(t.layerInfo.sequenceNumber=s)}static buildDrillLayer(e,t){const s=new sr(e);s.setInfo(t.layerInfo);const r=pr.createDrillElements(t);return pr.addElementsToLayer(s,r),pr.logDrillDebugInfo(t,r),s}static createDrillElements(e){const t=[];return e.drillHits.forEach(s=>{const r=e.currentTools[s.tool];if(!r)return void console.warn(`Tool ${s.tool} not found for drill hit at ${s.x}, ${s.y}`);const n={aperture:{type:"C",parameters:[r.diameter],code:`T${s.tool}`,apertureFunction:r.apertureFunction},coords:[{x:s.x,y:s.y,dCode:"D03"}]},i=cr.createShape(n);if(i){const s=hr.createElement({elementFunction:r.apertureFunction||"ComponentPad",attributes:{...e.attributes},shape:i});s&&t.push(s)}}),t}static addElementsToLayer(e,t){t.forEach(t=>{t instanceof er?e.addComponent(t):t instanceof rr?e.addNet(t):e.addNonFunctional(t)})}static logDrillDebugInfo(e,t){e.notParsed.length&&console.warn("Some Drill lines were not parsed:",e.notParsed),console.log("Drill Layer Info:",e.layerInfo),console.log("Drill Tools:",e.currentTools),console.log("Drill Hits Count:",e.drillHits.length),console.log("Drill Elements Created:",t.length);const s=e.drillHits.reduce((e,t)=>(e[t.tool]=(e[t.tool]||0)+1,e),{});console.log("Hits per tool:",s)}}(0,m.A)(pr,"DRILL_SKIPPABLE_LINE_TYPES",new Set([Zs.EMPTY,Zs.DRILL_HEADER_END]));class dr{static parseGerberJobFile(e){try{const t=JSON.parse(e);return t.Header?.CreationDate&&(t.Header.CreationDate=new Date(t.Header.CreationDate)),t}catch(t){return console.error("Error parsing Gerber Job file:",t),null}}}class mr extends ar{constructor(e,t){super(),(0,m.A)(this,"gerberData",void 0),(0,m.A)(this,"result",void 0),this.gerberData=t,this.result=new ir(e)}adapt(){return this.processAllFiles(),this.setLayersOrder(),this.setLayersColor(),this.result}processAllFiles(){const e={};Object.entries(this.gerberData).forEach(([t,s])=>{const r=ae.getFileExtension(t);r!==Bs.GERBER_JOB?this.parseLayer(t,s):Object.assign(e,dr.parseGerberJobFile(s))}),this.parseGerberGeneral(e),this.updateLayers(e)}parseLayer(e,t){const s=ae.getFileExtension(e);if(!s)return;const r={[Bs.GERBER]:ur.parseGerberLayer,[Bs.EXCELLON_DRILL]:pr.parseDrillLayer};if(!r[s])return void console.warn(`Unknown file type: ${s}`);const n=r[s](e,t);this.result.addLayer(n)}parseGerberGeneral(e){const{Header:t,GeneralSpecs:s,DesignRules:r}=e,n={...t,...s,...Object.fromEntries(r?.map(e=>[e.Layers,e])||[])},i=new tr(n,[]);this.result.setGeneral(i)}updateLayers(e){const{FilesAttributes:t,MaterialStackup:s}=e;t?.forEach(e=>{const t=this.result.getLayer(e.Path);if(!t)return;const{FilePolarity:s,FileFunction:r}=e;t.setInfo({FileFunction:r,FilePolarity:s})}),s?.forEach((e,t)=>{const s=this.result.findLayer(t=>{const s=t.getInfo().FileFunction.split(","),r=s.pop(),n=s.shift();if(!n||!r)return!1;const i=e.Type.toLocaleLowerCase().includes(n.toLocaleLowerCase());if(!i)return!1;const a=e.Name.toLocaleLowerCase().includes(r?.toLocaleLowerCase());return!!a});if(!s)return void console.warn(`Layer is not found while updating stackup: ${e.Name}`);const{Color:r,...n}=e;s.setInfo(n),s.setOrder(t+1)})}setLayersOrder(){let e=0;this.result.forEachLayer(t=>{const s=t.getOrder();s&&(t.setOrder(e),e+=1)})}setLayersColor(){this.result.forEachLayer(e=>{const t={r:Math.floor(256*Math.random()),g:Math.floor(256*Math.random()),b:Math.floor(256*Math.random())};e.setColor(t)})}}class yr{static createAdapter(e,t){const s=ae.detectFileType(e),r={[ne.GERBER_ARCHIVE]:mr,[ne.GERBER_FILE]:mr,[ne.IPC2581]:Vs},n=r[s];return n?new n(e,t):null}}var vr=s(223);const fr={class:"pcb-view"};var Er=(0,n.pM)({__name:"PCBView",setup(e){const t=(0,d.KR)();let s=null;const r=(0,d.IJ)([]),i=(0,d.IJ)(null),a=(0,d.IJ)([]),o=(0,d.IJ)(null),l=(0,d.KR)(!1),c=(0,n.EW)(()=>o.value?o.value.getInfo():i.value&&i.value.getGeneral()?.getInfo()||null);(0,n.sV)(()=>{const e=t.value?.pcbCanvas;e&&(s=new F(e),s.draw(),s.addEventListener("elementClick",e=>{const t=e,s=t.detail;o.value=s?(0,d.IG)(s):null}))});const h=()=>{const e=i.value?.getLayers()||[];a.value=e.length>0?(0,d.IG)(e):[]},u=async e=>{i.value!==e&&(i.value=e,o.value=null,h(),e&&(l.value=!0,await(0,n.dY)(),s?.clear(),s?.setPCB(e),s?.drawPCB(),l.value=!1,await(0,n.dY)()))},p=async e=>{l.value=!0,await(0,n.dY)();const t=await Xt.readFile(e),a=qt.createParser(e);if(!a)return void(l.value=!1);const o=await a.parse(e.name,t),c=yr.createAdapter(e.name,o);if(!c)return void(l.value=!1);const u=(0,d.IG)(c.adapt());i.value=u,r.value=[...r.value,u],h(),console.time("drawPCB"),s?.setPCB(u),s?.drawPCB(),console.timeEnd("drawPCB"),l.value=!1,window.PCBPLATES=u,window.PCBDRAWER=s},m=e=>{o.value=e?(0,d.IG)(e):null,e instanceof _?s?.selectLayer(e):s?.selectElement(e)},y=(e,t)=>{e.setVisibility(t),e instanceof _?(e.getElements().forEach(e=>e.setVisibility(t)),s?.toggleLayerVisibility(e,t)):s?.toggleElementVisibility(e,t),h()},v=e=>{y(e,!e.getVisibility())},f=({layer:e,color:t})=>{e.setColor(t),s?.changeLayerColor(e),h()},E=e=>{if(!i.value)return;const t=[];i.value.forEachLayer(s=>{if(e===V.Layer)s.setVisibility(!0),s.getElements().forEach(e=>e.setVisibility(!0));else if(s.getVisibility()){const r=e===V.Component?s.getComponents():s.getNets();r.forEach(e=>{e.getVisibility()||(e.setVisibility(!0),t.push(e))})}}),e===V.Layer?s?.resetLayersVisibility():s?.resetElementsVisibility(t),h()},g=e=>{E(e)},C=e=>{const t=30,r=(0,U.pu)(30),n={[z.ZoomIn]:()=>s?.zoomCamera(t),[z.ZoomOut]:()=>s?.zoomCamera(-t),[z.RotateLeft]:()=>s?.rotateCameraZ(r),[z.RotateRight]:()=>s?.rotateCameraZ(-r),[z.ResetView]:()=>s?.resetCamera()};n[e]?.()},L=e=>{r.value=r.value.filter(t=>t!==e),i.value===e&&(i.value=null,a.value=[],o.value=null,s?.clear())};return(e,s)=>((0,n.uX)(),(0,n.CE)("div",fr,[(0,n.bF)((0,d.R1)(Ft),{pcbPlatesList:r.value,selectedPlate:i.value,plateLayers:a.value,selectedElement:o.value,onFileChange:p,onSelectPlate:u,onSelectElement:m,onToggleVisibility:v,onResetVisibility:g,onChangeColor:f,onDeletePlate:L},null,8,["pcbPlatesList","selectedPlate","plateLayers","selectedElement"]),(0,n.bF)((0,d.R1)(ie),{ref_key:"pcbCanvasComponent",ref:t,elementInfo:c.value,onClick:C},null,8,["elementInfo"]),(0,n.bF)(vr.L,{"model-value":l.value,class:"align-center justify-center"},{default:(0,n.k6)(()=>[(0,n.bF)((0,d.R1)(Ht))]),_:1},8,["model-value"])]))}});const gr=Er;var Cr=gr;const Lr=[{path:"/",name:"pcb-view",component:Cr},{path:"/about",name:"about",component:()=>s.e(594).then(s.bind(s,6409))}],br=(0,p.aE)({history:(0,p.LA)("/"),routes:Lr});var Ar=br,Tr=s(782),Pr=(0,Tr.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),Rr=(s(5524),s(6306)),Or=s(6526);const Mr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 496",fill:"currentColor","xml:space":"preserve"};function Dr(e,t){return(0,n.uX)(),(0,n.CE)("svg",Mr,[...t[0]||(t[0]=[(0,n.Lk)("path",{d:"M448 192v-48h32v-16h-16V56c0-30.872-25.128-56-56-56s-56 25.128-56 56v72h-16v16h32v48H160v-48h16V0H32v144h16v48H0v304h496V192h-48zM368 56c0-22.056 17.944-40 40-40s40 17.944 40 40v72h-16V56h-48v16h32v56h-16V88h-16v40h-16V56zm64 88v48h-48v-48h48zM48 16h112v112H48V16zm96 128v48H64v-48h80zm336 336H16V208h32v80h16v-80h80v80h16v-80h208v112h16V208h48v112h16V208h32v272z"},null,-1),(0,n.Lk)("path",{d:"M176 240h16v16h-16zM304 240h16v16h-16zM304 288h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v144h16v-16h16v16h16v-16h16v16h16v-16h16v16h16v-16h16v16h16V272h-16v16zm0 96H192v-80h112v80zM144 304h16v16h-16zM112 240h16v16h-16zM112 272h16v16h-16zM112 304h16v16h-16zM80 240h16v16H80zM80 272h16v16H80zM80 304h16v16H80zM48 304h16v16H48zM336 240h16v16h-16zM400 240h16v16h-16zM336 272h16v16h-16zM208 240h16v16h-16zM240 240h16v16h-16zM272 240h16v16h-16zM400 272h16v16h-16zM336 304h16v16h-16zM400 304h16v16h-16zM48 336h16v16H48zM80 336h16v16H80zM112 336h16v16h-16zM144 336h16v16h-16zM336 336h16v16h-16zM368 336h16v16h-16zM400 336h16v16h-16zM432 336h16v16h-16zM48 368h16v16H48zM80 368h16v16H80zM112 368h16v16h-16zM144 368h16v16h-16zM336 368h16v16h-16zM368 368h16v16h-16zM400 368h16v16h-16zM432 368h16v16h-16zM48 400h16v16H48zM80 400h16v16H80zM112 400h16v16h-16zM144 400h16v16h-16zM336 400h16v16h-16zM368 400h16v16h-16zM400 400h16v16h-16zM432 400h16v16h-16zM48 432h16v16H48zM80 432h16v16H80zM112 432h16v16h-16zM144 432h16v16h-16zM176 432h16v16h-16zM208 432h16v16h-16zM240 432h16v16h-16zM272 432h16v16h-16zM304 432h16v16h-16zM336 432h16v16h-16zM368 432h16v16h-16zM400 432h16v16h-16zM432 432h16v16h-16zM104 32c-22.056 0-40 17.944-40 40s17.944 40 40 40 40-17.944 40-40-17.944-40-40-40zm0 64c-10.416 0-19.216-6.712-22.528-16h45.048c-3.304 9.288-12.104 16-22.52 16zM81.48 64c3.304-9.288 12.104-16 22.52-16s19.216 6.712 22.528 16H81.48z"},null,-1),(0,n.Lk)("path",{d:"M208 320h16v16h-16zM240 320h48v16h-48zM208 352h80v16h-80z"},null,-1)])])}const xr={},_r=(0,c.A)(xr,[["render",Dr]]);var Ir=_r;const wr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 496",fill:"currentColor","xml:space":"preserve"};function Sr(e,t){return(0,n.uX)(),(0,n.CE)("svg",wr,[...t[0]||(t[0]=[(0,n.Fv)('<path d="M92.688 0 48 44.688V80H0v112h48v128H0v64h48v112h448V0H92.688zM16 176V96h96v80H16zm0 192v-32h96v32H16zm464 112H64v-96h64v-24h16v-16h-16v-24H64V192h64v-16h16v-16h-16v-48h16V96h-16V80H64V51.312L99.312 16H480v464z"></path><path d="M304 448h112v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16V96h-16V80h16V64h-16V48H304v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16zm16-384h80v368h-80V64z"></path><circle cx="360" cy="88" r="8"></circle><path d="M256 64h-64v48h64V64zm-16 32h-32V80h32v16zM256 144h-64v48h64v-48zm-16 32h-32v-16h32v16zM144 216v16h-16v-16h-16v16H96v48h16v16h16v-16h16v16h16v-16h16v16h16v-16h16v-48h-16v-16h-16v16h-16v-16h-16zm48 32v16h-80v-16h80zM112 400c-17.648 0-32 14.352-32 32s14.352 32 32 32 32-14.352 32-32-14.352-32-32-32zm0 48c-8.824 0-16-7.176-16-16s7.176-16 16-16c8.816 0 16 7.176 16 16s-7.184 16-16 16zM192 400c-17.648 0-32 14.352-32 32s14.352 32 32 32 32-14.352 32-32-14.352-32-32-32zm0 48c-8.824 0-16-7.176-16-16s7.176-16 16-16c8.816 0 16 7.176 16 16s-7.184 16-16 16zM176 336h16v32h-16zM208 336h16v32h-16zM240 336h16v32h-16z"></path><circle cx="96" cy="48" r="8"></circle>',5)])])}const Nr={},kr=(0,c.A)(Nr,[["render",Sr]]);var Fr=kr;const zr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 496",fill:"currentColor","xml:space":"preserve"};function Vr(e,t){return(0,n.uX)(),(0,n.CE)("svg",zr,[...t[0]||(t[0]=[(0,n.Lk)("path",{d:"M432 48V32h-96.728C310.752 11.392 279.928 0 248 0c-31.928 0-62.752 11.392-87.272 32H64v16H0v448h16V64h48v16h60.24C116.248 97.6 112 116.704 112 136c0 5.112.48 10.472 1.192 16H64v16H32v328h16V184h16v16h64.224c8.04 14.968 18.824 28.576 31.776 39.6v8.4h-16v16h16v16h-16v16h16v16h-16v16h16v32h32v136h16V360h80v136h16V360h32v-32h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-8.4c12.952-11.024 23.736-24.632 31.776-39.6H432v-16h16v64h16v-80h-32v-16h-49.192c.712-5.528 1.192-10.888 1.192-16 0-19.296-4.248-38.4-12.24-56H432V64h48v432h16V48h-64zm-96 0h16v16h-16V48zm-192 0h16v16h-16V48zM80 64V48h48v16H80zm48 120H80v-16h48v16zm192 160H176v-16h144v16zm0-64h-16v16h16v16H176v-16h112v-16H176v-16h144v16zm32-96h-16v-16h16v16zm14.656-32H320v16h-48v16h48v16h29.44c-7.112 11.216-16.104 21.296-26.448 29.592L320 232v16h-64v-81.136c13.76-3.576 24-15.992 24-30.864 0-17.648-14.352-32-32-32s-32 14.352-32 32c0 14.872 10.232 27.288 24 30.864V248h-64v-16l-2.992-2.408c-10.344-8.304-19.336-18.384-26.448-29.592H176v-16h48v-16h-48v-16h-46.656c-.8-5.592-1.344-10.96-1.344-16 0-19.456 4.888-38.704 14.048-56H176V64h48V48h-48v-7.768C196.76 24.584 221.968 16 248 16c26.024 0 51.24 8.584 72 24.232V48h-48v16h48v16h33.952C363.112 97.296 368 116.544 368 136c0 5.04-.544 10.408-1.344 16zM248 152c-8.824 0-16-7.176-16-16s7.176-16 16-16c8.816 0 16 7.176 16 16s-7.184 16-16 16zm-104 32v-16h16v16h-16zm272-16v16h-48v-16h48zm0-104h-48V48h48v16z"},null,-1),(0,n.Lk)("path",{d:"M448 264h16v232h-16z"},null,-1)])])}const Br={},Ur=(0,c.A)(Br,[["render",Vr]]);var Hr=Ur;const Xr={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 496",fill:"currentColor","xml:space":"preserve"};function Wr(e,t){return(0,n.uX)(),(0,n.CE)("svg",Xr,[...t[0]||(t[0]=[(0,n.Fv)('<path d="M40 449.472V364.28L58.424 352H88v-16H53.576L24 355.72v93.752C14.704 452.784 8 461.584 8 472c0 13.232 10.768 24 24 24s24-10.768 24-24c0-10.416-6.712-19.216-16-22.528zM32 480c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8zM46.528 320H88v-16H46.528c-3.312-9.288-12.112-16-22.528-16-13.232 0-24 10.768-24 24s10.768 24 24 24c10.416 0 19.216-6.712 22.528-16zM16 312c0-4.416 3.584-8 8-8s8 3.584 8 8-3.584 8-8 8-8-3.584-8-8zM24 272c10.416 0 19.216-6.712 22.528-16H88v-16H46.528c-3.312-9.296-12.112-16-22.528-16-13.232 0-24 10.768-24 24s10.768 24 24 24zm0-32c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8zM56 272h32v16H56zM56 208h32v16H56zM0 176h88v16H0zM60.688 160H88v-16H67.312L48 124.688v-14.16C57.288 107.216 64 98.416 64 88c0-13.232-10.768-24-24-24S16 74.768 16 88c0 10.416 6.704 19.216 16 22.528v20.784L60.688 160zM40 80c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8zM144 67.312V88h16V60.688L131.312 32H0v16h124.688z"></path><path d="M176 35.312V88h16V28.688L163.312 0H0v16h156.688zM208 56h16v32h-16zM304 0h16v88h-16zM240 46.528V88h16V59.312l16 16V88h16V68.688L262.392 43.08C268.192 38.696 272 31.816 272 24c0-13.232-10.768-24-24-24s-24 10.768-24 24c0 10.416 6.704 19.216 16 22.528zM248 16c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8zM352 51.312 371.312 32h78.16A23.976 23.976 0 0 0 464 46.528v110.16L444.688 176H408v16h43.312L480 163.312V46.528c9.288-3.312 16-12.112 16-22.528 0-13.232-10.768-24-24-24-10.416 0-19.216 6.712-22.528 16h-84.784L336 44.688V88h16V51.312zM472 16c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8z"></path><path d="m414.08 97.392 17.92 17.92v9.376L412.688 144H408v16h11.312L448 131.312v-22.624L419.312 80h-4.784c-3.312-9.288-12.112-16-22.528-16-13.232 0-24 10.768-24 24s10.768 24 24 24c9.904 0 18.416-6.032 22.08-14.608zM392 96c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8zM408 208h88v16h-88zM480 449.472V268.688L451.312 240H408v16h36.688L464 275.312v41.376L451.312 304H408v16h36.688L464 339.312v110.16c-9.296 3.312-16 12.112-16 22.528 0 13.232 10.768 24 24 24s24-10.768 24-24c0-10.416-6.712-19.216-16-22.528zM472 480c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8z"></path><path d="M408 272h32v16h-32zM448 364.688 419.312 336H408v16h4.688L432 371.312V416h-80v-8h-16v24h96v12.688L412.688 464h-14.16c-3.312-9.288-12.112-16-22.528-16-13.232 0-24 10.768-24 24s10.768 24 24 24c10.416 0 19.216-6.712 22.528-16h20.784L448 451.312v-86.624zM376 480c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8zM160 408h-16v8h-41.472c-3.312-9.288-12.112-16-22.528-16-13.232 0-24 10.768-24 24s10.768 24 24 24c10.416 0 19.216-6.712 22.528-16H160v-24zm-80 24c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8zM304 408h16v88h-16zM272 408h16v88h-16zM240 420.688l-16 16V408h-16v41.472c-9.296 3.312-16 12.112-16 22.528 0 13.232 10.768 24 24 24s24-10.768 24-24c0-7.816-3.808-14.696-9.608-19.08L256 427.312V408h-16v12.688zM216 480c-4.416 0-8-3.584-8-8s3.584-8 8-8 8 3.584 8 8-3.584 8-8 8zM192 408h-16v20.688l-24 24V496h16v-36.688l24-24z"></path><path d="M336 392h16v-16h24v-24h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-16h16v-16h-16v-24h-24v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-16v-16h-16v16h-3.312L120 140.688V144h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v16h-16v16h16v24h24v16h16v-16h16v16h16v-16h16v16h16v-16h16v16h16v-16h16v16h16v-16h16v16h16v-16h16v16zm-200-32V147.312L147.312 136H360v224H136z"></path><path d="m318.888 211.048 13.96-13.96-33.936-33.936-13.96 13.96A78.861 78.861 0 0 0 272 171.728V152h-48v19.728a78.287 78.287 0 0 0-12.952 5.384l-13.96-13.96-33.936 33.936 13.96 13.96A79.564 79.564 0 0 0 171.728 224H152v48h19.728c1.408 4.472 3.2 8.8 5.384 12.952l-13.96 13.96 33.936 33.936 13.96-13.96A79.27 79.27 0 0 0 224 324.272V344h48v-19.728c4.472-1.408 8.8-3.2 12.952-5.384l13.96 13.96 33.936-33.936-13.96-13.96A78.979 78.979 0 0 0 324.272 272H344v-48h-19.728a78.287 78.287 0 0 0-5.384-12.952zM328 256h-16.224l-1.416 6.224a63.715 63.715 0 0 1-8.216 19.792l-3.408 5.408 11.496 11.496-11.312 11.312-11.496-11.496-5.408 3.408a63.715 63.715 0 0 1-19.792 8.216L256 311.776V328h-16v-16.224l-6.224-1.416a63.715 63.715 0 0 1-19.792-8.216l-5.408-3.408-11.496 11.496-11.312-11.312 11.496-11.496-3.408-5.408a63.715 63.715 0 0 1-8.216-19.792L184.224 256H168v-16h16.224l1.416-6.224a63.715 63.715 0 0 1 8.216-19.792l3.408-5.408-11.496-11.496 11.312-11.312 11.496 11.488 5.408-3.408a63.715 63.715 0 0 1 19.792-8.216l6.224-1.408V168h16v16.224l6.224 1.416a63.715 63.715 0 0 1 19.792 8.216l5.408 3.408 11.496-11.488 11.312 11.312-11.496 11.496 3.408 5.408a63.715 63.715 0 0 1 8.216 19.792l1.416 6.216H328v16z"></path><path d="M248 208c-22.056 0-40 17.944-40 40s17.944 40 40 40 40-17.944 40-40-17.944-40-40-40zm0 64c-13.232 0-24-10.768-24-24s10.768-24 24-24 24 10.768 24 24-10.768 24-24 24z"></path>',7)])])}const Gr={},jr=(0,c.A)(Gr,[["render",Wr]]);var Yr=jr,$r=(0,Rr.$N)({theme:{themes:{light:{colors:{"container-border-color":"#EEEEEE","container-background-color":"#FFFFFF","container-hover-background-color":"#FAFAFA"}}}},icons:{defaultSet:"mdi",aliases:{...Or.z,pcbComponent:Ir,pcbLayer:Fr,pcbNet:Hr,pcbPlate:Yr},sets:{mdi:Or.r,custom:{component:e=>{const{icon:t,...s}=e;return(0,n.h)(t,s)}}}}});async function Kr(){const e=await s.e(53).then(s.t.bind(s,8874,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}Kr(),(0,r.Ef)(u).use(Ar).use(Pr).use($r).mount("#app")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,i){if(!r){var a=1/0;for(h=0;h<e.length;h++){r=e[h][0],n=e[h][1],i=e[h][2];for(var o=!0,l=0;l<r.length;l++)(!1&i||a>=i)&&Object.keys(s.O).every(function(e){return s.O[e](r[l])})?r.splice(l--,1):(o=!1,i<a&&(a=i));if(o){e.splice(h--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var h=e.length;h>0&&e[h-1][2]>i;h--)e[h]=e[h-1];e[h]=[r,n,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};s.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var i=Object.create(null);s.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(function(e){a[e]=function(){return r[e]}});return a["default"]=function(){return r},s.d(i,a),i}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce(function(t,r){return s.f[r](e,t),t},[]))}}(),function(){s.u=function(e){return"js/"+{53:"webfontloader",594:"about"}[e]+"."+{53:"536d2edf",594:"80f2c471"}[e]+".js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="pcb_analyzer:";s.l=function(r,n,i,a){if(e[r])e[r].push(n);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var u=c[h];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+i){o=u;break}}o||(l=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[n];var p=function(t,s){o.onerror=o.onload=null,clearTimeout(d);var n=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(function(e){return e(s)}),t)return t(s)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),l&&document.head.appendChild(o)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/"}(),function(){var e={524:0};s.f.j=function(t,r){var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(function(s,r){n=e[t]=[s,r]});r.push(n[2]=i);var a=s.p+s.u(t),o=new Error,l=function(r){if(s.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,n[1](o)}};s.l(a,l,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,i,a=r[0],o=r[1],l=r[2],c=0;if(a.some(function(t){return 0!==e[t]})){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var h=l(s)}for(t&&t(r);c<a.length;c++)i=a[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(h)},r=self["webpackChunkpcb_analyzer"]=self["webpackChunkpcb_analyzer"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],function(){return s(2307)});r=s.O(r)})();
//# sourceMappingURL=app.36ceea5e.js.map